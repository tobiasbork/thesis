(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{397:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=$(r(741)),a=$(r(732)),o=$(r(731)),i=$(r(726)),u=$(r(723)),l=$(r(721)),s=$(r(720)),c=$(r(718)),f=$(r(714)),d=$(r(712)),p=$(r(711)),h=$(r(710)),m=$(r(706)),y=$(r(619)),g=$(r(596)),_=$(r(595)),b=$(r(594)),v=$(r(705)),E=$(r(698)),S=$(r(697)),O=$(r(695)),P=$(r(694)),w=$(r(692)),C=$(r(690)),N=$(r(687)),k=$(r(686)),A=$(r(670)),T=$(r(586)),R=$(r(664)),j=$(r(662)),x=$(r(661)),F=$(r(585)),I=$(r(659)),M=$(r(543)),L=$(r(654)),q=$(r(652)),D=$(r(648)),U=$(r(645)),V=$(r(643)),B=$(r(512)),H=$(r(641)),Y=$(r(639)),Q=$(r(542)),z=$(r(541)),G=$(r(636)),K=$(r(511)),W=$(r(538)),X=$(r(537)),J=$(r(536)),Z=$(r(16));function $(e){return e&&e.__esModule?e:{default:e}}t.default=[(0,J.default)({component:y.default,routes:[(0,J.default)({path:Z.default.HOME,exact:!0,component:L.default}),(0,J.default)({path:Z.default.ENTITY_BY_ID,exact:!0,component:Q.default}),(0,J.default)({path:Z.default.ENTITY,component:F.default}),(0,J.default)({path:Z.default.SEARCH,component:G.default}),(0,J.default)({path:Z.default.PAPER_DETAIL_BY_ID,exact:!0,component:z.default}),(0,J.default)({path:Z.default.PAPER_DETAIL_PDF_REDIRECT,exact:!0,component:z.default}),(0,J.default)({path:Z.default.PAPER_DETAIL_CITED_BY,component:z.default}),(0,J.default)({path:Z.default.PAPER_DETAIL_REFERENCES,component:z.default}),(0,J.default)({path:Z.default.PAPER_DETAIL,component:H.default,routes:[(0,J.default)({path:Z.default.PAPER_DETAIL_FIGURE,component:M.default}),(0,J.default)({path:Z.default.PAPER_DETAIL_VIDEO,component:Y.default})]}),(0,J.default)({path:Z.default.AUTHOR_ONBOARDING,component:w.default,routes:[(0,J.default)({path:Z.default.AUTHOR_ONBOARDING_PROFILE,component:C.default}),(0,J.default)({path:Z.default.AUTHOR_ONBOARDING_REMOVE_PAPERS,component:N.default}),(0,J.default)({path:Z.default.AUTHOR_ONBOARDING_ADD_PAPERS,component:O.default}),(0,J.default)({path:Z.default.AUTHOR_ONBOARDING_COMPLETE,component:P.default})]}),(0,J.default)({path:Z.default.ADMIN,component:f.default,routes:[(0,J.default)({path:Z.default.ADMIN_EXPERIMENTS,component:d.default}),(0,J.default)({path:Z.default.ADMIN_FEATURE_FLAGS,component:p.default})]}),(0,J.default)({path:Z.default.MODERATION,component:V.default,routes:[(0,J.default)({path:Z.default.AUTHOR_CLAIM_MODERATION,component:v.default}),(0,J.default)({path:Z.default.AUTHOR_AUTHORSHIP_MODERATION,component:S.default}),(0,J.default)({path:Z.default.AUTHOR_CORRECTIONS_TOOL,component:E.default})]}),(0,J.default)({path:Z.default.AUTHOR_PROFILE_BY_CLAIMED,component:b.default}),(0,J.default)({path:Z.default.AUTHOR_SUGGESTIONS,component:A.default}),(0,J.default)({path:Z.default.AUTHOR_CLAIM,component:g.default}),(0,J.default)({path:Z.default.AUTHOR_CLAIM_COMPLETE,component:_.default}),(0,J.default)({path:Z.default.AUTHOR_PROFILE_BY_ID,exact:!0,component:k.default}),(0,J.default)({path:Z.default.AUTHOR_PROFILE,component:k.default}),(0,J.default)({path:Z.default.CREATE_ALERT,component:R.default}),(0,J.default)({path:Z.default.ALERTS,component:m.default,routes:[(0,J.default)({path:Z.default.ALERTS,exact:!0,component:h.default}),(0,J.default)({path:Z.default.ALERTS_EMAIL,component:x.default})]}),(0,J.default)({path:Z.default.ALERTS_VERIFY_EMAIL,component:X.default}),(0,J.default)({path:Z.default.ALERTS_UNSUBSCRIBE,component:W.default}),(0,J.default)({path:Z.default.ALERTS_UNSUBSCRIBE_ALL,component:W.default}),(0,J.default)({path:Z.default.LIBRARY,component:D.default,routes:[(0,J.default)({path:Z.default.LIBRARY,exact:!0,component:q.default}),(0,J.default)({path:Z.default.LIBRARY_TAG_MANAGEMENT,exact:!0,component:U.default}),(0,J.default)({path:Z.default.LIBRARY_TAG,component:q.default})]}),(0,J.default)({path:Z.default.ACCOUNT,component:s.default,routes:[(0,J.default)({path:Z.default.ACCOUNT_AUTHOR_CLAIM_PENDING,component:a.default}),(0,J.default)({path:Z.default.ACCOUNT_AUTHOR_CONTACT,component:o.default}),(0,J.default)({path:Z.default.ACCOUNT_REMOVE_PAPERS,component:c.default}),(0,J.default)({path:Z.default.ACCOUNT_ADD_PAPERS,component:n.default}),(0,J.default)({path:Z.default.ACCOUNT_CORRECTIONS,component:i.default}),(0,J.default)({path:Z.default.ACCOUNT_CONTACT,component:u.default}),(0,J.default)({path:Z.default.ACCOUNT_MANAGE,component:l.default})]}),(0,J.default)({path:Z.default.SIGN_IN,component:K.default}),(0,J.default)({path:Z.default.CRAWLER,component:T.default}),(0,J.default)({path:Z.default.FAQ,component:I.default}),(0,J.default)({path:Z.default.DEBUG_SPRITES,component:j.default}),(0,J.default)({component:B.default})]})]},437:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.heapAuthorAddPaperSubmit=t.heapAuthorAddPaperSearch=t.heapAuthorAddPaperResult=t.heapAuthorAddPaperReasonBack=t.heapAuthorAddPaperReason=t.heapAuthorAddPaperPositionUnselect=t.heapAuthorAddPaperPositionSelect=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(449);t.heapAuthorAddPaperPositionSelect=function(e){return(0,a.mkHeapAttributes)(n({},e,{id:"author_add_paper_position_select"}))},t.heapAuthorAddPaperPositionUnselect=function(e){return(0,a.mkHeapAttributes)(n({},e,e,{id:"author_add_paper_position_unselect"}))},t.heapAuthorAddPaperReason=function(e){return(0,a.mkHeapAttributes)(n({},e,{id:"author_add_paper_reason"}))},t.heapAuthorAddPaperReasonBack=function(e){return(0,a.mkHeapAttributes)(n({},e,{id:"author_add_paper_reason_back"}))},t.heapAuthorAddPaperResult=function(){return(0,a.mkHeapAttributes)({id:"author_add_paper_result"})},t.heapAuthorAddPaperSearch=function(){return(0,a.mkHeapAttributes)({id:"author_add_paper_search"})},t.heapAuthorAddPaperSubmit=function(){return(0,a.mkHeapAttributes)({id:"author_add_paper_submit"})}},451:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.heapAuthorOnboardingSubmit=t.heapAuthorOnboardingSkipStep=t.heapAuthorOnboardingSkipAll=t.heapAuthorOnboardingNav=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(449);t.heapAuthorOnboardingNav=function(e){return(0,a.mkHeapAttributes)(n({},e,{id:"author_onboarding_nav"}))},t.heapAuthorOnboardingSkipAll=function(){return(0,a.mkHeapAttributes)({id:"author_onboarding_skip_all"})},t.heapAuthorOnboardingSkipStep=function(){return(0,a.mkHeapAttributes)({id:"author_onboarding_skip_step"})},t.heapAuthorOnboardingSubmit=function(){return(0,a.mkHeapAttributes)({id:"author_onboarding_submit"})}},452:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.children;if(!t)return null;var r=n.Children.toArray(t);return n.createElement("div",{className:"account-bar"},n.createElement("div",{className:"account-bar__columns"},n.createElement("div",{className:"account-bar__column account-bar__left"},r.find(function(e){return e.type===a})),n.createElement("div",{className:"account-bar__column account-bar__message"},r.find(function(e){return e.type===i})),n.createElement("div",{className:"account-bar__column account-bar__right"},r.find(function(e){return e.type===o}))))},t.AccountBarLeft=a,t.AccountBarRight=o,t.AccountBarMessage=i;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function a(e){return e.children}function o(e){return e.children}function i(e){return e.children}},458:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(24)),a=o(r(11));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showSortExplanation:!1,showResultCount:!0,sortDisplayType:"select",scrollToTopOfPage:!0,searchResultLayout:{showSortStat:!1},sorts:null};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.sorts||(t.sorts=n.default.paperSearch()),(0,a.default)(this,t)}},459:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacetDefinition=void 0;var n=r(275);var a=t.FacetDefinition=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.displayName=r},o={AUTHOR:new a("author","Authors"),COAUTHOR:new a("coAuthor","Co-Authors"),VENUE:new a("venue","Venues"),PUBLICATION_TYPE:new a("publicationType","Publication Types"),EXTERNAL_CONTENT_TYPE:new a("externalContentType","Supplemental Content")};t.default=(0,n.toEnum)(o)},461:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VALIDATE=t.SUBMIT=t.RESET=t.CLEAR=void 0;var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=c(r(5)),u=c(r(7)),l=c(r(84)),s=c(r(9));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var d=t.CLEAR="clear",p=t.RESET="reset",h=(t.SUBMIT="submit",t.VALIDATE="validate"),m=1e3,y=l.default.EventEmitter,g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._api=e,r._formEventEmitter=new y,r._registeredFields=new Map,r._stateOfFields=new Map,r._isSending=!1,r._formErrorMsg=null,r._formEventEmitter.setMaxListeners(m),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"destroy",value:function(){this._formEventEmitter.removeAllListeners(),this._stateOfFields.clear(),this._registeredFields.clear()}},{key:"subscribe",value:function(e,t){var r=this;return this._addListener(e,t),function(){r._removeListener(e,t)}}},{key:"triggerSubmit",value:function(){this._emit("submit")}},{key:"submitToApi",value:async function(e){this._isSending&&u.default.warn("Second attempt to submit a form while data is sending to API."),this.setSending(!0);try{var t=this.getFormValues(),r=await e(this._api,t);return this._cleanFormValues(),r}catch(e){this.setFormErrorMessage(e.message)}finally{this.setSending(!1)}}},{key:"_addListener",value:function(e,t){this._formEventEmitter.addListener(e,t)}},{key:"_removeListener",value:function(e,t){this._formEventEmitter.removeListener(e,t)}},{key:"_emit",value:function(e){this._formEventEmitter.emit(e)}},{key:"registerField",value:function(e){var t=e.fieldName,r=e.initialValue,n=e.onChange,a=e.onClear,o=e.onReset;(0,s.default)(!this._registeredFields.has(t),"Field "+t+" already exists in FormStore"),this._registeredFields.set(t,e),this._stateOfFields.set(t,{errorMessage:null,fieldName:t,value:r}),n&&this._addListener("change-"+t,n),a&&this._addListener(d,a),o&&this._addListener(p,o)}},{key:"unregisterField",value:function(e){var t=this._registeredFields.get(e);t&&(this._registeredFields.delete(e),this._stateOfFields.delete(e),t.onChange&&this._removeListener("change-"+e,t.onChange),t.onClear&&this._removeListener(d,t.onClear),t.onReset&&this._removeListener(p,t.onReset))}},{key:"getFieldNames",value:function(){return[].concat(f(this._registeredFields.keys()))}},{key:"setFieldErrorMessage",value:function(e,t){var r=this._stateOfFields.get(e);(0,s.default)(r,"Field "+e+" cannot set error message, it's missing from state"),r.errorMessage!==t&&(this._stateOfFields.set(e,a({},r,{errorMessage:t})),this._emit("change-"+e),this.emitChange())}},{key:"getFieldErrorMessage",value:function(e){var t=this._stateOfFields.get(e);return(0,s.default)(t,"Field "+e+" cannot get error message, it's missing from state"),t.errorMessage||null}},{key:"getFieldsWithErrors",value:function(){return[].concat(f(this._stateOfFields.values())).filter(function(e){return!!e.errorMessage}).map(function(e){return e.fieldName})}},{key:"hasFieldError",value:function(e){return!!this.getFieldErrorMessage(e)}},{key:"hasFieldErrors",value:function(){return this.getFieldsWithErrors().length>0}},{key:"setInitialFieldValue",value:function(e,t){var r=this._registeredFields.get(e);return(0,s.default)(r,"Field "+e+" was unable to set initial value because it was not yet registered."),this.isFieldDirty(e)?(u.default.warn("Was unable to set the initial field value for "+e+" because it was dirty"),!1):(this._registeredFields.set(e,a({},r,{initialValue:t})),this.setFieldValue(e,t),!0)}},{key:"getFieldValue",value:function(e){var t=this._stateOfFields.get(e);return(0,s.default)(t,"Field "+e+" cannot get value, it's missing from state"),t.value}},{key:"setFieldValue",value:function(e,t){this._setFieldValue(e,t)&&this._emit("change-"+e)}},{key:"_setFieldValue",value:function(e,t){var r=this._stateOfFields.get(e);return(0,s.default)(r,"Field "+e+" cannot be updated, it's missing from state"),r.value!==t&&(this._stateOfFields.set(e,a({},r,{errorMessage:null,value:t})),!0)}},{key:"resetFieldValue",value:function(e){this._resetFieldValue(e)&&this._emit("change-"+e)}},{key:"_resetFieldValue",value:function(e){var t=this._registeredFields.get(e);return(0,s.default)(t,"Field "+e+" cannot be reset, it's missing from state"),(0,s.default)(void 0!==t.initialValue,"Field "+e+" cannot be reset, it's initial value is undefined"),this._setFieldValue(e,t.initialValue)}},{key:"clearFieldValue",value:function(e){this._clearFieldValue(e)&&this._emit("change-"+e)}},{key:"_clearFieldValue",value:function(e){return this._setFieldValue(e,null)}},{key:"resetForm",value:function(){var e=[],t=!0,r=!1,a=void 0;try{for(var o,i=this._stateOfFields[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=n(o.value,1)[0];this._resetFieldValue(u)&&e.push(u)}}catch(e){r=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw a}}var l=!0,s=!1,c=void 0;try{for(var f,d=e[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var h=f.value;this._emit("change-"+h)}}catch(e){s=!0,c=e}finally{try{!l&&d.return&&d.return()}finally{if(s)throw c}}this._emit(p)}},{key:"clearForm",value:function(){var e=[],t=!0,r=!1,a=void 0;try{for(var o,i=this._stateOfFields[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=n(o.value,1)[0];this._clearFieldValue(u)&&e.push(u)}}catch(e){r=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw a}}var l=!0,s=!1,c=void 0;try{for(var f,p=e[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var h=f.value;this._emit("change-"+h)}}catch(e){s=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(s)throw c}}this._emit(d)}},{key:"hasError",value:function(){return!!this.getFormErrorMessage()||this.hasFieldErrors()}},{key:"getFormErrorMessage",value:function(){return this._formErrorMsg||null}},{key:"setFormErrorMessage",value:function(e){this._formErrorMsg!==e&&(this._formErrorMsg=e||null,this.emitChange())}},{key:"_clearFormErrorMessage",value:function(){this._formErrorMsg=null}},{key:"getFormValues",value:function(){var e={},t=!0,r=!1,a=void 0;try{for(var o,i=this._stateOfFields[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=n(o.value,2),l=u[0],s=u[1];e[l]=s.value}}catch(e){r=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw a}}return e}},{key:"getDirtyFieldNames",value:function(){var e=this;return this.getFieldNames().filter(function(t){return e.isFieldDirty(t)})}},{key:"_cleanFormValues",value:function(){var e=!0,t=!1,r=void 0;try{for(var o,i=this._stateOfFields[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var u=n(o.value,1)[0],l=this._registeredFields.get(u),c=this._stateOfFields.get(u);(0,s.default)(l&&c,"Field "+u+" was missing when attempting to clean the fieldValue."),this._registeredFields.set(u,a({},l,{initialValue:c.value}))}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}},{key:"isFieldDirty",value:function(e){var t=this._registeredFields.get(e),r=this._stateOfFields.get(e);return(0,s.default)(t&&r,"Field "+e+" was not registered at the time of checking dirty state."),t.initialValue&&"function"==typeof t.initialValue.equals?!t.initialValue.equals(r.value):t.initialValue!==r.value}},{key:"isFormDirty",value:function(){var e=this.getFieldNames(),t=!0,r=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;if(this.isFieldDirty(i))return!0}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return!1}},{key:"isSending",value:function(){return this._isSending}},{key:"setSending",value:function(e){this._isSending!==e&&(this._isSending=e,this.emitChange())}},{key:"validate",value:async function(){var e=this;this._clearFormErrorMessage();var t=[].concat(f(this._registeredFields.values())).filter(function(e){return e.onValidate}),r=0===(await Promise.all(t.map(function(t){return t.onValidate&&t.onValidate(e).then(function(r){return e.setFieldErrorMessage(t.fieldName,r),!r},function(r){return r instanceof Error?(u.default.error("Failed to validate "+t.fieldName+": threw Error",r),e.setFieldErrorMessage(t.fieldName,r.message)):"string"==typeof r?e.setFieldErrorMessage(t.fieldName,r):r?(u.default.error("Failed to validate "+t.fieldName+": unexpected error message type",r),e.setFieldErrorMessage(t.fieldName,r.toString())):(u.default.error("Failed to validate "+t.fieldName+": message was falsy",r),e.setFieldErrorMessage(t.fieldName,"Field is invalid.")),!1})}))).filter(function(e){return!e}).length;return this._emit(h),r}}]),t}();t.default=g},477:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r(399)),o=l(r(1)),i=r(3),u=l(i);function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent),n(t,[{key:"render",value:function(){var e=this.props,t=e.side,r=e.className,n=e.children;return u.default.createElement("section",{className:"sidebar sidebar-"+t},u.default.createElement("div",{className:(0,a.default)("column-wrapper",r)},n))}}]),t}();s.propTypes={className:o.default.string,side:o.default.string.isRequired,children:o.default.node},t.default=s},478:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r(1)),o=r(3),i=u(o);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent),n(t,[{key:"render",value:function(){return i.default.createElement("h4",{className:"histogram__title"},this.props.text)}}]),t}();l.propTypes={text:a.default.string.isRequired},t.default=l},479:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r(1)),o=r(3),i=u(o);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent),n(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"histogram__explanation",dangerouslySetInnerHTML:{__html:this.props.html}})}}]),t}();l.propTypes={html:a.default.string.isRequired},t.default=l},480:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r(399)),o=l(r(1)),i=r(3),u=l(i);function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent),n(t,[{key:"render",value:function(){var e=(0,a.default)("main-column",this.props.className);return u.default.createElement("main",{className:e},this.props.children)}}]),t}();s.propTypes={children:o.default.node,className:o.default.string},t.default=s},481:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r(1)),o=r(3),i=u(o);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent),n(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"container flex-row"},this.props.children)}}]),t}();l.propTypes={children:a.default.array.isRequired},t.default=l},482:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.PureComponent),n(t,[{key:"render",value:function(){var e=this.props.formError;return a.createElement("div",{className:"author-onboarding__banner"},a.createElement("div",{className:"author-onboarding__banner__columns"},a.createElement("div",{className:"author-onboarding__banner__column"},this.props.leftContent,a.createElement("div",{className:"author-onboarding__banner__form-error"},e)),a.createElement("div",{className:"author-onboarding__banner__column"},this.props.children)))}}]),t}();t.default=o},483:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.heapAuthorRemovePaperUndo=t.heapAuthorRemovePaperSubmit=t.heapAuthorRemovePaperRemove=t.heapAuthorRemovePaperFilter=void 0;var n=r(449);t.heapAuthorRemovePaperFilter=function(){return(0,n.mkHeapAttributes)({id:"author_remove_paper_filter"})},t.heapAuthorRemovePaperRemove=function(){return(0,n.mkHeapAttributes)({id:"author_remove_paper_remove"})},t.heapAuthorRemovePaperSubmit=function(){return(0,n.mkHeapAttributes)({id:"author_remove_paper_submit"})},t.heapAuthorRemovePaperUndo=function(){return(0,n.mkHeapAttributes)({id:"author_remove_paper_undo"})}},522:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=p(r(434)),o=p(r(404)),i=p(r(401)),u=p(r(426)),l=p(r(50)),s=r(16),c=p(r(1)),f=r(3),d=p(f);function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.PureComponent),n(t,[{key:"renderPaperLink",value:function(){var e=this.props,t=e.linkOpenInNewTab,r=e.paper,n=r.id,a=r.slug,u=r.title;if(t){var l=(0,s.makePath)({routeName:"PAPER_DETAIL",params:{paperId:n,slug:a}});return d.default.createElement(o.default,{href:l},d.default.createElement("span",{className:"paper-lite__metadata-title"},u))}return d.default.createElement(i.default,{"data-selenium-selector":"title-link",to:"PAPER_DETAIL",params:{paperId:n,slug:a}},d.default.createElement("span",{className:"paper-lite__metadata-title"},u))}},{key:"render",value:function(){var e=this.props,t=e.displayAbstract,r=e.paper,n=r.authors,o=r.paperAbstract,i=r.venue,l=r.year;return d.default.createElement("div",null,this.renderPaperLink(),d.default.createElement("div",{className:"paper-lite__metadata"},d.default.createElement(a.default,{authors:n}),i?d.default.createElement("span",{className:"paper-lite__metadata-item"}," · ",i):null,l?d.default.createElement("span",{className:"paper-lite__metadata-item"}," · ",l):null,t?d.default.createElement(u.default,{className:"text--preline abstract",text:o.text,limit:250,truncateByDefault:!0}):null))}}]),t}();h.contextTypes={router:c.default.object.isRequired},h.propTypes={paper:c.default.instanceOf(l.default).isRequired,displayAbstract:c.default.bool,linkOpenInNewTab:c.default.bool},h.defaultProps={displayAbstract:!1,linkOpenInNewTab:!1},t.default=h},523:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestionPaper=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=d(r(400)),o=d(r(522)),i=d(r(50)),u=d(r(399)),l=d(r(2)),s=d(r(1)),c=r(3),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){var t=e.title,r=e.icon,n=e.papers,a=e.onClick,o=e.selected,i=e.isPaginating;return f.default.createElement("div",null,t?f.default.createElement("p",{className:"suggestion-paper__title"},t):null,f.default.createElement("ul",{className:(0,u.default)("suggestion-paper__list",{paginating:i})},n.toList().map(function(e){return f.default.createElement(h,{key:e.id,icon:r,isSelected:o.has(e.id),paper:e,onClick:function(){a(e)}})})))};p.propTypes={title:s.default.string,icon:s.default.string.isRequired,papers:s.default.oneOfType([s.default.instanceOf(l.default.Seq),s.default.instanceOf(l.default.Set)]).isRequired,selected:s.default.instanceOf(l.default.Set).isRequired,onClick:s.default.func.isRequired,isPaginating:s.default.bool.isRequired},p.defaultProps={selected:l.default.Set(),isPaginating:!1};var h=t.SuggestionPaper=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.PureComponent),n(t,[{key:"render",value:function(){var e=this.props,t=e.paper,r=e.icon,n=e.isSelected,i=e.onClick;return f.default.createElement("li",{className:(0,u.default)("suggestion-paper__item",{selected:n})},f.default.createElement("div",{className:"suggestion-paper__icon-box"},n?null:f.default.createElement(a.default,{icon:"suggestion-"+r,width:"20",height:"20",className:"suggestion-paper__icon",onClick:i})),f.default.createElement(o.default,{paper:t,linkOpenInNewTab:!0}))}}]),t}();h.contextTypes={router:s.default.object.isRequired},h.propTypes={icon:s.default.string.isRequired,paper:s.default.instanceOf(i.default).isRequired,isSelected:s.default.bool.isRequired,onClick:s.default.func.isRequired},t.default=p},524:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.default=function(e){return function(t){var r,u;return u=r=function(r){function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r),n(a,[{key:"getChildContext",value:function(){return{analyticsLocation:e}}},{key:"render",value:function(){return i.default.createElement(t,this.props||{})}}]),a}(o.PureComponent),r.childContextTypes={analyticsLocation:a.default.object},r.contextTypes={analyticsLocation:a.default.object},u}};var a=u(r(1)),o=r(3),i=u(o);function u(e){return e&&e.__esModule?e:{default:e}}},525:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=v(r(679)),i=v(r(450)),u=v(r(676)),l=v(r(675)),s=v(r(671)),c=v(r(402)),f=v(r(429)),d=v(r(238)),p=v(r(65)),h=v(r(7)),m=v(r(241)),y=v(r(399)),g=v(r(1)),_=r(3),b=v(_);function v(e){return e&&e.__esModule?e:{default:e}}var E=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.trackAbstractToggle=o.trackAbstractToggle.bind(o),o.trackActionClick=o.trackActionClick.bind(o),o.trackMetaClick=o.trackMetaClick.bind(o),o.trackTitleClick=o.trackTitleClick.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_.PureComponent),a(t,[{key:"handleAnalyticsEvent",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.context.analyticsLocation,o=this.props,i=o.index,u=o.result.id;if(a){var l=d.default.getIn(a,e,t),s=n({},r,{index:i,paperId:u});(0,p.default)(c.default.create(l,s)),d.default.isSerp(a)&&"MORE"!==t&&"LESS"!==t&&this.context.weblabStore.trackEvent(f.default.SEARCH_SUCCESS,{target:l})}else h.default.warn("You need to add analyticsLocation to context so that we know where this action event happened.")}},{key:"trackTitleClick",value:function(){this.handleAnalyticsEvent("TITLE")}},{key:"trackMetaClick",value:function(e,t){this.handleAnalyticsEvent(e,null,{clickedEntityId:t})}},{key:"trackAbstractToggle",value:function(e,t){this.handleAnalyticsEvent("Abstract",e,t)}},{key:"trackActionClick",value:function(e,t){this.handleAnalyticsEvent("Action",e,t)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.index,n=e.layout,a=e.children,c=e.result,f=(0,y.default)("search-result",t);return b.default.createElement("article",{className:f},b.default.createElement("header",{className:"search-result-header"},b.default.createElement(s.default,{title:c.title,id:c.id,slug:c.slug,onClick:this.trackTitleClick}),b.default.createElement(i.default,{paper:c,onClick:this.trackMetaClick})),b.default.createElement(u.default,{onToggle:this.trackAbstractToggle,abstract:c.paperAbstract}),a,b.default.createElement("footer",{className:"search-result-footer flex-row-vcenter"},b.default.createElement(l.default,{citationStats:c.citationStats,externalContentStats:c.externalContentStats,id:c.id,index:r,showSortStat:n.showSortStat}),b.default.createElement(o.default,{paper:c,trackActionClick:this.trackActionClick})))}}]),t}();E.contextTypes={analyticsLocation:g.default.object,weblabStore:g.default.instanceOf(m.default).isRequired},E.propTypes={result:g.default.object.isRequired,index:g.default.number.isRequired,layout:g.default.object.isRequired,className:g.default.string},t.default=E},526:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=function(e){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return r=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.onChangePercentage=function(e){var t=n.props,r=t.onChange,a=t.name;r&&r(parseFloat(e.currentTarget.value)/100,a)},n.onChangeValue=function(e){var t=n.props,r=t.onChange,a=t.name;r&&r(parseFloat(e.currentTarget.value),a)},o(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.PureComponent),n(t,[{key:"render",value:function(){var e=this.props,t=e.min,r=e.max,n=e.step,o=e.value,i=e.name,u=e.showPercentage,l=e.showValue;return a.createElement("div",{className:"admin__ratio-slider"},a.createElement("input",{className:"admin__ratio-slider__range",type:"range",name:i+"__range",min:t,max:r,step:n,value:o,onChange:this.onChangeValue}),u&&a.createElement("input",{className:"admin__ratio-slider__input admin__ratio-slider__percentage",type:"input",name:i+"__value",min:t,max:r,value:(100*o|0)+"%",onChange:this.onChangePercentage}),l&&a.createElement("input",{className:"admin__ratio-slider__input admin__ratio-slider__value",type:"input",name:i+"__value",min:t,max:r,value:o,onChange:this.onChangeValue}))}}]),t}();i.defaultProps={max:1,min:0,showPercentage:!0,showValue:!1,step:.01},t.default=i},527:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=c(r(422)),o=c(r(256)),i=c(r(68)),u=r(237),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),s=c(r(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))));return d.call(i),i.state=i.getStateFromStore(),i.context.authorCorrectionsStore.registerComponent(i,function(){i.setState(i.getStateFromStore())}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.PureComponent),n(t,[{key:"getStateFromStore",value:function(){return{stagedPapersCount:this.context.authorCorrectionsStore.getPendingCorrections().filter(function(e){return e.correctionType===i.default.RemoveAuthorship}).size}}},{key:"render",value:function(){var e=this.state.stagedPapersCount;return e?l.createElement("div",{className:"author-remove-papers-papers-count"},l.createElement(a.default,{content:(0,u.getPluralizedString)(function(e){return e.authorRemovePapers.stagedRemoveCorrections},e)}),l.createElement("span",{className:"middot"},"•"),l.createElement("button",{className:"author-remove-papers-papers-count__link-button",onClick:this.handleReset},(0,u.getString)(function(e){return e.authorRemovePapers.resetStagedLabel}))):null}}]),t}();f.contextTypes={authorCorrectionsStore:s.default.instanceOf(o.default).isRequired};var d=function(){var e=this;this.handleReset=function(){e.context.authorCorrectionsStore.clearPendingCorrections(i.default.RemoveAuthorship)}};t.default=f},528:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.clearAndFocusFilterInput=function(){if(!(0,l.isBrowser)())return;var e=window.document.getElementById(c);if(!e)return;e.value="",e.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),e.focus()};var o=function(e){return e&&e.__esModule?e:{default:e}}(r(400)),i=r(237),u=r(483),l=r(8),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));var c="remove-filter-input",f=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))));return i.state={filterText:""},i.onInputFilter=i.onInputFilter.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.PureComponent),a(t,[{key:"onInputFilter",value:function(e){var t=e.currentTarget.value;this.setState({filterText:t}),this.props.onChange(t)}},{key:"render",value:function(){var e=this.state.filterText;return s.createElement("div",{className:"author-remove-papers__filter"},s.createElement("input",n({id:c,className:"author-remove-papers__filter__input",type:"text",value:e,placeholder:(0,i.getString)(function(e){return e.authorRemovePapers.filterLabel})},(0,u.heapAuthorRemovePaperFilter)(),{onInput:this.onInputFilter})),s.createElement(o.default,{icon:"filter"}))}}]),t}();t.default=f},529:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=S(r(403)),o=S(r(717)),i=S(r(528)),u=S(r(716)),l=S(r(715)),s=r(427),c=r(237),f=r(410),d=S(r(7)),p=S(r(239)),h=S(r(256)),m=S(r(50)),y=E(r(2)),g=E(r(3)),_=S(r(399)),b=S(r(9)),v=S(r(1));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}var O=1e3,P=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))));return i.onRemoveAll=function(){var e=i.props.authorId,t=i.state,r=t.authorPapers,n=t.filteredPaperIds,a=i.context.authorCorrectionsStore;(n?r.filter(function(e){return n.has(e.id)}):r).forEach(function(t){var r=t.authors.findIndex(function(t){return t.alias.ids.includes(e.toString())});(0,b.default)(r>=0,"viewing author is not in paper's list of authors"),a.enqueueRemovePaperCorrection({paperId:t.id,position:r})})},i.state={isLoading:!1,isInitialLoad:!0,errorMessage:null,authorPapers:y.List(),filteredPaperIds:null,filterText:""},i.onChangeFilterThrottled=(0,s.debounce)(i.onChangeFilter.bind(i),O,{leading:!0,trailing:!0}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,g.PureComponent),n(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchAuthorPapers().catch(function(t){return e.onApiError(t)})}},{key:"onApiError",value:function(e){d.default.error("Api Error",e),this.setState({errorMessage:(0,c.getString)(function(e){return e.authorRemovePapers.error.apiQueryFailed}),isLoading:!1,isInitialLoad:!1})}},{key:"onChangeFilter",value:function(e){var t=this;this.setState({filterText:e},function(){t.filterAuthorPapers().catch(function(e){return t.onApiError(e)})})}},{key:"fetchAuthorPapers",value:async function(){var e,t;await(0,f.setState)(this,{isLoading:!0});var r=this.props.authorId,n=this.context.api,a=await n.fetchPapersWithCorrectionsAppliedForAuthor({authorId:r,model:"PaperLite"});await(0,f.setState)(this,{isLoading:!1,isInitialLoad:!1});var o=null!=(t=a)&&null!=(t=t.resultData)?t.authorId:t;(0,b.default)(r===o,"browser and server author IDs do not match");var i=y.List((null!=(e=a)&&null!=(e=e.resultData)?e.paperLites:e)||[]).map(m.default.fromJs);await(0,f.setState)(this,{authorPapers:i})}},{key:"filterAuthorPapers",value:async function(){var e,t,r=this.state.filterText;if(!r)return(0,f.setState)(this,{filteredPaperIds:null});var n=this.props.authorId,a=this.context.api;await(0,f.setState)(this,{isLoading:!0,isInitialLoad:!0});var o=await a.fetchPapersWithCorrectionsAppliedForAuthor({authorId:n,model:"PaperId",filterText:r});await(0,f.setState)(this,{isLoading:!1,isInitialLoad:!1});var i=null!=(t=o)&&null!=(t=t.resultData)?t.authorId:t;if((0,b.default)(n===i,"browser and server author IDs do not match"),r===this.state.filterText){var u=y.Set(((null!=(e=o)&&null!=(e=e.resultData)?e.paperIds:e)||[]).map(function(e){return e.id}));await(0,f.setState)(this,{filteredPaperIds:u})}else d.default.info("Dropping old filter data",{queryFilterText:r,currentFilterText:this.state.filterText})}},{key:"render",value:function(){var e=this.props.authorId,t=this.state,r=t.isLoading,n=t.isInitialLoad,s=t.authorPapers,c=t.filteredPaperIds,f=t.filterText,d=c?s.filter(function(e){return c.has(e.id)}):s;return g.createElement("div",{className:(0,_.default)({"author-remove-papers":!0,"author-remove-papers__is-empty":s.isEmpty(),"author-remove-papers__is-loading":r})},g.createElement("div",{className:"author-remove-papers__controls"},g.createElement(l.default,{numPapers:d.size,onRemoveAll:this.onRemoveAll}),g.createElement(i.default,{onChange:this.onChangeFilterThrottled})),d.isEmpty()&&!n&&g.createElement(o.default,{hasAuthorPapers:!s.isEmpty(),filterText:f}),g.createElement("div",{className:(0,_.default)({"author-remove-papers__papers":!0,"author-remove-papers__papers-loading":r})},r&&g.createElement(a.default,null),!r&&d.map(function(t){return g.createElement(u.default,{key:t.id,paperLite:t,viewerAuthorId:e})})))}}]),t}();P.contextTypes={api:v.default.instanceOf(p.default).isRequired,authorCorrectionsStore:v.default.instanceOf(h.default).isRequired},t.default=P},530:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(1)),a=o(r(3));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=e.selected,r=e.onClick;return a.default.createElement("label",{className:"toggle-slider flex-static"},a.default.createElement("input",{type:"checkbox",checked:t,onChange:r}),a.default.createElement("span",{className:"toggle-slider__bg"}))};i.propTypes={selected:n.default.bool.isRequired,onClick:n.default.func.isRequired},t.default=i},531:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.CompletionStatusTag=S;var o=g(r(400)),i=g(r(725)),u=r(237),l=g(r(239)),s=g(r(240)),c=(g(r(303)),g(r(724))),f=g(r(55)),d=g(r(68)),p=g(r(265)),h=(g(r(53)),y(r(2)),y(r(3))),m=g(r(1));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function _(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var b=[d.default.AddAuthorship,d.default.SwapAuthorship],v=[d.default.RemoveAuthorship],E=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(_(o))));return u.state=n({errorMessage:null},u.getStateFromAuthStore(),u.getStateFromCorrectionsStore()),u.context.authStore.registerComponent(u,function(){u.setState(u.getStateFromAuthStore())}),u.context.correctionsStore.registerComponent(u,function(){u.setState(u.getStateFromCorrectionsStore())}),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,h.PureComponent),a(t,[{key:"getStateFromAuthStore",value:function(){return{authorId:this.context.authStore.getClaimedAuthorId()}}},{key:"getStateFromCorrectionsStore",value:function(){var e=this.context.correctionsStore;return{isLoading:e.isLoading(),authorCorrectionsStatus:e.getAuthorCorrectionsStatus(),nameFieldCorrections:e.getFieldCorrectionsByName(c.default.ChangeNameField),affiliationsFieldCorrections:e.getFieldCorrectionsByName(c.default.ChangeAffiliationField),homepageFieldCorrections:e.getFieldCorrectionsByName(c.default.ChangeHomepageField),orcidFieldCorrections:e.getFieldCorrectionsByName(c.default.ChangeOrcidField),addCorrections:e.getPaperAuthorCorrectionsByTypes(b),addCorrectionsStatus:e.getPaperAuthorCorrectionsStatusByTypes(b),removeCorrections:e.getPaperAuthorCorrectionsByTypes(v),removeCorrectionsStatus:e.getPaperAuthorCorrectionsStatusByTypes(v)}}},{key:"renderNameFieldCorrection",value:function(){var e=this.state.nameFieldCorrections;if(e.isEmpty())return null;var t=e.first().previousValue,r=e.last().changeValue,n=[t.first].concat(_(t.middle),[t.last]).join(" "),a=[r.first].concat(_(r.middle),[r.last]).join(" ");return h.createElement("li",{key:"name-field",className:"corrections-summary__author-corrections__item"},h.createElement("div",{className:"corrections-summary__author-corrections__item-label"},(0,u.getString)(function(e){return e.correctionSummary.authorCorrections.nameFieldLabel})),h.createElement("div",{className:"corrections-summary__author-corrections__item-change"},h.createElement("div",{className:"corrections-summary__author-corrections__item-change__old-value"},n),h.createElement("div",{className:"corrections-summary__author-corrections__item-change__new-value"},a)))}},{key:"renderAffiliationsFieldCorrection",value:function(){var e=this.state.affiliationsFieldCorrections;if(e.isEmpty())return null;var t=e.first().previousValue,r=e.last().changeValue,n=r.filter(function(e){return!t.includes(e)}),a=t.filter(function(e){return!r.includes(e)});return n.length+a.length===0?null:h.createElement("li",{key:"affiliations-field",className:"corrections-summary__author-corrections__item"},h.createElement("div",{className:"corrections-summary__author-corrections__item-label"},(0,u.getString)(function(e){return e.correctionSummary.authorCorrections.affiliationsFieldLabel})),h.createElement("div",{className:"corrections-summary__author-corrections__item-change"},a.map(function(e){return h.createElement("div",{key:e,className:"corrections-summary__author-corrections__item-change__remove-value"},e)}),n.map(function(e){return h.createElement("div",{key:e,className:"corrections-summary__author-corrections__item-change__add-value"},e)})))}},{key:"renderOrcidFieldCorrection",value:function(){var e,t,r=this.state.orcidFieldCorrections;if(r.isEmpty())return null;var n=null!=(t=r.first())&&null!=(t=t.previousValue)?t.id:t,a=null!=(e=r.last())&&null!=(e=e.changeValue)?e.id:e;return h.createElement("li",{key:"orcid-field",className:"corrections-summary__author-corrections__item"},h.createElement("div",{className:"corrections-summary__author-corrections__item-label"},(0,u.getString)(function(e){return e.correctionSummary.authorCorrections.orcidFieldLabel})),h.createElement("div",{className:"corrections-summary__author-corrections__item-change"},n&&h.createElement("div",{className:"corrections-summary__author-corrections__item-change__old-value"},n),a&&h.createElement("div",{className:"corrections-summary__author-corrections__item-change__new-value"},a)))}},{key:"renderHomepageFieldCorrection",value:function(){var e=this.state.homepageFieldCorrections;if(e.isEmpty())return null;var t=e.first().previousValue,r=e.last().changeValue;return h.createElement("li",{key:"homepage-field",className:"corrections-summary__author-corrections__item"},h.createElement("div",{className:"corrections-summary__author-corrections__item-label"},(0,u.getString)(function(e){return e.correctionSummary.authorCorrections.homepageFieldLabel})),h.createElement("div",{className:"corrections-summary__author-corrections__item-change"},t&&h.createElement("div",{className:"corrections-summary__author-corrections__item-change__old-value"},t),r&&h.createElement("div",{className:"corrections-summary__author-corrections__item-change__new-value"},r)))}},{key:"renderAuthorCorrections",value:function(){var e=this.state.authorCorrectionsStatus,t=[this.renderNameFieldCorrection(),this.renderAffiliationsFieldCorrection(),this.renderOrcidFieldCorrection(),this.renderHomepageFieldCorrection()].filter(function(e){return!!e});return 0===t.length?null:h.createElement("section",{className:"corrections-summary__section corrections-summary__author-corrections"},h.createElement("h3",{className:"corrections-summary__correction-headline"},h.createElement("span",{className:"corrections-summary__correction-headline__text"},(0,u.getString)(function(e){return e.correctionSummary.authorCorrections.headerText}))),h.createElement(S,{status:e}),h.createElement("ul",{className:"corrections-summary__author-corrections__list"},t))}},{key:"renderAddCorrections",value:function(){var e=this.state.addCorrections;return e.isEmpty()?null:h.createElement("section",{className:"corrections-summary__section corrections-summary__paper-corrections corrections-summary__add-corrections"},h.createElement("h3",{className:"corrections-summary__correction-headline"},h.createElement("span",{className:"corrections-summary__correction-headline__text"},(0,u.getPluralizedString)(function(e){return e.correctionSummary.addCorrections.headerText},e.size))),h.createElement("ul",{className:"corrections-summary__paper-corrections__list"},e.map(function(e){return h.createElement("li",{key:"add-"+e.id,className:"corrections-summary__paper-corrections__item"},h.createElement(S,{status:e.completionStatus}),h.createElement(i.default,{correction:e}))})))}},{key:"renderRemoveCorrections",value:function(){var e=this.state.removeCorrections;return e.isEmpty()?null:h.createElement("section",{className:"corrections-summary__section corrections-summary__paper-corrections corrections-summary__remove-corrections"},h.createElement("h3",{className:"corrections-summary__correction-headline"},h.createElement("span",{className:"corrections-summary__correction-headline__text"},(0,u.getPluralizedString)(function(e){return e.correctionSummary.removeCorrections.headerText},e.size))),h.createElement("ul",{className:"corrections-summary__paper-corrections__list"},e.map(function(e){return h.createElement("li",{key:"remove-"+e.id,className:"corrections-summary__paper-corrections__item"},h.createElement(S,{status:e.completionStatus}),h.createElement(i.default,{correction:e}))})))}},{key:"render",value:function(){return h.createElement("div",{className:"corrections-summary"},this.renderAuthorCorrections(),this.renderRemoveCorrections(),this.renderAddCorrections())}}]),t}();function S(e){var t=e.status;return t?h.createElement("span",{className:"corrections-summary__correction-headline__status"},h.createElement("span",{className:"corrections-summary__correction-headline__status__label"},(0,u.getString)(function(e){return e.correctionSummary.statusLabel[t]})),function(){switch(t){default:return null;case f.default.Submitted:case f.default.Processing:return h.createElement(o.default,{icon:"status-waiting"});case f.default.Cancelled:case f.default.Failed:return h.createElement(o.default,{icon:"status-warning"});case f.default.Succeeded:return h.createElement(o.default,{icon:"status-approved"})}}()):null}E.contextTypes={api:m.default.instanceOf(l.default).isRequired,authStore:m.default.instanceOf(s.default).isRequired,correctionsStore:m.default.instanceOf(p.default).isRequired},t.default=E},532:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(237),i=c(r(461)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),l=c(r(399)),s=c(r(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));u.onChange=u.onChange.bind(u);var l=u.props,s=l.fieldName,c=l.initialValue;return u.context.formStore.registerField({fieldName:s,initialValue:c,onValidate:e.onValidate,onChange:function(){return u.setState(u.getStateFromFormStore())}}),u.state=n({},u.getStateFromFormStore()),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.PureComponent),a(t,[{key:"componentDidUpdate",value:function(e){var t=this.context.formStore,r=this.props.initialValue||"";e.initialValue!==r&&t.setInitialFieldValue(e.fieldName,r)}},{key:"componentWillUnmount",value:function(){this.context.formStore.unregisterField(this.props.fieldName)}},{key:"getStateFromFormStore",value:function(){var e=this.context.formStore,t=this.props.fieldName;return{value:e.getFieldValue(t)||"",error:e.getFieldErrorMessage(t)}}},{key:"onChange",value:function(e){var t=this.context.formStore,r=this.props.fieldName,n=e.currentTarget.value;t.setFieldValue(r,n)}},{key:"render",value:function(){var e=this.props,t=e.fieldName,r=e.label,n=e.placeholder,a=e.isRequired,i=this.state,s=i.value,c=i.error;return u.createElement("label",{className:(0,l.default)("author-edit__field",{"author-edit__has-error":c})},u.createElement("div",{className:"author-edit__field__label"},u.createElement("span",{className:"author-edit__field__label-text"},r),!a&&u.createElement("span",{className:"author-edit__field__label-optional"},(0,o.getString)(function(e){return e.authorEdit.form.optional}))),u.createElement("div",{className:"author-edit__field__input"},u.createElement("input",{type:"text",name:t,className:"author-edit__field__input-text",value:s,onChange:this.onChange,placeholder:n}),u.createElement("div",{className:"author-edit__field__error"},c)))}}]),t}();f.contextTypes={formStore:s.default.instanceOf(i.default).isRequired},t.default=f},533:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=m(r(403)),o=r(237),i=r(410),u=m(r(239)),l=m(r(7)),s=m(r(50)),c=h(r(2)),f=h(r(3)),d=m(r(9)),p=m(r(1));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))));return i.state={isLoading:!0,authorPapers:c.List()},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.PureComponent),n(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchAuthorPapers().catch(function(t){return e.onApiError(t)})}},{key:"onApiError",value:function(e){l.default.error("Api Error",e),this.setState({isLoading:!1})}},{key:"fetchAuthorPapers",value:async function(){var e,t;await(0,i.setState)(this,{isLoading:!0});var r=this.props.authorId,n=this.context.api,a=await n.fetchPapersWithCorrectionsAppliedForAuthor({authorId:r,model:"PaperLite"});await(0,i.setState)(this,{isLoading:!1});var o=null!=(t=a)&&null!=(t=t.resultData)?t.authorId:t;(0,d.default)(r===o,"browser and server author IDs do not match");var u=c.List((null!=(e=a)&&null!=(e=e.resultData)?e.paperLites:e)||[]).map(s.default.fromJs);await(0,i.setState)(this,{authorPapers:u})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,r=e.authorPapers;return t?f.createElement(a.default,null):f.createElement("div",null,f.createElement("h2",null,(0,o.getPluralizedString)(function(e){return e.correctionsCurrentPapers.headerText},r.size)),f.createElement("ul",null,r.map(function(e){return f.createElement("li",{key:e.id,className:"corrections-curent-papers__paper"},e.title)})))}}]),t}();y.contextTypes={api:p.default.instanceOf(u.default).isRequired},t.default=y},534:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REASON_VALUES=t.REASON_KEYS=t.REASON=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(437),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));var u=t.REASON=Object.freeze({NOT_LISTED:"notListed",WRONG_AUTHOR:"wrongAuthor",WRONG_NAME:"wrongName"}),l=t.REASON_KEYS=Object.freeze(Object.keys(u).map(function(e){return e})),s=(t.REASON_VALUES=Object.freeze(l.map(function(e){return u[e]})),function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))));return i.state={},i.onClickReason=i.onClickReason.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent),a(t,[{key:"onClickReason",value:function(){var e=this.props,t=e.reason;(0,e.onSelect)(t)}},{key:"render",value:function(){var e=this.props,t=e.label,r=e.reason;return i.createElement("div",n({},(0,o.heapAuthorAddPaperReason)({reason:r}),{className:"author-add-papers__position-reason"}),i.createElement("div",{className:"author-add-papers__position-reason__label",onClick:this.onClickReason},t))}}]),t}());t.default=s},535:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=P(r(740)),o=P(r(736)),i=P(r(735)),u=P(r(734)),l=r(733),s=r(427),c=r(237),f=r(410),d=P(r(256)),p=P(r(239)),h=P(r(71)),m=r(534),y=P(r(7)),g=r(16),_=O(r(2)),b=O(r(3)),v=P(r(399)),E=P(r(1)),S=P(r(52));function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function P(e){return e&&e.__esModule?e:{default:e}}var w=1e3,C=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))));return i.state={isLoading:!1,errorMessage:null,canResultsBeVisible:!1,hasFetchedPapers:!1,addedPapers:_.OrderedMap(),searchPapers:_.List(),searchText:""},i.onAddPaper=i.onAddPaper.bind(i),i.onRemovePaper=i.onRemovePaper.bind(i),i.onChangePosition=i.onChangePosition.bind(i),i.onChangeReason=i.onChangeReason.bind(i),i.onChangeSearchThrottled=(0,s.debounce)(i.onChangeSearch.bind(i),w,{leading:!0,trailing:!0}),i.onClickCapture=i.onClickCapture.bind(i),i.onFocusSearch=i.onFocusSearch.bind(i),i.onKeyDown=i.onKeyDown.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,b.PureComponent),n(t,[{key:"onApiError",value:function(e){y.default.error("Api Error",e),this.setState({errorMessage:(0,c.getString)(function(e){return e.authorRemovePapers.error.apiQueryFailed}),isLoading:!1})}},{key:"onKeyDown",value:function(e){switch(e.keyCode){case l.KEY_CODE_ESC:this.setState({canResultsBeVisible:!1})}}},{key:"onChangeSearch",value:function(e){var t=this;this.setState({searchText:e},function(){e?t.searchPapers().catch(function(e){return t.onApiError(e)}):t.setState({searchPapers:_.List()})})}},{key:"onFocusSearch",value:function(){this.setState({canResultsBeVisible:!0})}},{key:"onAddPaper",value:function(e){var t=this.context.authorCorrectionsStore,r=this.state.addedPapers;this.setState({canResultsBeVisible:!1,addedPapers:r.set(e.id,{paper:e,position:null,reason:null})}),t.addDraftPaperId(e.id)}},{key:"onRemovePaper",value:function(e){var t=this.state.addedPapers;this.setState({addedPapers:t.delete(e.id)}),this.context.authorCorrectionsStore.cancelPendingCorrectionByPaperId(e.id)}},{key:"onChangeReason",value:function(e,t){var r=this.state.addedPapers;this.setState({addedPapers:r.set(e.id,{paper:e,position:null,reason:t})});var n=this.context.authorCorrectionsStore;n.cancelPendingCorrectionByPaperId(e.id),n.addDraftPaperId(e.id)}},{key:"onChangePosition",value:function(e,t,r){var n=this.state.addedPapers;this.setState({addedPapers:n.set(e.id,{paper:e,position:r,reason:t})});var a=this.context.authorCorrectionsStore;if("number"==typeof r)switch(t){case m.REASON.NOT_LISTED:a.enqueueAddPaperCorrection({paperId:e.id,position:r});break;case m.REASON.WRONG_AUTHOR:case m.REASON.WRONG_NAME:var o=e.authors.get(r).alias.canonicalId(),i=o?parseInt(o,10):null;a.enqueueSwapPaperCorrection({fromAuthorId:i,paperId:e.id,position:r})}else a.cancelPendingCorrectionByPaperId(e.id),a.addDraftPaperId(e.id)}},{key:"onClickCapture",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({canResultsBeVisible:!1})}},{key:"searchPapers",value:async function(){var e;await(0,f.setState)(this,{isLoading:!0,canResultsBeVisible:!0});var t=this.props.authorId,r=this.context.api,n=this.state.searchText,a=n,o=S.default.parse(n),i=o.protocol,u=o.pathname;if(i){var l=g.RouteRegexes.PAPER_DETAIL.exec(u)[2];l&&(a=l)}var s=await r.searchPapers({query:a,page:1,limit:10,excludeAuthorId:t,model:"Paper",prependSuggestions:!0});if(this.state.searchText===n){await(0,f.setState)(this,{isLoading:!1,hasFetchedPapers:!0});var c=_.List((null!=(e=s)&&null!=(e=e.resultData)?e.papers:e)||[]).map(h.default.fromJs);await(0,f.setState)(this,{searchPapers:c})}else y.default.info("Search results dropped, text is no longer "+n)}},{key:"render",value:function(){var e=this,t=this.props.showDraftAsError,r=this.state,n=r.isLoading,l=r.hasFetchedPapers,s=r.addedPapers,c=r.searchPapers,f=r.searchText,d=r.canResultsBeVisible&&l&&f;return b.createElement("div",{onKeyDown:this.onKeyDown,className:(0,v.default)({"author-add-papers":!0,"author-add-papers__is-empty":!1,"author-add-papers__is-loading":n,"author-add-papers__show-draft-as-error":t})},d&&b.createElement("div",{className:"author-add-papers__click-capture",onClick:this.onClickCapture}),b.createElement("div",{className:"author-add-papers__controls"},b.createElement(o.default,{isLoading:n,onChange:this.onChangeSearchThrottled,onFocus:this.onFocusSearch}),d&&b.createElement(i.default,{onAddPaper:this.onAddPaper,papers:c})),s.isEmpty()&&b.createElement(u.default,null),b.createElement("div",{className:"author-add-papers__paper-list"},s.valueSeq().reverse().map(function(t){var r=t.paper,n=t.position,o=t.reason;return b.createElement(a.default,{key:r.id,paper:r,position:n,reason:o,onRemovePaper:e.onRemovePaper,onChangeReason:e.onChangeReason,onChangePosition:e.onChangePosition})})))}}]),t}();C.contextTypes={api:E.default.instanceOf(p.default).isRequired,authorCorrectionsStore:E.default.instanceOf(d.default).isRequired},t.default=C},621:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(405),o=s(r(263)),i=s(r(45)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),l=s(r(1));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(n))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.PureComponent),n(t,[{key:"render",value:function(){return u.createElement(a.FeatureGate,{feature:i.default.RecommenderSerpAd},u.createElement(a.FeatureEnabled,null,u.createElement("a",{href:"https://s2-sanity.apps.allenai.org",target:"_blank","data-heap-id":"recommender-ad-call-to-action",className:"recommender-ad","data-selenium-selector":"recommender-ad"},u.createElement("div",{className:"recommender-ad__content-container"},u.createElement("div",{className:"recommender-ad__title"},"Start Your Personalized Research Feed"),u.createElement("div",{className:"recommender-ad__description"},"Want to stay up-to-date and spend less time searching for the latest Computer Science research? Get exclusive access to Semantic Sanity: a personalized adaptive arXiv feed created by Semantic Scholar."),u.createElement("span",{className:"recommender-ad__call-to-action button button--primary"},"TRY THE BETA")))))}}]),t}();c.contextTypes={iconStore:l.default.instanceOf(o.default).isRequired},t.default=c},622:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=h(r(485)),o=h(r(463)),i=h(r(490)),u=h(r(238)),l=h(r(6)),s=h(r(244)),c=h(r(1)),f=r(3),d=h(f),p=r(2);function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state=n.stateFromQueryStore(),n.context.queryStore.registerComponent(n,function(){n.setState(n.stateFromQueryStore())}),n.histogramCallback=n.histogramCallback.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.PureComponent),n(t,[{key:"histogramCallback",value:function(e,t){var r=this.context,n=r.queryStore,a=r.router;n.routeToYearRange(e,t,a)}},{key:"stateFromQueryStore",value:function(){return{yearFilter:this.context.queryStore.getQuery().yearFilter}}},{key:"render",value:function(){var e=this.props,t=e.availableFilters,r=e.isAuthorHomePage,n=t.get("authors"),s=t.get("coAuthors"),c=t.get("venues"),f=t.get("publicationTypes"),h=t.get("externalContentTypes");return d.default.createElement("div",{className:"filters-wrapper"},d.default.createElement("h4",{className:"filter-header"},"Filter Results:"),d.default.createElement(a.default,null),r&&d.default.createElement(i.default,{analyticsEvent:u.default.Serp.YEAR_SLIDER,years:t.get("years"),filteredYears:t.get("filteredYears")||new p.List,isMobile:!1,filterCallback:this.histogramCallback,histogramWidth:200,histogramHeight:50,yearFilter:this.state.yearFilter}),h.isEmpty()?null:d.default.createElement(o.default,{filterType:"externalContentType",filters:h}),f.isEmpty()?null:d.default.createElement(o.default,{filterType:"publicationType",filters:f}),n.isEmpty()?null:d.default.createElement(o.default,{filterType:"author",filters:n}),s.isEmpty()?null:d.default.createElement(o.default,{filterType:"coAuthor",filters:s}),c.isEmpty()?null:d.default.createElement(o.default,{maxLabelLength:l.default.data.MAX_VENUE_LENGTH,filterType:"venue",filters:c}))}}]),t}();m.contextTypes={queryStore:c.default.instanceOf(s.default).isRequired,router:c.default.object.isRequired},m.propTypes={availableFilters:c.default.object.isRequired,isAuthorHomePage:c.default.bool},t.default=m},623:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=d(r(495)),o=d(r(400)),i=d(r(425)),u=d(r(30)),l=d(r(2)),s=d(r(1)),c=r(3),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.PureComponent),n(t,[{key:"render",value:function(){var e=this.props.sorts.map(function(e,t){return f.default.createElement("div",{className:"sort-explanation-description",key:t},f.default.createElement("h4",{className:"flex-row-vcenter"},f.default.createElement(o.default,{icon:e.icon,width:"15",height:"15",className:"sort-explanation-icon"}),f.default.createElement("span",null,u.default.getString("sort."+e.id+".title"))),f.default.createElement("span",{className:"sort-explanation-text",dangerouslySetInnerHTML:{__html:u.default.getString("sort."+e.id+".description")}}))}),t=f.default.createElement("div",{className:"sort-explanation-tooltip-content"},e);return f.default.createElement(i.default,{tooltipPosition:"bottom-right",className:"flex-right sort-explanation-tooltip",tooltipContent:t},f.default.createElement("div",{className:"flex-row-vcenter"},f.default.createElement("span",{className:"sort-explanation-text-label"},"Learn More"),f.default.createElement(a.default,null)))}}]),t}();p.propTypes={sorts:s.default.instanceOf(l.default.List).isRequired},t.default=p},624:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=p(r(403)),o=p(r(507)),i=p(r(494)),u=p(r(623)),l=p(r(244)),s=p(r(2)),c=p(r(1)),f=r(3),d=p(f);function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChangeSort=e.onChangeSort.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.PureComponent),n(t,[{key:"onChangeSort",value:function(e){this.context.queryStore.routeToSort(e,this.context.router)}},{key:"render",value:function(){return d.default.createElement("div",{className:"controls"},this.props.showResultCount?this.props.isFiltering?d.default.createElement("div",{className:"flex-row-vcenter"},d.default.createElement(a.default,{seleniumSelector:"icon-loading-serp"})," Updating results"):d.default.createElement(o.default,{response:this.props.response}):null,d.default.createElement("div",{className:"controls-right flex-row"},d.default.createElement(i.default,{onChangeSort:this.onChangeSort,options:this.props.sorts,displayType:this.props.sortDisplayType,sort:this.props.query.sort})),this.props.showSortExplanation?d.default.createElement(u.default,{sorts:this.props.sorts}):null)}}]),t}();h.contextTypes={queryStore:c.default.instanceOf(l.default).isRequired,router:c.default.object.isRequired},h.propTypes={isFiltering:c.default.bool,query:c.default.object.isRequired,response:c.default.object.isRequired,showResultCount:c.default.bool,sortDisplayType:c.default.string,showSortExplanation:c.default.bool,sorts:c.default.instanceOf(s.default.List)},t.default=h},625:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(404)),a=l(r(2)),o=l(r(0)),i=l(r(1)),u=l(r(3));function l(e){return e&&e.__esModule?e:{default:e}}var s="•";function c(e){var t=e.title,r=e.authors,a=e.published,i=e.url;return u.default.createElement("li",{className:"slide-item truncate-line"},u.default.createElement(n.default,{className:"slide-title",href:i},t),u.default.createElement("p",{className:"slide-info"},function(e){return e.size>1?e.first()+" + "+(e.size-1)+" "+s+" ":1===e.size?e.first()+" "+s+" ":""}(r),o.default.unix(a).utc().format("MMM DD, YYYY")))}c.propTypes={title:i.default.string.isRequired,authors:i.default.instanceOf(a.default.List).isRequired,published:i.default.number.isRequired,url:i.default.string.isRequired},t.default=c},626:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(r(625)),o=s(r(2)),i=s(r(1)),u=r(3),l=s(u);function s(e){return e&&e.__esModule?e:{default:e}}var c=3,f=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={collapsed:!0,canToggle:e.slides.size>c-1},n.toggle=n.toggle.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.PureComponent),n(t,[{key:"toggle",value:function(){this.setState(function(e){return{collapsed:!e.collapsed}})}},{key:"render",value:function(){var e=this.props.slides,t=this.state,r=t.canToggle,n=t.collapsed,o=e.take(n?c:e.size);return l.default.createElement("ul",{className:"slide-list"},o.map(function(e){var t=e.id,r=e.title,n=e.authors,o=e.published,i=e.url;return l.default.createElement(a.default,{key:t,title:r,authors:n,published:o,url:i})}),r?l.default.createElement("li",{className:"mod-clickable link-button",onClick:this.toggle},"Show ",n?"More":"Fewer"):null)}}]),t}();f.propTypes={slides:i.default.instanceOf(o.default.List).isRequired},t.default=f},627:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=p(r(467)),o=p(r(626)),i=p(r(238)),u=p(r(246)),l=p(r(65)),s=p(r(2)),c=p(r(1)),f=r(3),d=p(f);function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.PureComponent),n(t,[{key:"componentDidMount",value:function(){(0,l.default)(u.default.create(i.default.Serp.MATCHED_SLIDES))}},{key:"render",value:function(){var e=this.props,t=e.queryString,r=e.slides;return d.default.createElement(a.default,{title:"Slides related to "+t,icon:"slides-list"},d.default.createElement(o.default,{slides:r}))}}]),t}();h.propTypes={queryString:c.default.string.isRequired,slides:c.default.instanceOf(s.default.List).isRequired},t.default=h},628:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=p(r(504)),o=p(r(463)),i=p(r(409)),u=p(r(408)),l=p(r(459)),s=p(r(244)),c=p(r(1)),f=r(3),d=p(f);function p(e){return e&&e.__esModule?e:{default:e}}var h=5,m=30;function y(e,t){return t.size>h?d.default.createElement(a.default,{label:l.default.findById(e).displayName,lessText:"Fewer"},function(r){return d.default.createElement(o.default,{maxLabelLength:m,collapsible:!1,filterType:e,displayDocCount:!0,filters:t.take(r?t.size:h)})}):d.default.createElement(o.default,{maxLabelLength:m,displayDocCount:!0,collapsible:!1,filterType:e,filters:t})}var g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.setYearRange=o.setYearRange.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.PureComponent),n(t,[{key:"setYearRange",value:function(e,t){var r=this.context,n=r.queryStore,a=r.router;n.routeToYearRange(e,t,a)}},{key:"render",value:function(){var e=this.props.availableFilters,t=e.get("publicationTypes"),r=e.get("authors"),n=e.get("venues"),a=e.get("externalContentTypes");return d.default.createElement(i.default,{className:"flex-row"},d.default.createElement(u.default,{className:"fresh-filters__filter_container",width:"25"},t?y(l.default.PUBLICATION_TYPE.id,t):null),d.default.createElement(u.default,{className:"fresh-filters__filter_container",width:"25"},a.isEmpty()?null:y(l.default.EXTERNAL_CONTENT_TYPE.id,a)),d.default.createElement(u.default,{className:"fresh-filters__filter_container",width:"25"},r.isEmpty()?null:y(l.default.AUTHOR.id,r)),d.default.createElement(u.default,{className:"fresh-filters__filter_container",width:"25"},n.isEmpty()?null:y(l.default.VENUE.id,n)))}}]),t}();g.propTypes={availableFilters:c.default.object.isRequired},g.contextTypes={queryStore:c.default.instanceOf(s.default).isRequired,router:c.default.object.isRequired},t.default=g},629:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=d(r(462)),o=d(r(459)),i=r(237),u=d(r(244)),l=d(r(2)),s=d(r(1)),c=r(3),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}var p=o.default.EXTERNAL_CONTENT_TYPE.id,h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.state=o.getStateFromQueryStore(),o.handleToggleClick=o.handleToggleClick.bind(o),o.context.queryStore.registerComponent(o,function(){o.setState(o.getStateFromQueryStore())}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.PureComponent),n(t,[{key:"getDisabledStatus",value:function(){var e=this.props.externalContentTypes.find(function(e){return"video"===e.value});return!this.state.isSelected&&(!e||0===e.documentCount)}},{key:"getStateFromQueryStore",value:function(){return{isSelected:this.context.queryStore.isFilterActive(p,"video")}}},{key:"handleToggleClick",value:function(){var e=this.context,t=e.queryStore,r=e.router;t.routeToToggleFilter(p,"video",r)}},{key:"render",value:function(){return f.default.createElement(a.default,{isSelected:this.state.isSelected,isDisabled:this.getDisabledStatus(),text:(0,i.getString)(function(e){return e.serp.toggle.video.title}),seleniumSelector:"has-video-toggle",onToggle:this.handleToggleClick})}}]),t}();h.contextTypes={router:s.default.object.isRequired,queryStore:s.default.instanceOf(u.default).isRequired},h.propTypes={externalContentTypes:s.default.instanceOf(l.default.OrderedSet).isRequired},t.default=h},630:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=d(r(26)),o=d(r(408)),i=r(237),u=d(r(413)),l=d(r(244)),s=d(r(1)),c=r(3),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.toggleSerpDensity=function(){var e=n.context,t=e.queryStore,r=e.router,a=!n.state.isCompact;n.setState({isCompact:a}),t.routeToToggleSerpDensity(a,r)},n.state=n.getStateFromQueryStore(),n.context.queryStore.registerComponent(n,function(){n.setState(n.getStateFromQueryStore)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.PureComponent),n(t,[{key:"getStateFromQueryStore",value:function(){return{isCompact:this.context.queryStore.isDisplayCompactActive()}}},{key:"render",value:function(){var e=this.state.isCompact;return f.default.createElement(o.default,{className:"fresh-filters__density-toggle"},f.default.createElement(u.default,{iconProps:{icon:"display-compact",width:"12",height:"12"},tagName:"button","data-selenium-selector":"density-toggle-compact",onClick:this.toggleSerpDensity,className:"button button--secondary",text:(0,i.getString)(function(e){return e.serp.toggle.compact.title}),disabled:e}),f.default.createElement(u.default,{iconProps:{icon:"display-comfortable",width:"12",height:"12"},tagName:"button","data-selenium-selector":"density-toggle-comfortable",onClick:this.toggleSerpDensity,className:"button button--secondary",text:(0,i.getString)(function(e){return e.serp.toggle.comfortable.title}),disabled:!e}))}}]),t}();p.contextTypes={router:s.default.object.isRequired,queryStore:s.default.instanceOf(l.default).isRequired,cookieJar:s.default.instanceOf(a.default).isRequired},t.default=p},631:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=d(r(462)),o=d(r(459)),i=r(237),u=d(r(244)),l=d(r(2)),s=d(r(1)),c=r(3),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}var p=o.default.PUBLICATION_TYPE.id,h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.state=o.getStateFromQueryStore(),o.handleToggleClick=o.handleToggleClick.bind(o),o.context.queryStore.registerComponent(o,function(){o.setState(o.getStateFromQueryStore())}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.PureComponent),n(t,[{key:"getDisabledStatus",value:function(){var e=this.props.publicationTypes.find(function(e){return"Reviews"===e.value});return!this.state.isSelected&&(!e||0===e.documentCount)}},{key:"getStateFromQueryStore",value:function(){return{isSelected:this.context.queryStore.isFilterActive(p,"Reviews")}}},{key:"handleToggleClick",value:function(){var e=this.context,t=e.queryStore,r=e.router;t.routeToToggleFilter(p,"Reviews",r)}},{key:"render",value:function(){return f.default.createElement(a.default,{isSelected:this.state.isSelected,isDisabled:this.getDisabledStatus(),text:(0,i.getString)(function(e){return e.serp.toggle.review.title}),seleniumSelector:"reviews",onToggle:this.handleToggleClick})}}]),t}();h.contextTypes={router:s.default.object.isRequired,queryStore:s.default.instanceOf(u.default).isRequired},h.propTypes={publicationTypes:s.default.instanceOf(l.default.OrderedSet).isRequired},t.default=h},632:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=f(r(462)),o=r(237),i=f(r(244)),u=f(r(2)),l=f(r(1)),s=r(3),c=f(s);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.state=o.getStateFromQueryStore(),o.handleToggleClick=o.handleToggleClick.bind(o),o.context.queryStore.registerComponent(o,function(){o.setState(o.getStateFromQueryStore())}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.PureComponent),n(t,[{key:"getStateFromQueryStore",value:function(){var e=this.context.queryStore.getCurrentYearRange(),t=(new Date).getUTCFullYear(),r=t-5;return{isSelected:this.getIsSelected(e,r,t),isDisabled:this.getIsDisabled(r,t),currentYear:t,fiveYearsAgo:r}}},{key:"getIsSelected",value:function(e,t,r){return e.min===t&&e.max===r}},{key:"getIsDisabled",value:function(e,t){var r=this.props,n=r.years,a=r.filteredYears;return 0===(a.isEmpty()?n:a).filter(function(r){return r.year>=e&&r.year<=t}).reduce(function(e,t){return e+t.count},0)}},{key:"handleToggleClick",value:function(){var e=this.context,t=e.queryStore,r=e.router,n=this.state,a=n.currentYear,o=n.fiveYearsAgo;n.isSelected?t.routeToYearRange(null,null,r):t.routeToYearRange(o,a,r)}},{key:"render",value:function(){var e=this.state,t=e.isSelected,r=e.isDisabled;return c.default.createElement(a.default,{isSelected:t,isDisabled:r,text:(0,o.getString)(function(e){return e.serp.toggle.year.title}),seleniumSelector:"last-five-years",onToggle:this.handleToggleClick})}}]),t}();d.contextTypes={router:l.default.object.isRequired,queryStore:l.default.instanceOf(i.default).isRequired},d.propTypes={filteredYears:l.default.instanceOf(u.default.List).isRequired,years:l.default.instanceOf(u.default.List).isRequired},t.default=d},633:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=E(r(409)),o=E(r(408)),i=E(r(485)),u=E(r(632)),l=E(r(507)),s=E(r(631)),c=E(r(630)),f=E(r(629)),d=E(r(628)),p=E(r(494)),h=E(r(23)),m=E(r(244)),y=E(r(241)),g=E(r(2)),_=E(r(1)),b=r(3),v=E(b);function E(e){return e&&e.__esModule?e:{default:e}}var S=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.state={showDensityToggle:o.shouldShowDensityToggle(),filtersAreExpanded:!1},o.toggleFilters=o.toggleFilters.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,b.PureComponent),n(t,[{key:"toggleFilters",value:function(){this.setState(function(e){return{filtersAreExpanded:!e.filtersAreExpanded}})}},{key:"shouldShowDensityToggle",value:function(){return this.context.weblabStore.getVariation(h.default.SerpDensity.KEY)!==h.default.SerpDensity.Variation.CONTROL}},{key:"render",value:function(){var e=this.props,t=e.response,r=e.layoutOptions,n=e.query,h=this.state,m=h.filtersAreExpanded,y=h.showDensityToggle,_=t.stats.get("publicationTypes")||g.default.OrderedSet(),b=t.stats.get("externalContentTypes")||g.default.OrderedSet();return v.default.createElement("div",{className:"fresh-filters"},v.default.createElement("div",{className:"fresh-filters__controls"},v.default.createElement("div",{className:"centered-max-width-content"},v.default.createElement(a.default,{className:"flex-row-vcenter fresh-filters__flex-container"},v.default.createElement(o.default,{className:"fresh-filters__filter_container fresh-filters__filter_container--has-right-border"},v.default.createElement(l.default,{response:t})),v.default.createElement(u.default,{years:t.stats.get("years"),filteredYears:t.stats.get("filteredYears")||new g.default.List}),v.default.createElement(s.default,{publicationTypes:_}),v.default.createElement(i.default,{isToggle:!0}),v.default.createElement(f.default,{externalContentTypes:b}),v.default.createElement(o.default,null,v.default.createElement("button",{"data-selenium-selector":"more-search-filters",onClick:this.toggleFilters,className:"link-button fresh-filters__filters_button button"},v.default.createElement("span",null,m?"Fewer":"More"," Filters"))),v.default.createElement("div",{className:"fresh-filters__display-controls"},y&&v.default.createElement(c.default,null),v.default.createElement(o.default,{className:"fresh-filters__sort-control"},v.default.createElement(p.default,{className:"select--no-styles",labelText:"Sort By",onChangeSort:this.props.onChangeSort,options:r.sorts,displayType:r.sortDisplayType,sort:n.sort})))))),m?v.default.createElement("div",{className:"fresh-filters__drawer","data-selenium-selector":"fresh-filters"},v.default.createElement("div",{className:"centered-max-width-content fresh-filters__drawer-pointer-container"},v.default.createElement("span",{className:"fresh-filters__drawer-pointer tooltip-pointer"},v.default.createElement("span",{className:"tooltip-pointer-arrow"})),v.default.createElement(d.default,{availableFilters:t.stats}))):null)}}]),t}();S.propTypes={isFiltering:_.default.bool.isRequired,layoutOptions:_.default.object.isRequired,response:_.default.object.isRequired,query:_.default.object.isRequired,onChangeSort:_.default.func.isRequired},S.contextTypes={router:_.default.object.isRequired,weblabStore:_.default.instanceOf(y.default).isRequired,queryStore:_.default.instanceOf(m.default).isRequired},t.default=S},634:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=x(r(481)),o=x(r(484)),i=x(r(409)),u=x(r(408)),l=x(r(633)),s=x(r(467)),c=x(r(480)),f=x(r(486)),d=x(r(540)),p=x(r(627)),h=x(r(539)),m=x(r(433)),y=x(r(624)),g=x(r(622)),_=x(r(525)),b=x(r(621)),v=x(r(491)),E=x(r(477)),S=x(r(47)),O=x(r(30)),P=x(r(238)),w=x(r(244)),C=x(r(268)),N=x(r(399)),k=x(r(2)),A=x(r(1)),T=r(3),R=x(T),j=x(r(250));function x(e){return e&&e.__esModule?e:{default:e}}var F=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.loadPage=n.loadPage.bind(n),n.onChangeYearFilter=n.onChangeYearFilter.bind(n),n.onChangeSort=n.onChangeSort.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,T.PureComponent),n(t,[{key:"componentDidUpdate",value:function(e){if(!k.default.is(e.response,this.props.response)&&!this.props.response.results.isEmpty()){var t=S.default.scrollTop(),r=this.refs["search-result-"+(this.props.response.results.size-1)];if(r){var n=S.default.offsetFromBody(r);n<t&&S.default.scrollTop(n-20)}}}},{key:"loadPage",value:function(e){e!==this.props.query.page&&(S.default.scrollTop(this.props.layoutOptions.scrollToTopOfPage?0:S.default.offsetFromBody(j.default.findDOMNode(this))),this.context.queryStore.routeToPage(e,this.context.router))}},{key:"renderResults",value:function(){var e=this.props,t=e.query,r=e.response.results,n=e.layoutOptions.searchResultLayout;return r.map(function(e,r){return R.default.createElement(_.default,{result:e,key:e.id,index:(t.page-1)*t.pageSize+r,ref:"search-result-"+r,layout:n})})}},{key:"renderNoResults",value:function(){var e=this.props.response.querySuggestions,t=!(e&&!e.isEmpty())?void 0:e.first().text;return R.default.createElement(o.default,{query:this.props.query.queryString,hasFacets:this.props.response.hasFacets(),suggestedQuery:t})}},{key:"renderAHPSerp",value:function(){var e=this.props,t=e.response,r=e.isFiltering,n=e.layoutOptions,o=e.query,i=e.isAuthorHomePage,u=t.results,l=t.stats,s=t.matchedAuthors;return R.default.createElement("section",{className:"content"},R.default.createElement(a.default,null,R.default.createElement(E.default,{className:"filter",side:"left"},R.default.createElement("div",{ref:"filters"},t.hasFacets()?R.default.createElement(g.default,{availableFilters:l,isAuthorHomePage:i}):null)),R.default.createElement(c.default,{className:"results"},s.isEmpty()?null:R.default.createElement(f.default,{queryString:o.queryString,authors:s}),u.isEmpty()?null:R.default.createElement(y.default,{query:o,response:t,isFiltering:r,showResultCount:n.showResultCount,sortDisplayType:n.sortDisplayType,showSortExplanation:n.showSortExplanation,sorts:n.sorts}),R.default.createElement("div",{className:(0,N.default)("result-page",{"is-filtering":r})},u.isEmpty()?this.renderNoResults():this.renderResults()),R.default.createElement("div",{className:"flex-row"},R.default.createElement(m.default,{className:"flex-right",loadPage:this.loadPage,pageNumber:o.page,totalPages:t.totalPages})))))}},{key:"onChangeSort",value:function(e){var t=this.context,r=t.queryStore,n=t.router;r.routeToSort(e,n)}},{key:"onChangeYearFilter",value:function(e,t){var r=this.context,n=r.queryStore,a=r.router;n.routeToYearRange(e,t,a)}},{key:"renderFreshSerpContent",value:function(){var e=this.props,t=e.response,r=e.isFiltering,n=e.layoutOptions,a=e.isCompact,o=e.query,c=t.matchedAuthors,y=t.totalPages,g=t.stats,_=t.matchedEntity,E=t.modifiedQueryString,S=t.matchedPresentations;return R.default.createElement("div",{className:(0,N.default)("fresh-serp",{"fresh-serp--compact":a})},R.default.createElement(l.default,{isFiltering:r,layoutOptions:n,onChangeSort:this.onChangeSort,query:o,response:t}),R.default.createElement(i.default,{layoutMed:"column-reverse",className:"centered-max-width-content",role:"main",id:"main-content"},R.default.createElement(u.default,{width:"66",className:"flex-item__left-column",seleniumSelector:"results"},E?R.default.createElement(h.default,{originalQuery:t.query.queryString,modifiedQuery:E}):null,R.default.createElement("div",{className:(0,N.default)("result-page",{"is-filtering":r})},this.renderResults()),R.default.createElement(m.default,{className:"flex-right",loadPage:this.loadPage,pageNumber:o.page,totalPages:y})),R.default.createElement(u.default,{width:"33",className:"flex-item__right-column"},R.default.createElement(b.default,null),g.get("years").size>1?R.default.createElement(s.default,{title:O.default.getString("serp.histogram.title"),icon:"bar-chart",className:"histogram"},R.default.createElement(v.default,{analyticsEvent:P.default.Serp.YEAR_SLIDER,filterCallback:this.onChangeYearFilter,filters:g,yearFilter:o.yearFilter,yearBuckets:null,showPresetButtons:!0})):null,_?R.default.createElement(d.default,{entity:_}):null,c.isEmpty()?null:R.default.createElement(f.default,{displayAsInfoBox:!0,queryString:o.queryString,authors:c}),!S.isEmpty()&&c.isEmpty()?R.default.createElement(p.default,{queryString:o.queryString,slides:S}):null)))}},{key:"renderFreshSerpNoResults",value:function(){var e=this.props.isFiltering;return R.default.createElement("div",{className:"fresh-serp"},R.default.createElement(i.default,{className:"centered-max-width-content",role:"main",id:"main-content"},R.default.createElement(u.default,{width:"66",className:"flex-item__left-column"},R.default.createElement("div",{className:(0,N.default)("result-page",{"is-filtering":e})},this.renderNoResults()))))}},{key:"renderSerp",value:function(){return this.props.response.results.isEmpty()?this.renderFreshSerpNoResults():this.renderFreshSerpContent()}},{key:"render",value:function(){return this.props.isAuthorHomePage?this.renderAHPSerp():this.renderSerp()}}]),t}();F.contextTypes={queryStore:A.default.instanceOf(w.default).isRequired,router:A.default.object.isRequired,uiOptionsStore:A.default.instanceOf(C.default).isRequired},F.propTypes={isAuthorHomePage:A.default.bool,isFiltering:A.default.bool,isCompact:A.default.bool.isRequired,query:A.default.object.isRequired,response:A.default.object.isRequired,layoutOptions:A.default.object.isRequired},t.default=F},635:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=f(r(634)),o=f(r(403)),i=f(r(244)),u=f(r(261)),l=f(r(1)),s=r(3),c=f(s);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state=n.stateFromQueryStore(),r.queryStore.registerComponent(n,function(){n.setState(n.stateFromQueryStore())}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.PureComponent),n(t,[{key:"stateFromQueryStore",value:function(){return{queryStoreState:this.context.queryStore._state,query:this.context.queryStore._query,response:this.context.queryStore._response,isCompact:this.context.queryStore.isDisplayCompactActive()}}},{key:"render",value:function(){var e=this.state,t=e.queryStoreState,r=e.query,n=e.response,i=e.isCompact;return t===u.default.LOADING?c.default.createElement("section",{className:"content",role:"main",id:"main-content"},c.default.createElement("div",{className:"container loading-controls flex-row-vcenter"},c.default.createElement(o.default,{seleniumSelector:"icon-loading-serp"})," Loading results")):c.default.createElement(a.default,{isAuthorHomePage:this.props.isAuthorHomePage,isCompact:i,query:r,response:n,layoutOptions:this.props.layoutOptions,isFiltering:t===u.default.FILTERING})}}]),t}();d.contextTypes={queryStore:l.default.instanceOf(i.default).isRequired},d.propTypes={isAuthorHomePage:l.default.bool,layoutOptions:l.default.object.isRequired},t.default=d},636:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=v(r(411)),o=v(r(406)),i=v(r(458)),u=v(r(635)),l=r(8),s=v(r(266)),c=v(r(239)),f=v(r(240)),d=v(r(238)),p=v(r(244)),h=v(r(261)),m=v(r(524)),y=r(248),g=v(r(1)),_=r(3),b=v(_);function v(e){return e&&e.__esModule?e:{default:e}}var E=(0,m.default)(d.default.Serp)(o.default),S=(0,m.default)(d.default.Serp)(u.default),O=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this,e,r].concat(o)));return u.state=u.stateFromQueryStore(),u.context.queryStore.registerComponent(u,function(){u.setState(u.stateFromQueryStore())}),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_.PureComponent),n(t,null,[{key:"willRouteTo",value:async function(e,t){var r=e.api,n=e.authStore;if(!(0,l.isBrowser)())return p.default.setQueryAndLoadingState(e,t);var a=await p.default.executeSearchQuery(e,t);if(!a.resultData)return a;var o=a.resultData.matchedEntity;return n.hasAuthenticatedUser()&&o?r.findAlertByQueryTypeAndValue(y.QUERY_TYPE.ENTITY_PAPER,o.id):a}},{key:"getPageTitle",value:function(e){return e.queryStore.getQueryString()+" - Semantic Scholar"}}]),n(t,[{key:"stateFromQueryStore",value:function(){return{isLoading:this.context.queryStore._state===h.default.LOADING}}},{key:"render",value:function(){var e=this.state.isLoading,t=new i.default;return b.default.createElement("div",{className:"search"},b.default.createElement(E,{showSearchBar:!0,submitSearchOnFieldOfStudyChange:!0}),b.default.createElement(S,{layoutOptions:t}),e?null:b.default.createElement(a.default,null))}}]),t}();O.contextTypes={alertsStore:g.default.instanceOf(s.default).isRequired,api:g.default.instanceOf(c.default).isRequired,authStore:g.default.instanceOf(f.default).isRequired,queryStore:g.default.instanceOf(p.default).isRequired},t.default=O},637:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=m(r(400)),o=m(r(402)),i=m(r(238)),u=r(549),l=m(r(31)),s=m(r(548)),c=m(r(65)),f=m(r(399)),d=m(r(1)),p=r(3),h=m(p);function m(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.PureComponent),n(t,[{key:"trackShareEvent",value:function(e){var t=o.default.create(i.default.SHARE,{socialType:e.id});(0,c.default)(t)}},{key:"onClickShareLink",value:function(e){this.trackShareEvent(e);var t=encodeURIComponent(window.location.href+"?utm_source="+e.id),r=encodeURIComponent(this.props.title),n=this.props.message?encodeURIComponent(this.props.message)+": "+t:t,a=void 0;switch(e){case s.default.EMAIL:a="mailto:?subject="+r+"&body="+n;break;case s.default.FACEBOOK:a=(0,u.getFacebookShareUrl)(t);break;case s.default.REDDIT:a=(0,u.getRedditShareUrl)(t,r);break;case s.default.TWITTER:a=(0,u.getTwitterShareUrl)(t,r)}e!==s.default.EMAIL?window.open(a,"_blank","left=100,top=100,width=800,height=500,toolbar=1,resizable=0"):window.location.href=a}},{key:"render",value:function(){var e=this,t=s.default.shareOptions().map(function(t,r){var n=(0,f.default)(t.id+" share-option flex-row-vcenter",e.props.linkClassName);return h.default.createElement("li",{className:n,onClick:e.onClickShareLink.bind(e,t),key:r},h.default.createElement(a.default,{icon:t.id,width:"25",height:"25"}),t.name)});return h.default.createElement("ul",null,t)}}]),t}();y.propTypes={className:d.default.string,linkClassName:d.default.string,message:d.default.string},y.contextTypes={dispatcher:d.default.instanceOf(l.default).isRequired},t.default=y},638:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=f(r(413)),o=f(r(637)),i=f(r(425)),u=f(r(399)),l=f(r(1)),s=r(3),c=f(s);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.PureComponent),n(t,[{key:"render",value:function(){var e=(0,u.default)("share-button button",this.props.className);return c.default.createElement(i.default,{tooltipContent:c.default.createElement(o.default,{message:this.props.message,title:this.props.title}),tooltipPosition:this.props.tooltipPosition,className:"share flex-row-vcenter",tooltipClassName:"share-tooltip"},c.default.createElement(a.default,{className:e,text:"Share",iconProps:{icon:"share",width:"15",height:"15"}}))}}]),t}();d.propTypes={title:l.default.string.isRequired,message:l.default.string,className:l.default.string,tooltipPosition:l.default.string},d.defaultProps={tooltipPosition:"bottom-left"},t.default=d},639:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=g(r(409)),o=g(r(408)),i=g(r(400)),u=g(r(638)),l=g(r(402)),s=g(r(238)),c=g(r(65)),f=r(237),d=g(r(254)),p=r(16),h=g(r(3)),m=g(r(571)),y=g(r(1));function g(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(n))));return o.onClickBackground=o.onClickBackground.bind(o),o.onClickClose=o.onClickClose.bind(o),o.onStartVideo=o.onStartVideo.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,h.default.PureComponent),n(t,[{key:"onClickBackground",value:function(e){e.stopPropagation();var t=e.target;t instanceof HTMLElement&&t.className.split(" ").find(function(e){return"pdp-video"===e})&&this.closeModal()}},{key:"onClickClose",value:function(e){e.stopPropagation(),this.closeModal()}},{key:"onStartVideo",value:function(){var e=this.getVideo();if(e){var t=e.uniqueId,r=e.url;(0,c.default)(l.default.create(s.default.PaperDetail.VIDEO_START,{uniqueId:t,url:r}))}}},{key:"closeModal",value:function(){var e=this.context,t=e.paperStore,r=e.router,n=t.getPaperDetail().paper,a=n.slug,o=n.id,i=(0,p.makePath)({routeName:"PAPER_DETAIL",params:{slug:a,paperId:o}});r.history.replace(i)}},{key:"getVideo",value:function(){var e=this.context.paperStore.getPaperDetail().featuredContent,t=this.props.match.params.uniqueId;return t&&e.find(function(e){return e.uniqueId===t})||null}},{key:"render",value:function(){var e=this.getVideo();if(!e)return null;var t=e.title,r=e.url,n=e.summary,l=e.channel,s=e.datePosted,c=(0,f.getString)(function(e){return e.paperDetail.featured.video.shareTitle},t);return h.default.createElement("div",{className:"pdp-video",onClick:this.onClickBackground},h.default.createElement("a",{className:"close-modal-link flex-row-vcenter",onClick:this.onClickClose},h.default.createElement("span",null,"Close"),h.default.createElement(i.default,{icon:"x",className:"flex-right",width:"30",height:"30"})),h.default.createElement("div",{className:"pdp-video__modal"},h.default.createElement(a.default,null,h.default.createElement(o.default,null,h.default.createElement("h4",{className:"pdp-video__title text--lg"},t),h.default.createElement("div",{className:"flex-row flex-center flex-space-between pdp-video__publish-info"},h.default.createElement("ul",null,l&&h.default.createElement("li",{className:"pdp-video__publish-info-item"},l),s&&h.default.createElement("li",{className:"pdp-video__publish-info-item"},s.format("MMM Do, YYYY"))),h.default.createElement(u.default,{title:c,className:"button--primary flex-right",tooltipPosition:"bottom-right"})))),h.default.createElement("div",{className:"pdp-video__video"},h.default.createElement(m.default,{controls:!0,url:r,height:480,width:800,onStart:this.onStartVideo})),h.default.createElement("div",{className:"pdp-video__summary"},n)))}}]),t}();_.contextTypes={paperStore:y.default.instanceOf(d.default).isRequired,router:y.default.object.isRequired},t.default=_},640:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(404)),a=i(r(1)),o=i(r(3));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.isMobile,r=function(e){return{containerStyles:e?"flex-row-hcenter":"container flex-row-vcenter",textStyles:e?"":"flex-right text--right"}}(t),a=r.containerStyles,i=r.textStyles;return o.default.createElement("footer",{className:"footer altmetric-footer"},o.default.createElement("div",{className:a},t?null:o.default.createElement("div",null),o.default.createElement("span",{className:i},"Blog posts, news articles and tweet counts and IDs sourced by ",o.default.createElement(n.default,{href:"https://www.altmetric.com/"},o.default.createElement("div",{className:"altmetric-icon"})," Altmetric.com"))))};u.propTypes={isMobile:a.default.bool},t.default=u},641:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=R(r(640)),i=R(r(411)),u=R(r(406)),l=R(r(420)),s=R(r(403)),c=R(r(562)),f=R(r(48)),d=R(r(240)),p=R(r(6)),h=R(r(30)),m=R(r(54)),y=R(r(298)),g=R(r(254)),_=r(16),b=R(_),v=R(r(286)),E=R(r(24)),S=R(r(423)),O=R(r(238)),P=r(468),w=r(466),C=r(248),N=R(r(428)),k=R(r(1)),A=R(r(3)),T=r(49);function R(e){return e&&e.__esModule?e:{default:e}}var j=(0,N.default)({displayName:"PaperDetailPage",mixins:[d.default.Mixin,g.default.Mixin],propTypes:{route:k.default.object.isRequired},statics:{willRouteTo:function(e,t){var r=e.authStore,o=e.paperStore,i=e.api,u=e.dispatcher,l=t.path,s=t.routes,c=t.query,d=t.params,h=d.paperId,g=d.slug,_=void 0===g?"":g,v=c&&c.tab?c.tab:y.default.ABSTRACT.path;if(!y.default.isValidPath(v))return new f.default({params:d,routeName:"PAPER_DETAIL",replace:!0,status:302});o.setActiveTabPath(v);var S=o.getPaperDetail(),O=h!==S.paper.id,P=S.citingPapers.yearFilter.get("min"),w=S.citingPapers.yearFilter.get("max"),N=S.citingPapers.citationIntent,k=S.getIn(["citedPapers","sort"]),A=S.citedPapers.requestedPageSize,T=(S.getIn(["citedPapers","pageNumber"])-1)*A,R=S.getIn(["citingPapers","sort"]),j=S.citingPapers.requestedPageSize,x=(S.getIn(["citingPapers","pageNumber"])-1)*j,F=c.year?[c.year[0]||null,c.year[1]||null]:[null,null],I=a(F,2),M=I[0],L=I[1],q=c.citationIntent||m.default.INTENTS.ALL_INTENTS.id,D=c.citingPapersSort||E.default.IS_INFLUENTIAL_CITATION.id,U=parseInt(c.citedPapersLimit)||m.default.CITATIONS_PAGE_SIZE,V=parseInt(c.citedPapersOffset)||0,B=c.citedPapersSort||E.default.IS_INFLUENTIAL_CITATION.id,H=parseInt(c.citingPapersLimit)||m.default.CITATIONS_PAGE_SIZE,Y=parseInt(c.citingPapersOffset)||0,Q=void 0;if(O)Q=i.fetchPaperDetail({paperId:h,slug:_,citingPapersSort:D,citingPapersLimit:H,citingPapersOffset:Y,citedPapersSort:B,citedPapersLimit:U,citedPapersOffset:V});else{if(M!=P||L!=w||q!=N?Q=i.fetchCitations({paperId:h,citationType:"citingPapers",sort:D,intent:q,offset:0,pageSize:m.default.CITATIONS_PAGE_SIZE,yearMin:M,yearMax:L}):Y===x&&j===H&&R===D||(Q=i.fetchCitations({paperId:h,citationType:"citingPapers",sort:D,intent:q,offset:Y,pageSize:H,yearMin:M,yearMax:L})),k!==B||A!==U||T!==V){var z=i.fetchCitations({paperId:h,citationType:"citedPapers",sort:B,intent:null,offset:V,pageSize:U});Q?Q.then(z):Q=z}Q||(Q=Promise.resolve(void 0))}var G=r.hasAuthenticatedUser()&&O?i.findAlertByQueryTypeAndValue(C.QUERY_TYPE.PAPER_CITATION,h):Promise.resolve();return u.dispatch({actionType:p.default.actions.UPDATE_FOCUSED_FIGURE_INDEX,figureIndex:d.figureIndex}),Promise.all([Q,G]).then(function(e){var t=e[0];if(t&&t.resultData&&t.resultData.canonicalId){var r=n({},d,{paperId:t.resultData.canonicalId,slug:t.resultData.canonicalSlug});return s?new f.default({query:c,routeName:s[s.length-1].name,params:r,replace:!0}):new f.default({path:l,query:c,params:r,replace:!0})}var a=s?s.filter(function(e){return"PAPER_DETAIL_FIGURE"===e.name}).length>0:l===b.default.PAPER_DETAIL_FIGURE,i=o.getPaperDetail();return a&&!i.figures.has(o.focusedFigureIndex)?Promise.reject({status:404}):e})},getPageTitle:function(e){var t=e.paperStore,r=t.getPaperDetail().paper,n=r.primaryPaperLink,a=r.title.text,o=!!n&&(0,w.isPdfUrl)(n.url)?"[PDF] "+a:a;return h.default.getString("paperDetail.pageTitle."+t.getActiveTab(),o)},getPageCitationMeta:function(e){return e.paperStore.getPaperDetail().citationMeta()},getPageMetaDescription:function(e){return e.paperStore.getPaperDetail().description()},getCanonicalUrl:function(e){return(0,_.makePath)({routeName:"PAPER_DETAIL",params:e.params})},getSchemaData:function(e,t){var r=t.paperStore.getPaperDetail(),n=[{path:"/paper",name:"Papers"},{path:e.url,name:r.paper.title.text}];return{breadCrumbs:v.default.breadcrumb(t.envInfo.hostname,n),linkedData:r.linkedData()}}},getInitialState:function(){return{paperDetail:this.getPaperStore().getPaperDetail(),loading:this.getPaperStore().isLoading()}},onPaperStoreChange:function(){this.setState({paperDetail:this.getPaperStore().getPaperDetail(),loading:this.getPaperStore().isLoading()})},render:function(){var e=this.state,t=e.paperDetail,r=e.loading,n=!t.paper.blogs.isEmpty();return A.default.createElement(l.default,{heapProps:{"page-type":P.PAGE_TYPE_PAPER_DETAIL,"page-paper-id":t.paper.id}},A.default.createElement("div",{className:"paper"},A.default.createElement(u.default,{showSearchBar:!0}),r?A.default.createElement("div",{className:"container"},A.default.createElement("div",{className:"loading-controls flex-row-vcenter",role:"main",id:"main-content"},A.default.createElement(s.default,null)," Loading")):A.default.createElement("div",null,A.default.createElement(c.default,{paperDetail:t}),(0,T.renderRoutes)(this.props.route.routes),A.default.createElement(S.default,{target:O.default.PaperDetail.SCROLL_LANDMARKS,section:"Footer"},n?A.default.createElement(o.default,null):null,A.default.createElement(i.default,{className:n?"with-altmetric-footer":""})))))}});t.default=j},642:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r(401)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),i=u(r(399));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent),n(t,[{key:"render",value:function(){var e=this.props,t=e.navItems,r=e.activeRouteName;return o.createElement("nav",{className:"moderation-nav"},o.createElement("ul",{className:"moderation-nav__list"},t.map(function(e,t){var n=e.routeName,u=e.params,l=e.label,s=e.itemCount,c=n===r;return o.createElement("li",{key:t,className:(0,i.default)({"moderation-nav__item":!0,"moderation-nav__is-active":c})},o.createElement(a.default,{to:n,params:u||{}},l),"number"==typeof s&&o.createElement("div",{className:"moderation-nav__item__count"},s))})))}}]),t}();t.default=l},643:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=y(r(406)),i=y(r(642)),u=y(r(282)),l=y(r(273)),s=y(r(48)),c=r(237),f=r(16),d=r(258),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),h=y(r(1)),m=r(49);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.state=n({},a.getStateFromAuthorshipModerationStore(),a.getStateFromAuthorClaimModerationStore()),a.context.authorshipModerationStore.registerComponent(a,function(){a.setState(a.getStateFromAuthorClaimModerationStore())}),a.context.claimModerationStore.registerComponent(a,function(){a.setState(a.getStateFromAuthorClaimModerationStore())}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.PureComponent),a(t,null,[{key:"getPageTitle",value:function(){return(0,c.getString)(function(e){return e.moderation.pageTitle})}},{key:"requiresAuthentication",value:function(){return!0}},{key:"willRouteTo",value:async function(e){return e.api.fetchModerationStats()}}]),a(t,[{key:"componentDidMount",value:function(){var e=this.props.history;if("MODERATION"===(0,f.getRouteNameForPath)(e.location.pathname)){var t=new s.default(n({},this.pickRedirectRoute(),{replace:!0,status:302}));(0,d.handleRedirect)({redirect:t,history:e})}}},{key:"getStateFromAuthorshipModerationStore",value:function(){return{numPendingAuthorshipCorrections:this.context.authorshipModerationStore.getPendingPaperAuthorCorrectionsCount()}}},{key:"getStateFromAuthorClaimModerationStore",value:function(){return{numPendingAuthorClaims:this.context.claimModerationStore.getPendingAuthorClaimCount()}}},{key:"getActiveRouteName",value:function(){var e,t=this.context.router,r=this.props.route,n=null!=(e=(0,m.matchRoutes)(r.routes,t.route.location.pathname))&&null!=(e=e[0])&&null!=(e=e.route)?e.path:e;return(0,f.getRouteNameForPath)(n)||"MODERATION"}},{key:"pickRedirectRoute",value:function(){return{routeName:"AUTHOR_CLAIM_MODERATION",params:{status:"pending"}}}},{key:"getNavItems",value:function(){var e=this.state,t=e.numPendingAuthorshipCorrections,r=e.numPendingAuthorClaims;return[{routeName:"AUTHOR_CLAIM_MODERATION",params:{status:"pending"},label:(0,c.getString)(function(e){return e.moderation.nav.authorClaimLabel}),itemCount:r},{routeName:"AUTHOR_AUTHORSHIP_MODERATION",params:{status:"pending"},label:(0,c.getString)(function(e){return e.moderation.nav.authorshipLabel}),itemCount:t}]}},{key:"render",value:function(){var e=this.props.route,t=this.getNavItems(),r=this.getActiveRouteName();return p.createElement("div",null,p.createElement(o.default,{showSearchBar:!0,isAdminPage:!0}),p.createElement("div",{className:"moderation",role:"main"},p.createElement("h2",{className:"moderation__header"},(0,c.getString)(function(e){return e.moderation.headerLabel})),p.createElement(i.default,{navItems:t,activeRouteName:r}),p.createElement("div",{className:"moderation__sub-page"},(0,m.renderRoutes)(e.routes))))}}]),t}();g.contextTypes={authorshipModerationStore:h.default.instanceOf(u.default).isRequired,claimModerationStore:h.default.instanceOf(l.default).isRequired,router:h.default.object.isRequired},t.default=g},644:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=E(r(409)),i=E(r(400)),u=E(r(239)),l=E(r(30)),s=E(r(238)),c=E(r(249)),f=E(r(416)),d=E(r(253)),p=E(r(251)),h=E(r(65)),m=r(243),y=r(46),g=r(245),_=(E(r(2)),E(r(1))),b=r(3),v=E(b);function E(e){return e&&e.__esModule?e:{default:e}}var S=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o)))),l=u.context.tagStore;return u.state=n({renameRequest:!1,renameTag:null},u.getStateFromTagStore()),l.registerComponent(u,function(){u.setState(u.getStateFromTagStore())}),u.deleteLibraryTag=u.deleteLibraryTag.bind(u),u.focus=u.focus.bind(u),u.handleRenameBegin=u.handleRenameBegin.bind(u),u.handleRenameChange=u.handleRenameChange.bind(u),u.handleRenameKeyDown=u.handleRenameKeyDown.bind(u),u.handleRenameSubmit=u.handleRenameSubmit.bind(u),u.openDeleteModal=u.openDeleteModal.bind(u),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,b.PureComponent),a(t,[{key:"getStateFromTagStore",value:function(){var e=this.context.tagStore,t=this.props.tag;return{paperCount:e.getPaperCount(t.id)}}},{key:"focus",value:function(){this.renameInput&&this.renameInput.focus()}},{key:"deleteLibraryTag",value:function(e){var t=this,r=this.context,n=r.api,a=r.messageStore,o=this.state.renameTag,i=s.default.Library.Tags,u=i.DELETE_SUCCESS,c=i.DELETE_FAILURE;n.deleteLibraryTag(e).then(function(){(0,h.default)(f.default.create(u,{tagId:e})),o&&o.id===e&&t.setState({renameTag:null})}).catch(function(){(0,h.default)(f.default.create(c,{tagId:e}));var t=l.default.getString("library.message.errorDeleteTag.header"),r=l.default.getString("library.message.errorDeleteTag.body");a.addError(r,t)})}},{key:"updateLibraryTag",value:function(e){var t=this,r=this.context,n=r.api,a=r.messageStore,o=r.tagStore,i=s.default.Library.Tags,u=i.RENAME_SUCCESS,c=i.RENAME_FAILURE;if(o.hasTagByName(e.name)){var d=l.default.getString("library.message.duplicateTag.header"),p=l.default.getString("library.message.duplicateTag.body",e.name);a.addWarning(p,d)}else this.setState({renameRequest:!0},function(){n.updateLibraryTag({id:e.id,newName:e.name}).then(function(){(0,h.default)(f.default.create(u,{tagId:e.id,tagName:e.name})),t.setState({renameRequest:!1,renameTag:null})}).catch(function(){(0,h.default)(f.default.create(c,{tagId:e.id,tagName:e.name})),t.setState({renameRequest:!1});var r=l.default.getString("library.message.errorRenameTag.header"),n=l.default.getString("library.message.errorRenameTag.body");a.addError(n,r)})})}},{key:"openDeleteModal",value:function(e){this.context.dispatcher.dispatch((0,m.showModal)({id:y.ModalId.DELETE_TAG,data:{deleteLibraryTag:this.deleteLibraryTag,tag:e}}))}},{key:"handleRenameBegin",value:function(e){this.setState({renameTag:e}),this.focus()}},{key:"handleRenameChange",value:function(e){var t=this.state.renameTag,r=(0,d.default)(t);this.setState({renameTag:r.set("name",e.currentTarget.value)})}},{key:"handleRenameKeyDown",value:function(e){13===e.keyCode?this.handleRenameSubmit():27===e.keyCode&&this.setState({renameTag:null})}},{key:"handleRenameSubmit",value:function(){var e=this.state,t=e.renameTag,r=e.renameRequest;if(t){var n=this.props.tags.get(t.id),a=t.name.replace(/\s+/g," ").trim();n.name===a?this.setState({renameTag:null}):""===a||r||this.updateLibraryTag(t)}}},{key:"renderRename",value:function(e){var t=this;return v.default.createElement("div",{className:"flex-row-centered library-tags-page__rename"},v.default.createElement("input",{className:"library-tags-page__rename-input",type:"text",ref:function(e){return t.renameInput=e},placeholder:"Rename Tag",value:e.name,onKeyDown:this.handleRenameKeyDown,onChange:this.handleRenameChange}),v.default.createElement("div",{className:"flex-row-centered library-tags-page__rename-update",onClick:this.handleRenameSubmit},"Update Name"))}},{key:"render",value:function(){var e=this,t=this.props.tag,r=this.state,n=r.paperCount,a=r.renameTag,u=a&&a.id===t.id;return v.default.createElement(o.default,{className:"library-tags-page__tag-row",layout:"row"},u?null:v.default.createElement("span",{className:"library-tags-page__tag"},t.name),v.default.createElement(o.default,{className:"flex-row-vcenter library-tags-page__tag-controls",layout:"row"},u?this.renderRename(a):v.default.createElement(b.Fragment,null,v.default.createElement("span",{className:"paper-count"},(n||"")+"\n                    "+(n&&1!==n?l.default.getString("library.tags.paperCountPlural"):n?l.default.getString("library.tags.paperCountSingle"):"")),v.default.createElement("div",{className:"rename-tag",onClick:function(){return e.handleRenameBegin(t)}},v.default.createElement(i.default,{icon:"pencil",width:"12",height:"12"}),v.default.createElement("span",null,"Rename"))),v.default.createElement("div",{className:"remove-tag",onClick:function(){return e.openDeleteModal(t)}},v.default.createElement(i.default,{icon:"small-x",width:"10",height:"10"}),v.default.createElement("span",null,"Remove"))))}}]),t}();S.contextTypes={api:_.default.instanceOf(u.default).isRequired,dispatcher:_.default.instanceOf(g.Dispatcher).isRequired,messageStore:_.default.instanceOf(c.default).isRequired,tagStore:_.default.instanceOf(p.default).isRequired},t.default=S},645:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=_(r(611)),i=_(r(403)),u=_(r(644)),l=r(405),s=_(r(239)),c=_(r(45)),f=_(r(249)),d=_(r(16)),p=(_(r(253)),_(r(251))),h=(_(r(2)),_(r(1))),m=r(3),y=_(m),g=r(267);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o)))),l=u.context.tagStore;return u.state=n({},u.getStateFromTagStore()),l.registerComponent(u,function(){u.setState(u.getStateFromTagStore())}),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.PureComponent),a(t,null,[{key:"willRouteTo",value:function(e){return e.api.getLibraryTagPaperCounts()}}]),a(t,[{key:"getStateFromTagStore",value:function(){var e=this.context.tagStore;return{isLoading:e.isLoading(),tags:e.getTags()}}},{key:"renderEmptyTagList",value:function(){return y.default.createElement("div",{className:"library-entries-page__empty-tag-list"},y.default.createElement("div",{className:"library-entries-page__header"},"You Haven't Created Any Tags Yet"),y.default.createElement("p",null,"Tags help you organize the papers you’ve saved to your library. Once created, you can add multiple tags to a single paper, and filter by those tags."))}},{key:"renderLoading",value:function(){return y.default.createElement("div",{className:"loading-controls"},y.default.createElement(i.default,null)," Loading")}},{key:"render",value:function(){var e=this.state,t=e.isLoading,r=e.tags;return y.default.createElement(l.FeatureGate,{feature:c.default.LibraryTags},y.default.createElement(l.FeatureEnabled,null,y.default.createElement("div",{className:"library-tags-page"},t?this.renderLoading():y.default.createElement(m.Fragment,null,r.isEmpty()?this.renderEmptyTagList():y.default.createElement("div",{className:"library-tags-page__header"},"Manage Tags"),y.default.createElement(o.default,null),r.toList().map(function(e){return y.default.createElement(u.default,{tag:e,tags:r,key:e.id})})))),y.default.createElement(l.FeatureDisabled,null,y.default.createElement(g.Redirect,{to:d.default.LIBRARY})))}}]),t}();b.contextTypes={api:h.default.instanceOf(s.default).isRequired,messageStore:h.default.instanceOf(f.default).isRequired,tagStore:h.default.instanceOf(p.default).isRequired},t.default=b},646:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MatchPropTypes=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1));t.MatchPropTypes={match:n.default.shape({params:n.default.object.isRequired,isExact:n.default.bool.isRequired,path:n.default.string.isRequired,url:n.default.string.isRequired}),location:n.default.shape({pathname:n.default.string.isRequired,search:n.default.string.isRequired,hash:n.default.string.isRequired,state:n.default.object}),history:n.default.shape({length:n.default.number.isRequired,action:n.default.string.isRequired,location:n.default.object.isRequired,search:n.default.string,hash:n.default.string,state:n.default.object,push:n.default.func.isRequired,replace:n.default.func.isRequired,go:n.default.func.isRequired,goBack:n.default.func.isRequired,goForward:n.default.func.isRequired,block:n.default.func.isRequired}),route:n.default.shape({component:n.default.func.isRequired,routes:n.default.arrayOf(n.default.object)})}},647:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=y(r(473)),i=y(r(400)),u=y(r(401)),l=r(237),s=r(16),c=y(s),f=(y(r(253)),y(r(251))),d=(y(r(2)),y(r(1))),p=r(3),h=y(p),m=r(267);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o)))),l=u.context.tagStore;return u.state=n({},u.getStateFromTagStore()),l.registerComponent(u,function(){u.setState(u.getStateFromTagStore())}),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.PureComponent),a(t,[{key:"getStateFromTagStore",value:function(){var e=this.context.tagStore;return{isLoading:e.isLoading(),tags:e.getTags()}}},{key:"render",value:function(){var e=h.default.createElement(p.Fragment,null,this.state.tags.toList().map(function(e){return h.default.createElement(u.default,{className:"tag__item",key:e.id,to:"LIBRARY_TAG",params:{tagName:encodeURIComponent(e.name)}},e.name)}),h.default.createElement(u.default,{className:"tag__manage",to:"LIBRARY_TAG_MANAGEMENT"},(0,l.getString)(function(e){return e.library.tags.manage}))),t=h.default.createElement("span",{className:"tag__label flex-justify-start flex-row-vcenter"},h.default.createElement(i.default,{icon:"tag-stack",width:"20",height:"20"}),h.default.createElement("span",null,"Tags")),r=this.props.location.pathname,n=new RegExp(c.default.LIBRARY_TAG.replace(/:\w+/,"*")),a=r.includes(c.default.LIBRARY_TAG_MANAGEMENT)||r.match(n);return h.default.createElement("div",{className:"library-sidebar__container"},h.default.createElement(m.NavLink,{activeClassName:"is-active",className:"tag__section",exact:!0,to:(0,s.makePath)({params:{},routeName:"LIBRARY"})},h.default.createElement("span",{className:"tag__label flex-justify-start flex-row-vcenter"},h.default.createElement(i.default,{icon:"fa-bookmark",width:"20",height:"20"}),h.default.createElement("span",null,"All Papers"))),h.default.createElement(o.default,{className:"tag__section "+(a?"is-active":""),collapsibleContent:e,ignoreHash:!0,initialCollapseState:!a,label:t,showToggleIcon:!0}))}}]),t}();g.contextTypes={tagStore:d.default.instanceOf(f.default).isRequired},t.default=g},648:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=g(r(411)),o=g(r(406)),i=g(r(409)),u=g(r(408)),l=g(r(647)),s=r(405),c=g(r(239)),f=g(r(45)),d=r(646),p=g(r(1)),h=r(3),m=g(h),y=r(49);function g(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,h.PureComponent),n(t,[{key:"render",value:function(){return m.default.createElement("div",{className:"library-page"},m.default.createElement(o.default,{showSearchBar:!0}),m.default.createElement("div",{className:"library-page__header bg-light-gray"},m.default.createElement("h1",{className:"centered-max-width-content"},"My Library")),m.default.createElement(i.default,{className:"library-page__container centered-max-width-content",layout:"row",position:"relative"},m.default.createElement(s.FeatureGate,{feature:f.default.LibraryTags},m.default.createElement(s.FeatureEnabled,null,m.default.createElement(l.default,{location:this.context.router.route.location}))),m.default.createElement(u.default,null,(0,y.renderRoutes)(this.props.route.routes))),m.default.createElement(a.default,null))}}],[{key:"willRouteTo",value:function(e){var t=e.tagStore,r=e.api;return t.isUninitialized()?r.getLibraryTags():Promise.resolve()}},{key:"requiresAuthentication",value:function(){return!0}},{key:"getPageTitle",value:function(){return"My Library - Semantic Scholar"}}]),t}();_.contextTypes={api:p.default.instanceOf(c.default).isRequired,router:p.default.object.isRequired},_.propTypes=d.MatchPropTypes,t.default=_},649:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LibrarySelectOption=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=c(r(448)),o=c(r(609)),i=r(264),u=c(r(1)),l=r(3),s=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=t.LibrarySelectOption=function(e){function t(){var e;f(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.handleOptionClick=o.handleOptionClick.bind(o),o}return p(t,l.Component),n(t,[{key:"handleOptionClick",value:function(){var e=this.props;(0,e.onClick)(e.selectType)}},{key:"render",value:function(){var e=this.props.selectType;return s.default.createElement("li",{className:"library-entries-page__select-option",onClick:this.handleOptionClick},i.LibrarySelect.toDisplayText(e))}}]),t}();h.propTypes={onClick:u.default.func.isRequired,selectType:u.default.string.isRequired};var m=function(e){function t(){var e;f(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.state={expanded:!1},o.toggleExpandState=o.toggleExpandState.bind(o),o.handleOptionClick=o.handleOptionClick.bind(o),o}return p(t,l.PureComponent),n(t,[{key:"toggleExpandState",value:function(){this.setState(function(e){return{expanded:!e.expanded}})}},{key:"handleOptionClick",value:function(e){this.props.onSelect(e),this.toggleExpandState()}},{key:"render",value:function(){var e=this,t=this.state.expanded,r=this.props,n=r.indeterminate,u=r.onCheckboxClick,l=r.checked,c=t?a.default.Direction.UP:a.default.Direction.DOWN;return s.default.createElement("div",{className:"library-entries-page__select-container"},s.default.createElement("div",{className:"flex-row-centered"},s.default.createElement(o.default,{ariaLabel:"library-entry-select",checked:l,onChange:u,indeterminate:n}),s.default.createElement(a.default,{className:"flex-static",onClick:this.toggleExpandState,direction:c,width:"14",height:"14"}),t?s.default.createElement("ul",{className:"library-entries-page__select-options"},i.LibrarySelect.displayable().map(function(t){return s.default.createElement(h,{key:t,onClick:e.handleOptionClick,selectType:t})})):null))}}]),t}();m.propTypes={indeterminate:u.default.bool.isRequired,onCheckboxClick:u.default.func.isRequired,onSelect:u.default.func.isRequired,checked:u.default.bool.isRequired},t.default=m},650:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=v(r(400)),i=v(r(409)),u=v(r(522)),l=r(405),s=v(r(401)),c=r(46),f=r(243),d=v(r(30)),p=v(r(45)),h=(v(r(280)),v(r(253)),v(r(251))),m=r(245),y=v(r(2)),g=v(r(1)),_=r(3),b=v(_);function v(e){return e&&e.__esModule?e:{default:e}}var E=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o)))),l=u.context.tagStore;return u.state=n({},u.getStateFromTagStore()),l.registerComponent(u,function(){u.setState(u.getStateFromTagStore())}),u.handleEdit=u.handleEdit.bind(u),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_.PureComponent),a(t,[{key:"getStateFromTagStore",value:function(){return{tags:this.context.tagStore.getTags()}}},{key:"handleEdit",value:function(){var e=this.props.entry;this.context.dispatcher.dispatch((0,f.showModal)({id:c.ModalId.EDIT_TAGS,data:{entryIds:y.default.List([e.id])}}))}},{key:"render",value:function(){var e=this.props,t=e.onDelete,r=e.onChange,n=e.entry,a=e.isSelected,c=this.state.tags,f=n.tagIds.map(function(e){return c.get(e)}).sortBy(function(e){return e.name});return b.default.createElement("li",{className:"library-entry__container"},b.default.createElement(i.default,{layout:"row"},b.default.createElement("div",{className:"library-entry__select"},b.default.createElement("input",{type:"checkbox",onChange:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){r(n.id)}),checked:a,"aria-label":n.paper.title})),b.default.createElement(i.default,{layout:"column"},b.default.createElement(u.default,{paper:n.paper,displayAbstract:!0}),b.default.createElement(l.FeatureGate,{feature:p.default.LibraryTags},b.default.createElement(l.FeatureEnabled,null,b.default.createElement(i.default,{layout:"row",wrap:!0},f.map(function(e){return b.default.createElement(s.default,{className:"library-entry__tag",key:e.id,to:"LIBRARY_TAG",params:{tagName:encodeURIComponent(e.name)}},e.name)}),b.default.createElement("a",{className:"library-entry__tag tag__outlined add-edit-tag",onClick:this.handleEdit},n.tagIds.isEmpty()?d.default.getString("library.addTags"):d.default.getString("library.editTags")))))),b.default.createElement(o.default,{className:"remove-icon",icon:"library-entry-remove",width:"14",height:"14",onClick:function(){t(n.id)}})))}}]),t}();E.contextTypes={dispatcher:g.default.instanceOf(m.Dispatcher).isRequired,tagStore:g.default.instanceOf(h.default).isRequired},t.default=E},651:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=C(r(400)),i=C(r(413)),u=C(r(650)),l=C(r(649)),s=C(r(401)),c=C(r(403)),f=C(r(433)),d=r(405),p=r(243),h=r(46),m=r(237),y=r(264),g=C(r(45)),_=r(18),b=C(r(7)),v=C(r(252)),E=(C(r(253)),r(245)),S=C(r(2)),O=C(r(1)),P=r(3),w=C(P);function C(e){return e&&e.__esModule?e:{default:e}}var N={checkboxChecked:!1,selectedEntryIds:S.default.Set()},k=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o)))),l=u.props.currentQuery;return u.state=n({queryValue:l.q,selectedSort:y.LibrarySort.RECENCY},N),u.handleCheckboxClick=u.handleCheckboxClick.bind(u),u.handleClearSearch=u.handleClearSearch.bind(u),u.handleDeleteEntry=u.handleDeleteEntry.bind(u),u.handleDeleteSelectedEntries=u.handleDeleteSelectedEntries.bind(u),u.handleEntryCheckboxClick=u.handleEntryCheckboxClick.bind(u),u.handleFilterSubmit=u.handleFilterSubmit.bind(u),u.handleFilterTextChange=u.handleFilterTextChange.bind(u),u.handleKeyDown=u.handleKeyDown.bind(u),u.handleSelectClick=u.handleSelectClick.bind(u),u.handleSortChange=u.handleSortChange.bind(u),u.openEditTagsModal=u.openEditTagsModal.bind(u),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,P.PureComponent),a(t,[{key:"openEditTagsModal",value:function(){var e=this.props.entries,t=this.state.selectedEntryIds;this.context.dispatcher.dispatch((0,p.showModal)({id:h.ModalId.EDIT_TAGS,data:{entryIds:e.filter(function(e){return t.includes(e.id)}).map(function(e){return e.id})}}))}},{key:"someEntriesSelected",value:function(){var e=this.props.entries,t=this.state.selectedEntryIds;return!t.isEmpty()&&t.size<e.size}},{key:"handleKeyDown",value:function(e){13===e.keyCode&&this.handleFilterSubmit()}},{key:"handleFilterSubmit",value:function(){var e=this,t=this.props,r=t.fetchEntriesForQuery,n=t.tag,a=this.state,o=a.queryValue,i=a.selectedSort;r((0,y.LibraryEntriesQuery)({q:o,sort:i,tag:n?n.id:null}),!1,function(){return e.setState(N)})}},{key:"handleFilterTextChange",value:function(e){this.setState({queryValue:e.target.value})}},{key:"handleSortChange",value:function(e){this.setState({selectedSort:e.target.value},this.handleFilterSubmit)}},{key:"handleClearSearch",value:function(){this.setState({queryValue:""},this.handleFilterSubmit)}},{key:"handleCheckboxClick",value:function(){var e=this.props.entries;this.setState(function(t){var r=t.checkboxChecked;return{checkboxChecked:!r,selectedEntryIds:r?S.default.Set():S.default.Set(e.map(function(e){return e.id}))}})}},{key:"handleSelectClick",value:function(e){var t=this.props.entries;switch(e){case y.LibrarySelect.ALL:this.setState({selectedEntryIds:S.default.Set(t.map(function(e){return e.id})),checkboxChecked:!0});break;case y.LibrarySelect.NONE:this.setState({selectedEntryIds:S.default.Set(),checkboxChecked:!1});break;default:b.default.error("Selected a select type that does not exist in LibrarySelect. This is likely a programming error.")}}},{key:"handleEntryCheckboxClick",value:function(e){this.setState(function(t){var r=t.selectedEntryIds;return{selectedEntryIds:r.has(e)?r.delete(e):r.add(e)}})}},{key:"handleDeleteEntry",value:function(e){this.props.deleteEntries(S.default.Set.of(e))}},{key:"handleDeleteSelectedEntries",value:function(){this.props.deleteEntries(this.state.selectedEntryIds)}},{key:"renderEntries",value:function(){var e=this,t=this.props,r=t.currentQuery,n=t.totalPages,a=t.entries,o=this.state.selectedEntryIds;return w.default.createElement("div",{className:"library-entry-list__container"},w.default.createElement("ul",{className:"library-entry-list__entries"},a.map(function(t){return w.default.createElement(u.default,{key:t.id,entry:t,onDelete:function(){return e.handleDeleteEntry(t.id)},onChange:e.handleEntryCheckboxClick,isSelected:o.has(t.id)})})),n>1?w.default.createElement(f.default,{loadPage:this.props.loadPage,pageNumber:r.page,totalPages:n}):null)}},{key:"renderLoading",value:function(){return w.default.createElement("div",{className:"loading-controls"},w.default.createElement(c.default,null)," Loading")}},{key:"render",value:function(){var e=this.props,t=e.isLoading,r=e.totalHits,n=e.tag,a=e.currentQuery,u=e.entries,c=this.state,f=c.checkboxChecked,p=c.queryValue,h=c.selectedEntryIds,b=c.selectedSort,E=a||{page:null,pageSize:null},S=E.page,O=E.pageSize,C=w.default.createElement("span",null,'No results in your library for "',a.q,'". Search Semantic Scholar for ',w.default.createElement(s.default,v.default.routeForQuery(a.q),'"',a.q,'"'),"?"),N=u.isEmpty()?C:null!==S&&null!==O&&null!==r?(0,m.getString)(function(e){return e.library.count},(0,_.formatPaginationText)({page:S,pageSize:O,totalHits:r}),r):" ";return w.default.createElement(P.Fragment,null,w.default.createElement(d.FeatureGate,{feature:g.default.LibraryTags},w.default.createElement(d.FeatureEnabled,null,w.default.createElement("div",{className:"library-entries-page__header"},n?'Papers tagged with "'+decodeURIComponent(n.name)+'"':"All Papers"))),w.default.createElement("div",{className:"flex-row-centered library-entries-page__filter-container"},w.default.createElement("div",{className:"flex-row-centered library-entries-page__filter"},w.default.createElement("input",{className:"library-entries-page__filter-input",type:"text",placeholder:"Filter Papers",value:p,onKeyDown:this.handleKeyDown,onChange:this.handleFilterTextChange}),p?w.default.createElement("div",{className:"clear-icon",onClick:this.handleClearSearch},w.default.createElement(o.default,{width:"16",height:"16",icon:"clear-input"})):null,w.default.createElement("div",{className:"flex-row-centered library-entries-page__filter-icon",onClick:this.handleFilterSubmit},w.default.createElement(o.default,{icon:"filter",width:"30",height:"30"}))),w.default.createElement("div",{className:"library-entries-page__sort flex-row-centered"},w.default.createElement("span",{className:"library-entries-page__sort-text"},"Sort By"),w.default.createElement("div",{className:"select--no-styles library-entries-page__sort-options"},w.default.createElement("select",{value:b,onChange:this.handleSortChange},y.LibrarySort.all().map(function(e){return w.default.createElement("option",{key:e,value:e},y.LibrarySort.toDisplayText(e))}))))),w.default.createElement("div",{className:"flex-row-vcenter library-entries-page__actions-container"},w.default.createElement(l.default,{onSelect:this.handleSelectClick,onCheckboxClick:this.handleCheckboxClick,checked:f,indeterminate:this.someEntriesSelected()}),w.default.createElement("div",{className:"library-entries-page__actions-buttons"},w.default.createElement(d.FeatureGate,{feature:g.default.LibraryTags},w.default.createElement(d.FeatureEnabled,null,w.default.createElement(i.default,{className:"library-entries-page__edit-tags",disabled:h.isEmpty(),iconProps:{icon:"tag",width:"10",height:"10"},text:(0,m.getString)(function(e){return e.library.editTags}),onClick:this.openEditTagsModal}))),w.default.createElement(i.default,{className:"library-entries-page__delete-entries",disabled:h.isEmpty(),iconProps:{icon:"library-entry-remove",width:"10",height:"10"},text:(0,m.getString)(function(e){return e.library.delete}),onClick:this.handleDeleteSelectedEntries}))),w.default.createElement("p",{className:"library-entries-page__result-count"},N),t?this.renderLoading():this.renderEntries())}}]),t}();k.contextTypes={dispatcher:O.default.instanceOf(E.Dispatcher).isRequired},t.default=k},652:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=E(r(651)),i=E(r(401)),u=E(r(403)),l=E(r(239)),s=E(r(47)),c=E(r(269)),f=E(r(249)),d=E(r(251)),p=E(r(30)),h=r(264),m=r(16),y=E(r(1)),g=r(3),_=E(g),b=r(257),v=r(267);function E(e){return e&&e.__esModule?e:{default:e}}var S=Object.freeze({error:null}),O=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));i.state=n({currentQuery:(0,h.LibraryEntriesQuery)(),currentTag:null,selectedSort:h.LibrarySort.RECENCY},i.getStateFromStores(),S,{isLoading:!0});var u=i.context,l=u.entryStore,s=u.tagStore;return l.registerComponent(i,function(){i.setState(i.getStateFromStores())}),s.registerComponent(i,function(){if(!s.isLoading()){var e=s.getTagFromName(s.currentTagName),t=e?e.id:null,r=t!==(i.state.currentQuery?i.state.currentQuery.tag:null),n={currentTag:s.getTagFromName(s.currentTagName),isLoading:!!r||i.state.isLoading};i.setState(n,function(){setTimeout(function(){i.fetchEntriesForQuery((0,h.LibraryEntriesQuery)({tag:t}))},0)})}}),i.fetchEntriesForQuery=i.fetchEntriesForQuery.bind(i),i.deleteEntries=i.deleteEntries.bind(i),i.loadPage=i.loadPage.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,g.PureComponent),a(t,null,[{key:"willRouteTo",value:function(e,t){var r=e.tagStore,n=t.params.tagName;return r.setCurrentTagName(n),Promise.resolve()}}]),a(t,[{key:"getStateFromStores",value:function(){var e=this.context,t=e.entryStore,r=e.tagStore;return{entries:t.getEntries().valueSeq().toList(),isInitialLoading:t.isUninitialized()||r.isUninitialized(),isLoading:t.isLoading()||r.isLoading(),totalHits:t.getTotalHits(),totalPages:t.getTotalPages()}}},{key:"fetchEntriesForQuery",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e.equals(this.state.currentQuery)&&!r||(this.setState(n({currentQuery:e},S),function(){t.context.api.getLibraryEntries(e).catch(function(e){t.setState({error:e})})}),a())}},{key:"loadPage",value:function(e){var t=this.state.currentQuery;e!==t.page&&(s.default.scrollTop(0),this.fetchEntriesForQuery(t.update("page",function(){return e})))}},{key:"deleteEntries",value:function(e){var t=this;e.isEmpty()||this.context.api.deleteLibraryEntries(e).then(function(){var e=t.state,r=e.currentQuery,n=e.entries,a=r.update("page",function(e){return 0===n.size&&e>1?e-1:e});t.fetchEntriesForQuery(a,!0)}).catch(function(){var e=p.default.getString("library.message.delete_error.header"),r=p.default.getString("library.message.delete_error.body"),n=_.default.createElement(i.default,{to:"LIBRARY",className:"library-link button button--secondary",onClick:function(){t.context.messageStore.clearMessages()}},"View Your Library");t.context.messageStore.addError(r,e,n)})}},{key:"renderEmptyListInstructions",value:function(){return _.default.createElement("div",{className:"library-entries-page__empty-library"},_.default.createElement("div",{className:"library-entries-page__header"},"Welcome to Your Semantic Scholar Library"),_.default.createElement("p",null,"Save and organize papers of interest to you. To get started, save a paper via the bookmark icon on a paper or search results page. Then, you can organize your library via tags."),_.default.createElement("img",{src:"/img/empty_library.png",srcSet:"/img/empty_library_2x.png 2x",alt:"empty library graphic"}))}},{key:"renderEmptyTagInstructions",value:function(){var e=this.state.currentTag;return _.default.createElement("div",{className:"library-entries-page__empty-library"},_.default.createElement("div",{className:"library-entries-page__header"},'No Papers Tagged with "',e.name,'" Yet'),_.default.createElement("p",null,"To get started, add this tag to papers via the ",_.default.createElement(v.NavLink,{exact:!0,to:(0,m.makePath)({params:{},routeName:"LIBRARY"})},"All Papers")," page."),_.default.createElement("img",{src:"/img/empty_tag.png",srcSet:"/img/empty_tag_2x.png 2x",alt:"no tagged entries graphic"}))}},{key:"renderLoading",value:function(){return _.default.createElement("div",{className:"loading-controls"},_.default.createElement(u.default,null)," Loading")}},{key:"render",value:function(){var e=this.state,t=e.currentQuery,r=e.currentTag,n=e.entries,a=e.isInitialLoading,i=e.isLoading,u=e.totalHits,l=e.totalPages,s=this.context.tagStore,c=n.isEmpty()&&!r,f=n.isEmpty()&&r;return s.isLoading()||!s.currentTagName||s.getTagFromName(s.currentTagName)?a||i?_.default.createElement("div",{className:"library-entries-page",role:"main",id:"main-content"},this.renderLoading()):c&&""===t.q?_.default.createElement("div",{className:"library-entries-page",role:"main",id:"main-content"},this.renderEmptyListInstructions()):f?_.default.createElement("div",{className:"library-entries-page",role:"main",id:"main-content"},this.renderEmptyTagInstructions()):_.default.createElement("div",{className:"library-entries-page",role:"main",id:"main-content"},_.default.createElement(o.default,{currentQuery:t,deleteEntries:this.deleteEntries,entries:n,fetchEntriesForQuery:this.fetchEntriesForQuery,isLoading:i,loadPage:this.loadPage,tag:r,totalHits:u,totalPages:l})):_.default.createElement(b.Redirect,{to:"/me/library"})}}]),t}();O.contextTypes={api:y.default.instanceOf(l.default).isRequired,entryStore:y.default.instanceOf(c.default).isRequired,messageStore:y.default.instanceOf(f.default).isRequired,router:y.default.object.isRequired,tagStore:y.default.instanceOf(d.default).isRequired},t.default=O},653:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=p(r(406)),o=p(r(578)),i=p(r(470)),u=p(r(474)),l=p(r(575)),s=r(3),c=p(s),f=p(r(1)),d=r(2);function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.PureComponent),n(t,[{key:"render",value:function(){return c.default.createElement(i.default,{className:"hero"},c.default.createElement(a.default,{sticky:!1,showSearchBar:!1}),c.default.createElement("div",{className:"bg-left"}),c.default.createElement("div",{className:"hero-content",role:"main",id:"main-content"},c.default.createElement("div",{className:"container"},c.default.createElement("h1",null,"Cut through the clutter"),c.default.createElement("h2",null,"Find peer-reviewed research from the world's most trusted sources"),c.default.createElement(u.default,{autoFocus:!0}),c.default.createElement(l.default,{queries:this.props.sampleQueries})),c.default.createElement(o.default,null)),c.default.createElement("div",{className:"bg-right"}))}}]),t}();h.propTypes={sampleQueries:f.default.instanceOf(d.List).isRequired},t.default=h},654:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=C(r(239)),i=C(r(411)),u=C(r(579)),l=C(r(420)),s=C(r(577)),c=C(r(576)),f=C(r(574)),d=C(r(653)),p=C(r(572)),h=C(r(564)),m=r(412),y=r(46),g=r(20),_=r(243),b=r(468),v=C(r(240)),E=C(r(31)),S=C(r(276)),O=C(r(1)),P=r(3),w=C(P);function C(e){return e&&e.__esModule?e:{default:e}}var N=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return i.state=n({},i.getStateFromSampleQueriesStore()),i.context.sampleQueriesStore.registerComponent(i,function(){i.setState(i.getStateFromSampleQueriesStore())}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,P.PureComponent),a(t,null,[{key:"getPageTitle",value:function(){return"Semantic Scholar - An academic search engine for scientific articles"}},{key:"getCanonicalUrl",value:function(){return"/"}},{key:"willRouteTo",value:function(e){if(e.queryStore.reset(),e.sampleQueriesStore.sampleQueries.isEmpty())return e.api.fetchSampleQueries()}}]),a(t,[{key:"componentDidMount",value:function(){var e,t=this.context.router;(0,g.searchStringToObj)((null!=(e=t)&&null!=(e=e.route)&&null!=(e=e.location)?e.search:e)||"").signIn&&!this.context.authStore.hasAuthenticatedUser()&&this.context.dispatcher.dispatch((0,_.showModal)({id:y.ModalId.SIGNUP,location:m.LOGIN_LOCATION.navBar}))}},{key:"getStateFromSampleQueriesStore",value:function(){return{sampleQueries:this.context.sampleQueriesStore.sampleQueries}}},{key:"render",value:function(){var e=this.state.sampleQueries;return w.default.createElement(l.default,{heapProps:{"page-type":b.PAGE_TYPE_HOME,"relevance-bucket":"featured"}},w.default.createElement("div",{className:"home-page"},w.default.createElement(d.default,{sampleQueries:e}),w.default.createElement(p.default,null),w.default.createElement(u.default,null),w.default.createElement(s.default,null),w.default.createElement(c.default,null),w.default.createElement(h.default,null),w.default.createElement(f.default,null),w.default.createElement(i.default,null)))}}]),t}();N.contextTypes={api:O.default.instanceOf(o.default).isRequired,authStore:O.default.instanceOf(v.default).isRequired,dispatcher:O.default.instanceOf(E.default).isRequired,router:O.default.object.isRequired,sampleQueriesStore:O.default.instanceOf(S.default).isRequired},t.default=N},655:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=f(r(402)),o=f(r(238)),i=f(r(65)),u=f(r(399)),l=f(r(1)),s=r(3),c=f(s);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.trackNavClick=o.trackNavClick.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.PureComponent),n(t,null,[{key:"propTypes",value:function(){return{name:l.default.string.isRequired,href:c.default.Proptypes.string.isRequired,isActive:l.default.bool}}}]),n(t,[{key:"trackNavClick",value:function(){(0,i.default)(a.default.create(o.default.STICKY_NAV,{section:this.props.name}))}},{key:"render",value:function(){var e="#"+this.props.href,t=(0,u.default)("sticky-nav__item",{"is-active":this.props.isActive});return c.default.createElement("li",{className:t},c.default.createElement("a",{className:"sticky-nav__item__link flex-row-vcenter",href:e,onClick:this.trackNavClick},this.props.name))}}]),t}();t.default=d},656:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=s(r(47)),i=s(r(1)),u=r(3),l=s(u);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.state={stuck:!1},o.onScroll=o.onScroll.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.PureComponent),a(t,[{key:"onScroll",value:function(){this.setState({stuck:o.default.scrollTop()>this._breakpoint})}},{key:"componentDidMount",value:function(){this._breakpoint=o.default.offsetFromBody(this.refs.container)-this.props.offset,o.default.listenForScroll(this.onScroll)}},{key:"componentWillUnmount",value:function(){o.default.stopListeningForScroll(this.onScroll)}},{key:"render",value:function(){var e=this.props.className||"";this.state.stuck&&(e+=" is-stuck");var t=this.state.stuck?{position:"fixed",top:this.props.offset||0}:null;return l.default.createElement("div",n({},this.props,{className:e,ref:"container",style:t}),this.props.children)}}]),t}();c.propTypes={offset:i.default.number,className:i.default.string,children:i.default.any},t.default=c},657:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=c(r(656)),o=c(r(655)),i=c(r(399)),u=c(r(1)),l=r(3),s=c(l);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.PureComponent),n(t,[{key:"render",value:function(){var e=this,t=(0,i.default)("sticky-nav",this.props.className),r=this.props.navSections.map(function(t,r){var n="sticky-nav-"+r;return s.default.createElement(o.default,{key:n,name:t.get("name"),href:t.get("id"),isActive:t.get("id")===e.props.activeNavId})});return s.default.createElement(a.default,{offset:70},s.default.createElement("nav",{className:t},s.default.createElement("ul",null,r)))}}],[{key:"propTypes",value:function(){return{activeNavId:u.default.string.isRequired,navSections:u.default.object.isRequired,className:u.default.string}}}]),t}();t.default=f},658:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(r(47)),o=r(18),i=s(r(1)),u=r(3),l=s(u);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.state={top:0,bottom:0},o.onScroll=o.onScroll.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.PureComponent),n(t,[{key:"onScroll",value:function(){this.setOffsets(this.getIsActive)}},{key:"getIsActive",value:function(){var e=document.documentElement.scrollHeight-window.innerHeight,t=a.default.scrollTop(),r=this.props.verticalOffsetPx?t+this.props.verticalOffsetPx:t,n=this.state,o=n.top,i=n.bottom;(r>=o&&r<=i||r>=e)&&this.props.onActive&&this.props.onActive()}},{key:"setOffsets",value:function(e){var t=a.default.offsetFromBody(this.refs.container);this.setState({top:t,bottom:t+this.refs.container.scrollHeight},e)}},{key:"componentDidMount",value:function(){this.setOffsets(this.getIsActive),a.default.listenForScroll(this.onScroll)}},{key:"componentWillUnmount",value:function(){a.default.stopListeningForScroll(this.onScroll)}},{key:"render",value:function(){return l.default.createElement("div",{ref:"container"},this.props.children)}}]),t}();c.propTypes={onActive:i.default.func,verticalOffsetPx:i.default.number,children:(0,o.somePropType)(i.default.element,i.default.arrayOf(i.default.element))},t.default=c},659:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=v(r(406)),o=v(r(411)),i=v(r(481)),u=v(r(580)),l=v(r(582)),s=v(r(581)),c=v(r(480)),f=v(r(658)),d=v(r(477)),p=v(r(657)),h=v(r(30)),m=v(r(238)),y=v(r(555)),g=v(r(65)),_=v(r(2)),b=v(r(3));function v(e){return e&&e.__esModule?e:{default:e}}var E=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.state={activeNavId:"about",viewedSections:_.default.Set().add("about")},o.onActiveNavClick=o.onActiveNavClick.bind(o),o.onChangeActiveNav=o.onChangeActiveNav.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),n(t,null,[{key:"getPageTitle",value:function(){return h.default.getString("faq.title")+" - "+h.default.getString("general.appName")}}]),n(t,[{key:"onChangeActiveNav",value:function(e){this.state.activeNavId!==e&&(this.state.viewedSections.has(e)?this.setState({activeNavId:e}):(this.setState({activeNavId:e,viewedSections:this.state.viewedSections.add(e)}),(0,g.default)(y.default.create(m.default.STICKY_NAV,{section:e}))))}},{key:"onActiveNavClick",value:function(e){this.setState({activeNavId:e})}},{key:"render",value:function(){var e=this,t=h.default.getValuesAsArray("faq.sections"),r=t.map(function(t){var r=t.get("name");return b.default.createElement(f.default,{key:r,onActive:function(){e.onChangeActiveNav(t.get("id"))},verticalOffsetPx:80},b.default.createElement(s.default,{title:r,id:t.get("id"),questions:t.get("questions"),verticalOffsetPx:80}))});return b.default.createElement("div",{className:"faq-page"},b.default.createElement(a.default,{showSearchBar:!0}),b.default.createElement("section",{className:"content",role:"main",id:"main-content"},b.default.createElement("div",{className:"container"},b.default.createElement(l.default,{title:h.default.getString("faq.title")}),b.default.createElement(i.default,null,b.default.createElement(d.default,{side:"left"},b.default.createElement(p.default,{activeNavId:this.state.activeNavId,navSections:t,className:"sticky-nav--left",onClick:this.onActiveNavClick})),b.default.createElement(c.default,{className:"faq-content"},r)))),b.default.createElement(o.default,null))}}]),t}();t.default=E},661:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=m(r(400)),o=m(r(430)),i=m(r(239)),u=m(r(240)),l=m(r(30)),s=m(r(249)),c=m(r(399)),f=m(r(1)),d=r(3),p=m(d),h=m(r(660));function m(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.getStateFromAuthStore=o.getStateFromAuthStore.bind(o),o.onEmailChange=o.onEmailChange.bind(o),o.reVerify=o.reVerify.bind(o),o.onSubmit=o.onSubmit.bind(o),o.shouldShowVerifyEmailButton=o.shouldShowVerifyEmailButton.bind(o),o.shouldShowUpdateEmailButton=o.shouldShowUpdateEmailButton.bind(o),o.state=o.getStateFromAuthStore(),o.context.authStore.registerComponent(o,function(){o.setState(o.getStateFromAuthStore)}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.PureComponent),n(t,[{key:"getStateFromAuthStore",value:function(){var e=this.context.authStore,t=e.getAlertEmail();return{displayEmail:t,savedEmail:t,hasVerifiedAlertEmail:e.hasVerifiedAlertEmail(),isValidEmail:h.default.validate(t)}}},{key:"onEmailChange",value:function(e){var t=e.trim();this.setState({displayEmail:t,isValidEmail:h.default.validate(t)})}},{key:"reVerify",value:function(){var e=this.context,t=e.api,r=e.messageStore,n=l.default.getString("alerts.email.verifySuccess",this.state.savedEmail);t.resendVerificationEmail().then(function(){return r.addSuccess(n)}).catch(function(){return r.addError(l.default.getString("error.general-error"))})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.context,r=t.api,n=t.messageStore,a=this.state,o=a.displayEmail,i=a.savedEmail;o!==i&&r.updateUser({alertEmail:o}).then(function(){return n.addSuccess(l.default.getString("alerts.email.updateSuccess",o))}).catch(function(){return n.addError(l.default.getString("error.general-error"))})}},{key:"shouldShowVerifyEmailButton",value:function(){var e=this.state,t=e.hasVerifiedAlertEmail,r=e.savedEmail,n=e.displayEmail;return!t&&r&&n===r}},{key:"shouldShowUpdateEmailButton",value:function(){var e=this.state,t=e.hasVerifiedAlertEmail,r=e.savedEmail,n=e.displayEmail;return""!==r&&r!==n||r===n&&t}},{key:"render",value:function(){var e=this.state,t=e.displayEmail,r=e.savedEmail,n=e.hasVerifiedAlertEmail,i=e.isValidEmail,u=!t||!i,s=(0,c.default)("button button--primary button--large",{disabled:u}),f=r&&t===r;return p.default.createElement("form",{className:"email-settings",onSubmit:this.onSubmit},p.default.createElement("h4",null,"Email address"),p.default.createElement("div",{className:"flex-container"},p.default.createElement(o.default,{inputClassName:f?"box-border":"",value:t||"",type:"text",onChange:this.onEmailChange,placeholder:l.default.getString("alerts.email.placeholderEmail"),isRequired:!0}),f?p.default.createElement("div",{className:"verification-status-tag"},p.default.createElement("div",{className:"icon-padding"},p.default.createElement(a.default,{icon:n?"check-in-green-circle":"x",className:"verify-icon",width:"18",height:"18"})),l.default.getString("alerts.email."+(n?"verifiedEmail":"unverifiedEmail"))):null),""===r?p.default.createElement("button",{className:s,type:"submit",disabled:u},l.default.getString("alerts.email.addEmail")):null,this.shouldShowUpdateEmailButton()?p.default.createElement("button",{className:s,type:"submit",disabled:u||r===t&&n},l.default.getString("alerts.email.updateEmail")):null,this.shouldShowVerifyEmailButton()?p.default.createElement("button",{className:s,onClick:this.reVerify,disabled:!i},l.default.getString("alerts.email.resendEmail")):null)}}]),t}();y.contextTypes={api:f.default.instanceOf(i.default).isRequired,authStore:f.default.instanceOf(u.default).isRequired,messageStore:f.default.instanceOf(s.default).isRequired},t.default=y},662:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(400)),o=r(617),i=(u(r(2)),u(r(3)));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent),n(t,[{key:"render",value:function(){var e=o.iconIdToIconCompMap.keySeq().sort();return i.createElement("div",{style:{margin:"20px"}},i.createElement("h2",null,"Displaying ",o.iconIdToIconCompMap.size," Sprites"),i.createElement("div",{style:{display:"flex","flex-wrap":"wrap"}},e.map(function(e){return i.createElement("div",{key:e,style:{border:"3px solid",margin:"10px",padding:"20px"}},i.createElement(a.default,{icon:e,width:"40",height:"40"}),i.createElement("span",{style:{"margin-left":"10px"}},e))})))}}]),t}();t.default=l},663:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(r(400)),o=s(r(399)),i=s(r(1)),u=r(3),l=s(u);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.onChange=o.onChange.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.PureComponent),n(t,[{key:"onChange",value:function(){this.props.onChange(!this.props.value)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.label,n=e.checkboxText,i=e.value?"is-selected":null,u=(0,o.default)("s2-form-input",t),s=(0,o.default)("checkbox",i);return l.default.createElement("div",{className:u},r?l.default.createElement("label",null,r):null,l.default.createElement("span",{className:s,onClick:this.onChange},l.default.createElement("div",{className:"checkbox-input flex-row-vcenter"},l.default.createElement(a.default,{className:"check flex-centered",icon:"check",width:"12",height:"12"})),n?l.default.createElement("span",{className:"checkbox-text"},n):null))}}]),t}();c.propTypes={className:i.default.string,label:i.default.string,checkboxText:i.default.string,value:i.default.bool,onChange:i.default.func.isRequired},t.default=c},664:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=O(r(411)),o=O(r(406)),i=O(r(663)),u=O(r(400)),l=O(r(430)),s=O(r(401)),c=O(r(266)),f=O(r(239)),d=O(r(240)),p=O(r(30)),h=O(r(238)),m=O(r(16)),y=O(r(48)),g=O(r(416)),_=O(r(65)),b=r(245),v=O(r(1)),E=r(3),S=O(E);function O(e){return e&&e.__esModule?e:{default:e}}var P=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.state={email:"",isLoading:!0,isSubmitting:!1,resendVerificationEmail:!1,submitted:!1,success:!1,error:null},o.handleEmailChange=o.handleEmailChange.bind(o),o.handleSubmit=o.handleSubmit.bind(o),o.handleCancel=o.handleCancel.bind(o),o.handleResendVerification=o.handleResendVerification.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,E.PureComponent),n(t,null,[{key:"willRouteTo",value:function(e){if(!e.alertsStore.isCreatingAlert())return new y.default({path:m.default.HOME,replace:!0})}},{key:"requiresAuthentication",value:function(){return!0}},{key:"getPageTitle",value:function(e){var t=e.alertsStore.newAlert.queryType;return(p.default.getString("alerts.create."+t+".title")||"Create Alert")+" - Semantic Scholar"}}]),n(t,[{key:"componentDidMount",value:function(){var e=this,t=this.context.alertsStore.newAlert,r=t.queryType,n=t.queryValue;Promise.all([this.context.api.findAlertByQueryTypeAndValue(r,n),this.context.api.fetchUserInfo()]).then(function(){e.setState({isLoading:!1})})}},{key:"handleEmailChange",value:function(e){this.setState({email:e})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({isSubmitting:!0});var r=this.context,n=r.api,a=r.alertsStore.newAlert,o=a.id,i=a.queryType,u=this.state,l=u.email,s=u.resendVerificationEmail,c=h.default.UserAlerts,f=c.CREATE_SUCCESS,d=c.CREATE_FAILURE;n.createAlert(a).then(function(){return(0,_.default)(g.default.create(f,{alertId:o,alertType:i})),l?n.updateUser({alertEmail:l}):s?n.resendVerificationEmail():Promise.resolve()}).then(function(){t.setState({success:!0,error:null,isSubmitting:!1,submitted:!0})}).catch(function(e){var r=e.status,n=e.error;(0,_.default)(g.default.create(d,{alertId:o,alertType:i,error:n,status:r})),t.setState({error:n||"There was a problem with your request",success:!1,isSubmitting:!1,submitted:!0})})}},{key:"handleCancel",value:function(){this.context.router.history.goBack()}},{key:"handleResendVerification",value:function(e){this.setState(function(){return{resendVerificationEmail:e}})}},{key:"renderAlertExists",value:function(e){var t=e.displayValue,r=e.queryType;return S.default.createElement("section",{className:"content create-alert-content","data-selenium-selector":"create-alert-already-created"},S.default.createElement("p",null,p.default.getString("alerts.create."+r+".exists")),S.default.createElement("p",null,S.default.createElement("strong",null,t)),S.default.createElement("a",{"data-selenium-selector":"return-to-previous-page",onClick:this.handleCancel},"Return to previous page."))}},{key:"renderAlertForm",value:function(){var e=this.state,t=e.email,r=e.isSubmitting,n=e.resendVerificationEmail,a=this.context,o=a.authStore,u=a.alertsStore.newAlert,s=u.queryType,c=u.displayValue,f=o.getUser()||{},d=f.alertEmail,h=f.alertEmailIsVerified,m=p.default.getString("alerts.create."+s),y=m.get("description"),g=m.get("notes");return S.default.createElement("form",{className:"content create-alert-content",onSubmit:this.handleSubmit},S.default.createElement("section",{className:"margin-tb-med"},S.default.createElement("p",{className:"margin-tb-med"},y),S.default.createElement("p",{className:"display-text"},S.default.createElement("strong",null,c)),d?null:S.default.createElement(l.default,{isRequired:!0,label:"Your email",placeholder:"example@email.com",value:t,className:"alert-email-input",onChange:this.handleEmailChange}),!h&&d?S.default.createElement(i.default,{className:"margin-tb-med",label:p.default.getString("alerts.create.form.resendVerificationLabel"),checkboxText:p.default.getString("alerts.create.form.resendVerificationText"),value:n,onChange:this.handleResendVerification}):null),S.default.createElement("section",{className:"form-buttons"},g?S.default.createElement("p",{className:"italic"},g):null,S.default.createElement("button",{"data-selenium-selector":"create-alert-form-submit-button",className:"button button--lg button--primary create-alert",type:"submit",disabled:r},p.default.getString("alerts.create.form.buttonText")),S.default.createElement("a",{"data-selenium-selector":"create-alert-form-cancel",className:"cancel",onClick:this.handleCancel},"Cancel")))}},{key:"renderSuccess",value:function(){return S.default.createElement("div",{className:"flex-column flex-row-centered content create-alert-content",role:"main",id:"main-content"},S.default.createElement(u.default,{icon:"check-in-green-circle",width:"70px",height:"70px"}),S.default.createElement("h1",null,p.default.getString("alerts.create.form.submissionSuccess")),S.default.createElement("a",{"data-selenium-selector":"return-to-previous-page",onClick:this.handleCancel},"Return to previous page"),S.default.createElement("div",null,"or"),S.default.createElement(s.default,{to:"ALERTS"},"Manage Alerts"))}},{key:"renderError",value:function(){return S.default.createElement("div",{className:"flex-column flex-row-centered content create-alert-content",role:"main",id:"main-content"},S.default.createElement("h1",null,p.default.getString("alerts.create.form.submissionFailure")),S.default.createElement("a",{onClick:this.handleCancel},"Return to previous page."))}},{key:"renderPostRequestState",value:function(){return this.state.error?this.renderError():this.renderSuccess()}},{key:"renderPreRequestState",value:function(){var e=this.context.alertsStore,t=e.newAlert,r=t.queryType,n=t.queryValue,a=e.getAlert(r,n);return this.state.isLoading?null:a?this.renderAlertExists(a):this.renderAlertForm()}},{key:"render",value:function(){var e=this.state,t=e.submitted,r=e.isLoading,n=this.context.alertsStore.newAlert.queryType;return S.default.createElement("div",{className:"create-alert-page"},S.default.createElement(o.default,{showSearchBar:!0}),S.default.createElement("div",{className:"title-container"},S.default.createElement("h1",{className:"title"},p.default.getString("alerts.create."+n+".title"))),t?this.renderPostRequestState():this.renderPreRequestState(),r?null:S.default.createElement(a.default,null))}}]),t}();P.contextTypes={alertsStore:v.default.instanceOf(c.default).isRequired,api:v.default.instanceOf(f.default).isRequired,authStore:v.default.instanceOf(d.default).isRequired,dispatcher:v.default.instanceOf(b.Dispatcher).isRequired,router:v.default.object.isRequired},t.default=P},665:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(33)),a=i(r(32)),o=i(r(11));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n.default.ABANDON,o.default.recursive({target:e},r)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();t.default=u,u.create=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(u,[null].concat(t)))}},666:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=y(r(403)),i=y(r(433)),u=y(r(523)),l=y(r(271)),s=y(r(36)),c=y(r(7)),f=y(r(50)),d=y(r(2)),p=y(r(1)),h=r(3),m=y(h);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return i.state=n({isLoading:!0,isPaginating:!1,pageNumber:1,papers:d.default.Seq(),totalPages:0},i.getStateFromSuggestionStore()),i._currentPageRequest=null,i.addToPapersToRemove=i.addToPapersToRemove.bind(i),i.removeFromPapersToRemove=i.removeFromPapersToRemove.bind(i),i.handleNewPage=i.handleNewPage.bind(i),i.context.suggestionStore.registerComponent(i,function(){i.setState(i.getStateFromSuggestionStore())}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,h.PureComponent),a(t,[{key:"componentDidMount",value:function(){this.goToPage(this.state.pageNumber)}},{key:"componentWillUnmount",value:function(){this._currentPageRequest&&(this._currentPageRequest=null)}},{key:"getStateFromSuggestionStore",value:function(){return{papersToRemove:this.context.suggestionStore.get("papersToRemove")}}},{key:"addToPapersToRemove",value:function(e){var t=this.context.suggestionStore;t.set("papersToRemove",t.get("papersToRemove").add(e))}},{key:"removeFromPapersToRemove",value:function(e){var t=this.context.suggestionStore;t.set("papersToRemove",t.get("papersToRemove").delete(e))}},{key:"handleNewPage",value:function(e){this.setState({isPaginating:!0,pageNumber:e}),this.goToPage(e)}},{key:"goToPage",value:function(e){var t=this,r=5*(e-1);this._currentPageRequest=s.default.send({method:"GET",path:"/paper/search?field=authors.ids&q="+this.props.authorId+"&offset="+r+"&sort=year&pageSize=5"}),this._currentPageRequest.then(function(e){t.handleFetchSuccess(e)}).catch(function(e){t.handleFetchError(e)})}},{key:"handleFetchSuccess",value:function(e){var t=e.body,r=t.papers,n=t.totalHits,a=t.totalPages;this._currentPageRequest&&this.setState({totalHits:n,totalPages:a,isLoading:!1,isPaginating:!1,papers:d.default.Seq(r.map(f.default.fromJs))})}},{key:"handleFetchError",value:function(e){this._currentPageRequest&&(this.setState({isLoading:!1,isPaginating:!1,papers:d.default.Seq(),errors:d.default.List([e])}),c.default.warn(e))}},{key:"getPaginationText",value:function(){var e=this.state,t=e.pageNumber,r=e.totalHits,n=5*t;return 5*(t-1)+1+" to "+(n>r?r:n)+" of "+r}},{key:"renderSelectedPapers",value:function(e){return m.default.createElement("div",{className:"suggest-remove-papers__to-remove"},m.default.createElement(u.default,{icon:"deselect",title:"Papers to be removed",papers:e,onClick:this.removeFromPapersToRemove}))}},{key:"renderPaperOptions",value:function(){var e=this.state,t=e.isPaginating,r=e.papers,n=e.pageNumber,a=e.papersToRemove,o=e.totalPages;return r.isEmpty()?m.default.createElement("p",null,"No papers found for this author"):m.default.createElement("div",{className:"suggest-remove-papers__selectable"},m.default.createElement(u.default,{icon:"delete",papers:r,selected:a.map(function(e){return e.id}),onClick:this.addToPapersToRemove,isPaginating:t}),m.default.createElement("div",{className:"flex-row flex-center suggest-remove-paper__pager"},m.default.createElement(i.default,{loadPage:this.handleNewPage,pageNumber:n,totalPages:o}),m.default.createElement("p",null,this.getPaginationText())))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,r=e.papersToRemove;return m.default.createElement("section",{className:"suggest-remove-papers"},m.default.createElement("h2",null,"Remove Papers",m.default.createElement("span",{className:"optional text--gray"},"(optional)")),m.default.createElement("div",{className:"suggest-remove-papers__explanation"},"Sometimes the papers of different authors get mixed up in one profile. If you see any papers that don't look like they belong, remove them here and we will try to move them to the right profile."),r.isEmpty()?null:this.renderSelectedPapers(r),t?m.default.createElement(o.default,null):this.renderPaperOptions())}}]),t}();g.contextTypes={suggestionStore:p.default.instanceOf(l.default).isRequired},g.propTypes={authorId:p.default.string.isRequired},t.default=g},667:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=_(r(403)),i=_(r(433)),u=_(r(573)),l=_(r(523)),s=_(r(36)),c=r(18),f=_(r(50)),d=_(r(271)),p=_(r(52)),h=_(r(2)),m=_(r(1)),y=r(3),g=_(y);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.state={value:"",query:"",pageNumber:1,isLoading:!1,isPaginating:!1,errors:h.default.List(),papers:h.default.Seq(),papersToAdd:h.default.Set(),paperIdsToAdd:h.default.Set()},o.handleChange=o.handleChange.bind(o),o.handleSubmit=o.handleSubmit.bind(o),o.handlePageChange=o.handlePageChange.bind(o),o.handleSuccessfulApiRequest=o.handleSuccessfulApiRequest.bind(o),o.handleFetchError=o.handleFetchError.bind(o),o.addToPapersToAdd=o.addToPapersToAdd.bind(o),o.removeFromPapersToAdd=o.removeFromPapersToAdd.bind(o),o.updateStateFromStore=o.updateStateFromStore.bind(o),o.context.suggestionStore.registerComponent(o,o.updateStateFromStore),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,y.PureComponent),a(t,[{key:"updateStateFromStore",value:function(){this.setState({papersToAdd:this.context.suggestionStore.get("papersToAdd")})}},{key:"handleChange",value:function(e){this.setState({value:e})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({errors:h.default.List()});var t=this.state.value;if(t.length>0){var r=this.paperIdFromS2Url(t),n=r.isUrl,a=r.paperId;n?a?(this.setState({pageNumber:1}),this.makeApiRequest({query:a,pageNumber:1,requestType:"isLoading",field:"id"})):this.handleFetchError("Invalid Semantic Scholar paper URL."):(this.setState({pageNumber:1}),this.makeApiRequest({query:t,pageNumber:1,requestType:"isLoading"}))}}},{key:"paperIdFromS2Url",value:function(e){var t=p.default.parse(e),r=t.protocol,a=t.host,o=t.path;if(r&&r.match(/^https?\:$/)&&a&&o.length>1){var i=o.slice(1).split("/"),u=n(i,3),l=u[0],s=u[1],c=u[2];if("www.semanticscholar.org"===a&&"paper"===l){if(c)return{isUrl:!0,paperId:c};if(s)return{isUrl:!0,paperId:s}}return{isUrl:!0,paperId:!1}}return{isUrl:!1,paperId:!1}}},{key:"handlePageChange",value:function(e){var t=this;this.setState({pageNumber:e},function(){var e=t.state,r=e.value,n=e.pageNumber;t.makeApiRequest({query:r,pageNumber:n,requestType:"isPaginating"})})}},{key:"makeApiRequest",value:function(e){var t=e.query,r=e.pageNumber,n=e.requestType,a=e.field,o=void 0===a?"title":a;this.setState(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({query:t},n,!0));var i={method:"GET",path:"/paper/search?field="+o+"&q="+t+"&pageSize=5&offset="+5*(r-1)};s.default.send(i).then(this.handleSuccessfulApiRequest).catch(this.handleFetchError)}},{key:"handleSuccessfulApiRequest",value:function(e){var t=e.body,r=t.papers,n=t.totalHits,a=t.totalPages;this.setState({totalHits:n,totalPages:a,isLoading:!1,isPaginating:!1,papers:h.default.Seq(r.map(f.default.fromJs))})}},{key:"handleFetchError",value:function(e){this.setState({isLoading:!1,isPaginating:!1,errors:h.default.List([e])})}},{key:"removeFromPapersToAdd",value:function(e){var t=this.context.suggestionStore;t.set("papersToAdd",t.get("papersToAdd").delete(e)),this.setState({paperIdsToAdd:this.state.paperIdsToAdd.remove(e.id)})}},{key:"addToPapersToAdd",value:function(e){var t=this.context.suggestionStore;t.set("papersToAdd",t.get("papersToAdd").add(e)),this.setState({paperIdsToAdd:this.state.paperIdsToAdd.add(e.id)})}},{key:"getPaginationText",value:function(e,t){return 5*(e-1)+1+" - "+Math.min(5*e,t)+" of "+(0,c.pluralize)(t,"paper")}},{key:"renderPapers",value:function(){var e=this.state,t=e.papers,r=e.pageNumber,n=e.paperIdsToAdd,a=e.isPaginating,o=e.totalPages,u=e.totalHits;return g.default.createElement("div",{className:"suggest-add-papers__selectable"},g.default.createElement(l.default,{icon:"add",papers:t,selected:n,onClick:this.addToPapersToAdd,isPaginating:a}),g.default.createElement("div",{className:"flex-row flex-center suggest-add-paper__pager"},g.default.createElement(i.default,{loadPage:this.handlePageChange,pageNumber:r,totalPages:o}),g.default.createElement("p",null,this.getPaginationText(r,u))))}},{key:"renderNoResults",value:function(){var e=this.state.query;return e?g.default.createElement("p",null,'No results found for "'+e+'".'):null}},{key:"renderContent",value:function(){return this.state.papers.isEmpty()?this.renderNoResults():this.renderPapers()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,r=e.papersToAdd,n=e.errors;return g.default.createElement("section",{className:"suggest-add-papers"},g.default.createElement("h2",null,"Add Papers",g.default.createElement("span",{className:"optional text--gray"},"(optional)")),g.default.createElement("div",{className:"flex-row flex-align-start"},g.default.createElement(u.default,{errors:n,onChange:this.handleChange,placeholder:"Search for papers to add or paste in a Semantic Scholar paper URL",onSubmit:this.handleSubmit})),r.isEmpty()?null:g.default.createElement("div",{className:"suggest-add-papers__to-add"},g.default.createElement(l.default,{icon:"deselect",title:"Papers to be added",papers:r,onClick:this.removeFromPapersToAdd})),t?g.default.createElement(o.default,null):this.renderContent())}}]),t}();b.contextTypes={suggestionStore:m.default.instanceOf(d.default).isRequired},t.default=b},668:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=c(r(411)),o=c(r(406)),i=c(r(401)),u=c(r(1)),l=r(3),s=c(l);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.PureComponent),n(t,[{key:"render",value:function(){var e=this.props,t=e.authorId,r=e.authorName,n=e.userEmail;return s.default.createElement("div",{className:"author-suggestions-page success-page"},s.default.createElement(o.default,{showSearchBar:!0}),s.default.createElement("div",{className:"title-section"},s.default.createElement("h1",null,"Thank you!")),s.default.createElement("div",{className:"content author-suggestions-content",role:"main",id:"main-content"},s.default.createElement("p",null,"Our team will review your submission and will email you at",s.default.createElement("strong",null," "+n)," if the changes are approved. Approved changes usually take about two weeks to appear on the site."),s.default.createElement(i.default,{to:"AUTHOR_PROFILE_BY_ID",params:{authorId:t},"data-selenium-selector":"return-link"},"Return to ",r,"'s author page")),s.default.createElement(a.default,null))}}]),t}();f.propTypes={authorId:u.default.string.isRequired,authorName:u.default.string.isRequired,userEmail:u.default.string.isRequired},t.default=f},669:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=f(r(411)),o=f(r(406)),i=f(r(400)),u=f(r(401)),l=f(r(1)),s=r(3),c=f(s);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.PureComponent),n(t,[{key:"render",value:function(){var e=this.props,t=e.authorId,r=e.authorName;return c.default.createElement("div",{className:"author-suggestions-page error-page"},c.default.createElement(o.default,{showSearchBar:!1,showUserControls:!1}),c.default.createElement("div",{className:"title-section"},c.default.createElement("h1",null,c.default.createElement(i.default,{icon:"msg-warning",width:"34px",height:"34px"}),c.default.createElement("span",null,"Suggestions Not Submitted"))),c.default.createElement("div",{className:"content author-suggestions-content",role:"main",id:"main-content"},c.default.createElement("p",null,"The suggestions you provided were not submitted due to a server error. Please try again soon."),c.default.createElement(u.default,{to:"AUTHOR_PROFILE_BY_ID",params:{authorId:t},"data-selenium-selector":"return-link"},"Return to ",r,"'s author page")),c.default.createElement(a.default,null))}}]),t}();d.propTypes={authorId:l.default.string.isRequired,authorName:l.default.string.isRequired},t.default=d},670:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=L(r(411)),i=L(r(406)),u=L(r(669)),l=L(r(668)),s=L(r(430)),c=L(r(403)),f=L(r(667)),d=L(r(666)),p=L(r(606)),h=L(r(605)),m=r(412),y=L(r(255)),g=L(r(240)),_=L(r(665)),b=L(r(239)),v=L(r(47)),E=L(r(238)),S=L(r(7)),O=r(16),P=L(r(31)),w=L(r(48)),C=L(r(293)),N=L(r(416)),k=L(r(271)),A=L(r(65)),T=r(243),R=r(46),j=L(r(2)),x=L(r(401)),F=L(r(1)),I=r(3),M=L(I);function L(e){return e&&e.__esModule?e:{default:e}}var q={AUTHOR_RESULT:"AUTHOR_RESULT",AUTHOR_RESULT_REDIRECT:"AUTHOR_RESULT_REDIRECT"};Object.freeze(q);var D=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.state=n({},a.getStateFromAuthorStore(),a.getStateFromSuggestionStore(),a.getStateFromAuthStore()),a.context.authStore.registerComponent(a,function(){a.setState(a.getStateFromAuthStore())}),a.context.authorStore.registerComponent(a,function(){a.setState(a.getStateFromAuthorStore())}),a.context.suggestionStore.registerComponent(a,function(){a.setState(a.getStateFromSuggestionStore())}),a.handleSubmit=a.handleSubmit.bind(a),a.showLoginModal=a.showLoginModal.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,I.PureComponent),a(t,null,[{key:"willRouteTo",value:function(e,t){var r=e.authorStore,a=e.api;if(r.isNewOrCanonicalAuthor(t.params.authorId,t.params.slug)){var o=t.params,i=t.query,u=t.params,l=u.authorId,s=u.slug;return a.fetchAuthorDetail(l,s,!0).then(function(e){var t=e.resultData;switch(t.resultType){case q.AUTHOR_RESULT:return e;case q.AUTHOR_RESULT_REDIRECT:var r={slug:t.canonicalSlug,authorId:t.canonicalId};return new w.default({query:i,params:n({params:o},r),routeName:"AUTHOR_SUGGESTIONS",replace:!0,status:301})}})}return Promise.resolve(r.author)}},{key:"getPageTitle",value:function(e){return e.authorStore.author?"Suggest Changes to "+e.authorStore.author.name+" - Semantic Scholar":"Suggest Changes - Semantic Scholar"}}]),a(t,[{key:"getStateFromAuthStore",value:function(){return{isLoggedIn:this.context.authStore.hasAuthenticatedUser()}}},{key:"getStateFromAuthorStore",value:function(){var e=this.context.authorStore,t=e.author||{},r=t.id,n=t.name;return{slug:t.slug,authorId:r,authorName:n,loading:e.isLoading()}}},{key:"getStateFromSuggestionStore",value:function(){var e=this.context.suggestionStore;return{affiliation:e.get("affiliation"),homepage:e.get("homepage"),orcidId:e.get("orcidId"),submissionState:e.get("submissionState"),userComments:e.get("userComments"),userEmail:e.get("userEmail"),userName:e.get("userName")}}},{key:"componentDidUpdate",value:function(e,t){t.submissionState===C.default.SUBMITTING&&this.state.submissionState!==C.default.SUBMITTING&&this.handleFormSubmissionCompletion()}},{key:"componentWillUnmount",value:function(){this.context.suggestionStore.reset()}},{key:"forceReauthentication",value:function(){var e=this,t=this.context,r=t.authStore,n=t.dispatcher,a=t.router;r.forceReauthentication({dispatcher:n,location:m.LOGIN_LOCATION.authorSuggestionsPage}).catch(function(t){S.default.warn(t);var r=e.state,n=r.authorId,o=r.slug;a.history.replace((0,O.makePath)({routeName:"AUTHOR_PROFILE",params:{authorId:n,slug:o}}))})}},{key:"hasErrors",value:function(){return j.default.Set([C.default.BAD_REQUEST,C.default.UNAUTHORIZED,C.default.ERROR]).has(this.state.submissionState)}},{key:"handleFormSubmissionCompletion",value:function(){var e={submissionOutcome:this.state.submissionState},t=N.default.create(E.default.AuthorSuggestions.SUBMIT,e);(0,A.default)(t),this.hasErrors()&&v.default.smoothScrollTo(this.refs.top),this.state.submissionState===C.default.UNAUTHORIZED&&this.forceReauthentication()}},{key:"handleInputChange",value:function(e,t){this.context.suggestionStore.set(e,t)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.context.authStore.ensureLogin({dispatcher:this.context.dispatcher,analyticData:{text:"Complete your submission by signing in:"},location:m.LOGIN_LOCATION.authorSuggestionsPage}).then(function(){t.context.suggestionStore.send(t.state.authorId,t.state.authorName)}).catch(function(){(0,A.default)(_.default.create(E.default.AuthorSuggestions.SUBMIT,{authorId:t.state.authorId}))})}},{key:"showLoginModal",value:function(){this.context.dispatcher.dispatch((0,T.showModal)({id:R.ModalId.LOGIN,location:m.LOGIN_LOCATION.authorSuggestionsPage}))}},{key:"renderLoading",value:function(){return M.default.createElement("div",{className:"author-suggestions-page"},M.default.createElement(i.default,{showSearchBar:!0}),M.default.createElement("div",{className:"flex-row-vcenter loading container",role:"main",id:"main-content"},M.default.createElement(c.default,null)),M.default.createElement(o.default,null))}},{key:"renderSuccess",value:function(){var e=this.state,t=e.authorId,r=e.authorName,n=e.userEmail;return M.default.createElement(l.default,{authorId:t,authorName:r,userEmail:n})}},{key:"renderError",value:function(){var e=this.state,t=e.authorId,r=e.authorName;return M.default.createElement(u.default,{authorId:t,authorName:r})}},{key:"renderForm",value:function(){var e=this.state,t=e.authorName,r=e.authorId,n=e.slug,a=e.isSubmitting,u=e.affiliation,l=e.homepage,c=e.orcidId,m=e.userName,y=e.userEmail,g=e.userComments,_=e.isLoggedIn;return M.default.createElement("div",{className:"author-suggestions-page",ref:"top"},M.default.createElement(i.default,{showSearchBar:!0}),M.default.createElement("div",{className:"title-section"},M.default.createElement("h1",null,"Suggest Changes to ",t)),_?null:M.default.createElement("div",{className:"sign-in-ledge"},M.default.createElement("div",{className:"author-suggestions-content"},"You must be signed in to suggest changes. ",M.default.createElement("a",{onClick:this.showLoginModal},"Sign in now"))),M.default.createElement("div",{className:"content author-suggestions-content",role:"main",id:"main-content"},M.default.createElement("form",{onSubmit:this.handleSubmit,role:"form"},M.default.createElement(h.default,{errors:this.headerErrors}),M.default.createElement("section",null,M.default.createElement("h2",null,"Author Details"),M.default.createElement(s.default,{label:"Affiliation",placeholder:"e.g. Some University",value:u,onChange:this.handleInputChange.bind(this,"affiliation"),errors:this.context.suggestionStore.getErrorsForField("affiliation")}),M.default.createElement(s.default,{label:"Homepage",placeholder:"e.g. http://dept.university.edu/author",value:l,onChange:this.handleInputChange.bind(this,"homepage"),errors:this.context.suggestionStore.getErrorsForField("homepage")}),M.default.createElement(s.default,{label:"ORCID ID",placeholder:"e.g. 0000-0000-0000-0000",value:c,onChange:this.handleInputChange.bind(this,"orcidId"),errors:this.context.suggestionStore.getErrorsForField("orcidId")})),M.default.createElement(f.default,null),M.default.createElement(d.default,{authorId:r}),M.default.createElement("section",null,M.default.createElement("h2",null,"Your Details"),M.default.createElement(s.default,{label:"Your name",placeholder:"First Last",isRequired:!0,value:m,onChange:this.handleInputChange.bind(this,"userName"),errors:this.context.suggestionStore.getErrorsForField("userName")}),M.default.createElement(s.default,{type:"email",label:"Your email",placeholder:"email@address.com",isRequired:!0,value:y,onChange:this.handleInputChange.bind(this,"userEmail"),errors:this.context.suggestionStore.getErrorsForField("userEmail")}),M.default.createElement(p.default,{label:"Other details that may help us verify this change",rows:4,value:g,onChange:this.handleInputChange.bind(this,"userComments"),errors:this.context.suggestionStore.getErrorsForField("userComments")})),M.default.createElement("div",{className:"form-buttons"},M.default.createElement("button",{className:"button button--lg button--primary",type:"submit",isdisabled:a},_?null:"Sign in to ","Submit Suggestions"),M.default.createElement(x.default,{className:"cancel-link",to:"AUTHOR_PROFILE",params:{authorId:r,slug:n}},"Cancel")))),M.default.createElement(o.default,null))}},{key:"render",value:function(){return this.state.isLoading?this.renderLoading():this.state.submissionState===C.default.SUCCESSFUL?this.renderSuccess():this.state.submissionState===C.default.ERROR?this.renderError():this.renderForm()}},{key:"headerErrors",get:function(){var e=this.context.suggestionStore.validationErrors.get("formLevel");return this.hasErrors()&&e.isEmpty()?j.default.List(["There was a problem with your request"]):e}}]),t}();D.contextTypes={api:F.default.instanceOf(b.default).isRequired,authorStore:F.default.instanceOf(y.default).isRequired,authStore:F.default.instanceOf(g.default).isRequired,dispatcher:F.default.instanceOf(P.default).isRequired,router:F.default.object.isRequired,suggestionStore:F.default.instanceOf(k.default).isRequired},t.default=D},671:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(419)),a=s(r(25)),o=s(r(6)),i=s(r(1)),u=s(r(3)),l=s(r(401));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.title,r=e.id,i=e.onClick,s=e.slug;return u.default.createElement("div",{className:"search-result-title"},u.default.createElement(l.default,{"data-selenium-selector":"title-link",onClick:i,to:"PAPER_DETAIL",params:{paperId:r,slug:s}},u.default.createElement(n.default,{field:a.default.fromJs(t),limit:o.default.text.MAX_PAPER_TITLE_CHARS,expandable:!1})))};c.propTypes={id:i.default.string.isRequired,onClick:i.default.func.isRequired,title:i.default.object.isRequired,slug:i.default.string.isRequired},t.default=c},672:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=m(r(453)),o=m(r(479)),i=m(r(478)),u=m(r(30)),l=h(r(247)),s=h(r(18)),c=m(r(399)),f=m(r(1)),d=r(3),p=m(d);function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.PureComponent),n(t,[{key:"renderTitle",value:function(){var e=l.citationsValue(Math.round(this.props.citationStats.numCitations.value)),t=this.props.hideLegendTitle?null:e+" "+u.default.getString("citations.estimatedTotal.label");return t?p.default.createElement(i.default,{text:t}):null}},{key:"renderExplanation",value:function(){var e=void 0;this.props.citationStats.numCitations.shouldDisplay()?e=u.default.getString("citations.estimatedTotal.text",this.props.type||"publication","<strong>"+s.format(Math.round(this.props.citationStats.numCitations.value))+"</strong>"):e=u.default.getString("citations.estimatedTotal.insufficientData");return p.default.createElement(o.default,{html:e})}},{key:"renderHistogramContent",value:function(){var e=[{buckets:this.props.citationStats.citedByBuckets,renderer:a.default.bucketRenderers.selectedBuckets}],t=(new Date).getFullYear();return p.default.createElement("div",{className:"histogram__chart"},p.default.createElement(a.default,{id:this.props.id,bucketRenderers:e,renderPopover:!0,renderAxis:!0,width:this.props.width,height:a.default.DEFAULT_HEIGHT,paddingLeftPx:"number"==typeof this.props.paddingLeftPx?this.props.paddingLeftPx:a.default.DefaultPaddingPx.LEFT,paddingRightPx:"number"==typeof this.props.paddingRightPx?this.props.paddingRightPx:a.default.DefaultPaddingPx.RIGHT,paddingTopPx:"number"==typeof this.props.paddingTopPx?this.props.paddingTopPx:a.default.DefaultPaddingPx.TOP,paddingBottomPx:"number"==typeof this.props.paddingBottomPx?this.props.paddingBottomPx:a.default.DefaultPaddingPx.BOTTOM,highlightRecentYears:!1,enableBarHoverEffect:!1,minMaxYear:t,popoverLabel:u.default.getString("citations.histogram.popoverLabel")}),p.default.createElement("div",{className:"histogram__axis-label"},u.default.getString("citations.totalByYear.label")))}},{key:"render",value:function(){var e=(0,c.default)("box citation-histogram",{"histogram--horizontal":"horizontal"===this.props.layout});return"horizontal"===this.props.layout?p.default.createElement("div",{className:e},this.props.citationStats.numCitations.shouldDisplay()?this.renderHistogramContent():null,p.default.createElement("div",{className:"histogram__text"},this.renderTitle(),this.renderExplanation())):p.default.createElement("div",{className:e},this.renderTitle(),this.props.citationStats.numCitations.shouldDisplay()?this.renderHistogramContent():null,this.renderExplanation())}}]),t}();y.propTypes={id:f.default.string.isRequired,entityId:f.default.string.isRequired,citationStats:f.default.object.isRequired,type:f.default.string,width:f.default.number.isRequired,searchResultIndex:f.default.number,hideLegendTitle:f.default.bool,layout:f.default.string,paddingLeftPx:f.default.number,paddingRightPx:f.default.number,paddingTopPx:f.default.number,paddingBottomPx:f.default.number},t.default=y},673:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=p(r(453)),o=p(r(479)),i=p(r(478)),u=p(r(30)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(247)),s=p(r(399)),c=p(r(1)),f=r(3),d=p(f);function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.PureComponent),n(t,[{key:"renderExplanation",value:function(){var e=Math.round(this.props.citationStats.citationVelocity.value),t=u.default.getString("citations.average",e,this.props.citationStats.citationVelocity.firstYear,this.props.citationStats.citationVelocity.lastYear);return d.default.createElement(o.default,{html:t})}},{key:"renderTitle",value:function(){if(this.props.hideLegendTitle)return null;var e=u.default.getString("citations.velocity.label",l.citationVelocityValue(this.props.citationStats.citationVelocity));return d.default.createElement(i.default,{text:e})}},{key:"renderHistogram",value:function(){var e=this,t=this.props.citationStats.citedByBuckets.findIndex(function(t){return t.startKey==e.props.citationStats.citationVelocity.firstYear}),r=t+this.props.citationStats.citationVelocity.lastYear-this.props.citationStats.citationVelocity.firstYear,n=this.props.citationStats.citedByBuckets.slice(t,r+1),o=[{buckets:n,renderer:a.default.bucketRenderers.selectedBuckets}];return d.default.createElement("div",{className:"histogram__chart"},d.default.createElement(a.default,{id:this.props.id,bucketRenderers:o,renderPopover:!0,renderAxis:!0,width:this.props.width,height:a.default.DEFAULT_HEIGHT,paddingLeftPx:a.default.DefaultPaddingPx.LEFT,paddingRightPx:a.default.DefaultPaddingPx.RIGHT,paddingTopPx:a.default.DefaultPaddingPx.TOP,paddingBottomPx:a.default.DefaultPaddingPx.BOTTOM,enableBarHoverEffect:!1,minDisplayYears:n.size,popoverLabel:u.default.getString("citations.histogram.popoverLabel")}),d.default.createElement("div",{className:"histogram__axis-label"},u.default.getString("citations.totalByYear.label")))}},{key:"render",value:function(){var e=(0,s.default)("box citation-histogram",{"histogram--horizontal":"horizontal"===this.props.layout});return"horizontal"===this.props.layout?d.default.createElement("div",{className:e},this.renderHistogram(),d.default.createElement("div",{className:"histogram__text"},this.renderTitle(),this.renderExplanation())):d.default.createElement("div",{className:e},this.renderTitle(),this.renderHistogram(),this.renderExplanation())}}]),t}();h.propTypes={id:c.default.string.isRequired,entityId:c.default.string.isRequired,citationStats:c.default.object.isRequired,width:c.default.number.isRequired,searchResultIndex:c.default.number,hideLegendTitle:c.default.bool,layout:c.default.string},t.default=h},674:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=p(r(453)),o=p(r(479)),i=p(r(478)),u=p(r(30)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(247)),s=p(r(399)),c=p(r(1)),f=r(3),d=p(f);function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.PureComponent),n(t,[{key:"renderExplanation",value:function(){var e=Math.round(100*this.props.citationStats.citationAcceleration.value),t=u.default.getString("citations.acceleration.text",e,this.props.citationStats.citationVelocity.lastYear,this.props.citationStats.citationVelocity.lastYear-1);return d.default.createElement(o.default,{html:t})}},{key:"renderTitle",value:function(){if(this.props.hideLegendTitle)return null;var e=u.default.getString("citations.acceleration.label",l.citationAccelerationValue(this.props.citationStats.citationAcceleration.value));return d.default.createElement(i.default,{text:e})}},{key:"renderHistogram",value:function(){var e=this,t=this.props.citationStats.citedByBuckets.findIndex(function(t){return t.startKey==e.props.citationStats.citationVelocity.lastYear}),r=t-1,n=this.props.citationStats.citedByBuckets.slice(r,t+1),o=[{buckets:n,renderer:a.default.bucketRenderers.selectedBuckets}];return d.default.createElement("div",{className:"histogram__chart"},d.default.createElement(a.default,{id:this.props.id,bucketRenderers:o,renderPopover:!0,renderAxis:!0,width:this.props.width,height:a.default.DEFAULT_HEIGHT,paddingLeftPx:a.default.DefaultPaddingPx.LEFT,paddingRightPx:a.default.DefaultPaddingPx.RIGHT,paddingTopPx:a.default.DefaultPaddingPx.TOP,paddingBottomPx:a.default.DefaultPaddingPx.BOTTOM,enableBarHoverEffect:!1,minDisplayYears:n.size,popoverLabel:u.default.getString("citations.histogram.popoverLabel")}),d.default.createElement("div",{className:"histogram__axis-label"},u.default.getString("citations.totalByYear.label")))}},{key:"render",value:function(){var e=(0,s.default)("box citation-histogram",{"histogram--horizontal":"horizontal"===this.props.layout});return"horizontal"===this.props.layout?d.default.createElement("div",{className:e},this.renderHistogram(),d.default.createElement("div",{className:"histogram__text"},this.renderTitle(),this.renderExplanation())):d.default.createElement("div",{className:e},this.renderTitle(),this.renderHistogram(),this.renderExplanation())}}]),t}();h.propTypes={id:c.default.string.isRequired,entityId:c.default.string.isRequired,citationStats:c.default.object.isRequired,width:c.default.number.isRequired,searchResultIndex:c.default.number,hideLegendTitle:c.default.bool,layout:c.default.string},t.default=h},675:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=w(r(674)),o=w(r(673)),i=w(r(672)),u=w(r(400)),l=w(r(425)),s=w(r(283)),c=w(r(284)),f=w(r(30)),d=P(r(247)),p=w(r(238)),h=w(r(455)),m=w(r(7)),y=w(r(244)),g=w(r(24)),_=w(r(65)),b=P(r(18)),v=w(r(399)),E=w(r(1)),S=r(3),O=w(S);function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function w(e){return e&&e.__esModule?e:{default:e}}var C=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.trackStatHoverEvent=o.trackStatHoverEvent.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,S.PureComponent),n(t,[{key:"trackStatHoverEvent",value:function(e){var t=this.context.analyticsLocation;if(t){var r=this.props,n=r.id,a=r.index,o=p.default.getIn(t,"STAT");(0,_.default)(h.default.create(o,{statName:e,id:n,index:a}))}else m.default.warn("You need to add analyticsLocation to context so that we know where this action event happened.")}},{key:"hasStats",value:function(){return this.props.citationStats.citationVelocity.shouldDisplay()||this.props.citationStats.hasKeyCitations()||this.props.externalContentStats.length>0}},{key:"statCssClass",value:function(e){var t="search-result__stat";return this.props.showSortStat&&(t=(0,v.default)("search-result__stat",{"is-active":this.context.queryStore.getQuery().sort===e})),t}},{key:"renderCitationVelocity",value:function(){var e=this;if(this.props.citationStats.citationVelocity.shouldDisplay()){var t=O.default.createElement(o.default,{width:350,id:this.props.id+"Popover",citationStats:this.props.citationStats,entityId:this.props.id,searchResultIndex:this.props.index});return O.default.createElement("li",{className:this.statCssClass(g.default.CITATION_VELOCITY.id),"data-selenium-selector":"search-result-citation-velocity"},O.default.createElement(l.default,{tooltipClassName:"tooltip--default-size",tooltipContent:t,tooltipPosition:"bottom-left",onShow:function(){e.trackStatHoverEvent("Citation Velocity")}},O.default.createElement(u.default,{width:"15",height:"15",icon:"chart",className:"fill--orange"}),d.citationVelocityValue(this.props.citationStats.citationVelocity)))}return null}},{key:"renderInfluentialCitations",value:function(){var e=this;if(this.props.citationStats.hasKeyCitations()){var t=this.props.citationStats.numKeyCitations,r=f.default.getString("citations.influential.text"),n=b.pluralize(t,f.default.getString("citations.influential.label")),a=O.default.createElement("div",null,O.default.createElement("h4",null,n),O.default.createElement("div",{dangerouslySetInnerHTML:{__html:r}}));return O.default.createElement("li",{className:this.statCssClass(g.default.INFLUENTIAL_CITATIONS.id),"data-selenium-selector":"search-result-influential-citations"},O.default.createElement(l.default,{tooltipClassName:"tooltip--default-size",className:"flex-row-vcenter",tooltipContent:a,tooltipPosition:"bottom-left",onShow:function(){e.trackStatHoverEvent("Highly Influential Citation")}},O.default.createElement(u.default,{icon:"theorems",width:"12",height:"12",className:"fill--orange"}),this.props.citationStats.numKeyCitations))}return null}},{key:"renderCitationAcceleration",value:function(){var e=this;if(this.props.citationStats.citationAcceleration.shouldDisplay()){var t=this.props.citationStats.citationAcceleration.value,r=O.default.createElement(a.default,{width:350,id:this.props.id+"Popover",citationStats:this.props.citationStats,entityId:this.props.id,searchResultIndex:this.props.index}),n="trending-neutral";return t>0&&(n="trending-up"),t<0&&(n="trending-down"),O.default.createElement("li",{className:this.statCssClass(g.default.CITATION_ACCELERATION.id),"data-selenium-selector":"search-result-citation-acceleration"},O.default.createElement(l.default,{tooltipClassName:"tooltip--default-size",tooltipContent:r,tooltipPosition:"bottom-left",onShow:function(){e.trackStatHoverEvent("Citation Acceleration")}},O.default.createElement(u.default,{icon:n,width:"15",height:"15",className:"fill--orange"}),d.citationAccelerationValue(t)))}return null}},{key:"renderTotalCitations",value:function(){if(this.props.citationStats.numCitations.shouldDisplay()){var e=O.default.createElement(i.default,{width:350,id:this.props.id+"Popover",citationStats:this.props.citationStats,entityId:this.props.id,searchResultIndex:this.props.index});return O.default.createElement("li",{className:this.statCssClass(g.default.TOTAL_CITATIONS.id),"data-selenium-selector":"search-result-total-citations"},O.default.createElement(l.default,{tooltipClassName:"tooltip--default-size",className:"flex-row-vcenter",tooltipContent:e,tooltipPosition:"bottom-left"},O.default.createElement(u.default,{icon:"cited-by",width:"15",height:"15",className:"fill--orange"}),d.citationsValue(this.props.citationStats.numCitations.value)))}return null}},{key:"renderExternalContentStats",value:function(){if(this.props.externalContentStats){var e=this.props.externalContentStats.find(function(e){return e.contentType===s.default.VIDEO});return void 0!==e?O.default.createElement("li",{className:this.statCssClass(g.default.VIDEO_CONTENT),"data-selenium-selector":"search-result-video"},O.default.createElement(u.default,{icon:"video-filled",width:"15",height:"15",className:"fill--orange"}),e.count):null}}},{key:"renderSortStat",value:function(){if(!this.props.showSortStat)return null;switch(this.context.queryStore.getQuery().sort){case g.default.TOTAL_CITATIONS.id:return this.renderTotalCitations();case g.default.CITATION_ACCELERATION.id:return this.renderCitationAcceleration();default:return null}}},{key:"render",value:function(){return this.hasStats()?O.default.createElement("div",{className:"search-result__stats flex-row"},this.renderInfluentialCitations(),this.renderCitationVelocity(),this.renderSortStat(),this.renderExternalContentStats()):null}}]),t}();C.propTypes={citationStats:E.default.object.isRequired,id:E.default.string.isRequired,index:E.default.number.isRequired,showSortStat:E.default.bool,externalContentStats:E.default.objectOf(c.default)},C.contextTypes={queryStore:E.default.instanceOf(y.default).isRequired,analyticsLocation:E.default.object},t.default=C},676:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r(419)),o=l(r(1)),i=r(3),u=l(i);function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent),n(t,[{key:"render",value:function(){return this.props.abstract.text?u.default.createElement("div",{className:"search-result-abstract"},u.default.createElement(a.default,{field:this.props.abstract,limit:200,className:"abstract",trackToggle:this.props.onToggle,fullTextClassName:"full-abstract"})):null}}]),t}();s.propTypes={abstract:o.default.object.isRequired,onToggle:o.default.func.isRequired},t.default=s},677:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=c(r(471)),o=c(r(400)),i=c(r(399)),u=c(r(1)),l=r(3),s=c(l);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.state={showMenu:!1},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.PureComponent),n(t,[{key:"triggerDropdownMenu",value:function(){this.setState({showMenu:!this.state.showMenu})}},{key:"render",value:function(){var e=(0,i.default)("icon-button dropdown-button dropdown-button--left-anchored",this.props.className);return s.default.createElement("span",{className:e,"data-selenium-selector":this.props.seleniumSelector},s.default.createElement("span",{className:"dropdown-button__content"},this.props.buttonContent),s.default.createElement(a.default,{content:this.props.dropdownContent,showMenu:this.state.showMenu},s.default.createElement("span",{className:"icon-wrapper"},s.default.createElement(o.default,{icon:"disclosure",width:"12",height:"12",className:"icon--down"}))))}}]),t}();f.propTypes={buttonContent:u.default.node.isRequired,className:u.default.string,dropdownContent:u.default.node.isRequired,seleniumSelector:u.default.string.isRequired},t.default=f},678:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=E(r(400)),i=E(r(413)),u=E(r(677)),l=E(r(414)),s=E(r(30)),c=E(r(429)),f=r(407),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(466)),p=E(r(270)),h=E(r(71)),m=E(r(31)),y=E(r(241)),g=E(r(399)),_=E(r(1)),b=r(3),v=E(b);function E(e){return e&&e.__esModule?e:{default:e}}function S(e){var t=void 0;switch(e){case p.default.ARXIV:case p.default.S2:case p.default.EDUCAUSE:t="fa-pdf";break;case p.default.ACM:case p.default.DOI:case p.default.MEDLINE:case p.default.IEEE:case p.default.SPRINGER:case p.default.NATURE:default:t="fa-link-out"}return{icon:t,width:"15",height:"15"}}var O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,b.PureComponent),a(t,[{key:"getLinkClickHandler",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=this.props.onLinkClick,a=this.context.weblabStore;return function(){a.trackEvent(c.default.READ_PAPER_CLICK),n.apply(void 0,t)}}},{key:"getPropsForLink",value:function(e){var t=e.linkType,r=e.url;return{onClick:this.getLinkClickHandler({linkType:t,linkUrl:r}),onContextMenu:this.getLinkClickHandler({linkType:t,linkUrl:r,isRightClick:!0}),target:"_blank",href:r}}},{key:"getPrimaryExternalLink",value:function(){var e=this.props,t=e.paper,r=e.className,a=t.links.first(),o=a.linkType,u=a.url,c=d.isPdfUrl(u);return v.default.createElement(l.default,{heapProps:{id:f.HEAP_PAPER_LINK_TARGET,"link-type":o,"direct-pdf-link":c,"unpaywall-link":!1,"primary-link":!0,"paper-id":t.id}},v.default.createElement(i.default,n({tagName:"a",className:(0,g.default)("paper-link",r),iconProps:S(o),seleniumSelector:"paper-link",text:s.default.getString("paper.link."+o)},this.getPropsForLink({linkType:o,url:u}))))}},{key:"getExternalLink",value:function(e){var t=e.linkType,r=e.url,a=s.default.getString("paper.link."+t);return v.default.createElement("li",{key:r},v.default.createElement("a",n({"data-selenium-selector":"paper-link",className:"flex-row-vcenter paper-link"},this.getPropsForLink({linkType:t,url:r})),v.default.createElement(o.default,S(t)),a))}},{key:"getExternalLinkList",value:function(e){var t=this;return v.default.createElement("ul",{className:"paper-link-list truncate-line"},e.map(function(e){return t.getExternalLink(e)}))}},{key:"renderLinks",value:function(e,t){return t.isEmpty()?e:v.default.createElement(u.default,{buttonContent:e,className:(0,g.default)("paper-link-dropdown",this.props.className),dropdownContent:this.getExternalLinkList(t),seleniumSelector:"paper-links-dropdown"})}},{key:"render",value:function(){var e=this.props.paper.links;return e.isEmpty()?null:this.renderLinks(this.getPrimaryExternalLink(),e.slice(1))}}]),t}();O.contextTypes={dispatcher:_.default.instanceOf(m.default).isRequired,router:_.default.object.isRequired,weblabStore:_.default.instanceOf(y.default).isRequired},O.propTypes={className:_.default.string,paper:_.default.instanceOf(h.default),onLinkClick:_.default.func.isRequired},t.default=O},679:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=y(r(553)),o=y(r(413)),i=y(r(678)),u=y(r(465)),l=y(r(30)),s=r(46),c=r(243),f=y(r(31)),d=y(r(268)),p=y(r(1)),h=r(3),m=y(h);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.showCiteModal=o.showCiteModal.bind(o),o.handlePaperLinkClick=o.handlePaperLinkClick.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,h.PureComponent),n(t,[{key:"showCiteModal",value:function(){var e=this.props,t=e.trackActionClick,r=e.paper;t("CITE"),this.context.dispatcher.dispatch((0,c.showModal)({id:s.ModalId.CITE,data:r}))}},{key:"handlePaperLinkClick",value:function(e){this.props.trackActionClick("PAPER_LINK",e)}},{key:"renderSlidesButton",value:function(){var e=this,t=this.props.paper.presentationUrl;return m.default.createElement(o.default,{iconProps:{icon:"slides",width:"15",height:"15"},tagName:"a",target:"_blank",href:t,onClick:function(){e.props.trackActionClick("VIEW_SLIDES")},className:"slides-button",text:l.default.getString("paper.action.slides")})}},{key:"render",value:function(){var e=this.props,t=e.trackActionClick,r=e.paper;return m.default.createElement("div",{className:"paper-actions flex-row"},m.default.createElement(i.default,{onLinkClick:this.handlePaperLinkClick,paper:r}),r.presentationUrl?this.renderSlidesButton():null,m.default.createElement(a.default,{paper:r,onClick:this.showCiteModal}),m.default.createElement(u.default,{paper:r,trackLibraryClick:t}))}}]),t}();g.contextTypes={dispatcher:p.default.instanceOf(f.default).isRequired,uiOptionsStore:p.default.instanceOf(d.default).isRequired},g.propTypes={paper:p.default.object.isRequired,trackActionClick:p.default.func.isRequired},t.default=g},680:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=d(r(400)),o=d(r(493)),i=d(r(30)),u=d(r(238)),l=d(r(65)),s=(d(r(285)),d(r(399))),c=(d(r(2)),d(r(1))),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.PureComponent),n(t,[{key:"handleChangeSort",value:function(e){var t="string"==typeof e?e:e.target.value;this.props.onChangeSort&&this.props.onChangeSort(t);var r=this.context.analyticsLocation;if(r){var n=u.default.getIn(r,"SORT_BY");(0,l.default)(o.default.create(n,{sort:t}))}else(0,l.default)(o.default.create(u.default.SORT_BY,{sort:t}))}},{key:"render",value:function(){var e=this.props.className,t=(0,s.default)(e,"search-sort flex-row-vcenter filter-bar__sort-selector");return f.createElement("div",{className:t},f.createElement("select",{className:"search-sort-select",onChange:this.handleChangeSort.bind(this),value:this.props.sort,"data-selenium-selector":"sort-select"},this.props.options.map(function(e){var t=i.default.getString("sort."+e.id+".label");return f.createElement("option",{value:e.id,key:e.id},i.default.getString("sort.label",t))})),f.createElement(a.default,{icon:"disclosure",height:"12",width:"12",className:"dropdown-arrow-icon"}))}}]),t}();p.contextTypes={analyticsLocation:c.default.object},t.default=p},681:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=E(r(471)),o=E(r(504)),i=E(r(463)),u=E(r(491)),l=E(r(400)),s=E(r(680)),c=r(237),f=(r(66),E(r(402))),d=E(r(238)),p=E(r(459)),h=E(r(252)),m=E(r(244)),y=(E(r(285)),E(r(65))),g=r(18),_=(r(66),E(r(458)),E(r(399))),b=(E(r(2)),E(r(1))),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function E(e){return e&&e.__esModule?e:{default:e}}var S=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(n))));return o.onChangeYearFilter=function(e,t){var r=o.context,n=r.queryStore,a=r.router;n.routeToYearRange(e,t,a)},o.onChangeSort=function(e){o.context.queryStore.routeToSort(e,o.context.router)},o.toggleHasPdf=function(){(0,y.default)(f.default.create(d.default.FACET_HAS_PDF,{documentCount:o.state.countOfPapersWithViewablePdf,action:o.state.isPdfFilterSelected?"disable":"enable"})),h.default.changeRouteForQuery(o.context.queryStore.getQuery().set("requireViewablePdf",!o.state.isPdfFilterSelected),o.context.router),o.setState({isPdfFilterSelected:!o.state.isPdfFilterSelected})},o.isFiltered=function(e){var t=o.context.queryStore.getQuery()[e];return"yearFilter"===e?t.min||t.max:!!t&&!!t.size>0},o.state=o.getStateFromQueryStore(),o.context.queryStore.registerComponent(o,function(){o.setState(o.getStateFromQueryStore())}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,v.PureComponent),n(t,[{key:"getStateFromQueryStore",value:function(){var e=this.context.queryStore.getQueryResponse().stats.get("countOfPapersWithViewablePdf")||0,t=this.context.queryStore.getQueryResponse().stats.get("years").size>1||!1;return{isPdfFilterSelected:this.context.queryStore.getQuery().requireViewablePdf,countOfPapersWithViewablePdf:e,shouldDisplayYearFilter:t,query:this.context.queryStore.getQuery(),response:this.context.queryStore.getQueryResponse(),yearFilter:this.context.queryStore.getQuery().yearFilter}}},{key:"getButtonLabel",value:function(e,t,r){var n=this.context.queryStore.getQuery()[e];return n.isEmpty()?t:1===n.size?(0,g.truncateText)(n.first(),r):(0,g.truncateText)(n.first(),r)+" +"+(n.size-1)}},{key:"renderDates",value:function(){var e=this.state,t=e.response,r=e.query,n=t.stats;return v.createElement(u.default,{analyticsEvent:d.default.Serp.YEAR_SLIDER,filterCallback:this.onChangeYearFilter,filters:n,histogramHeight:95,histogramWidth:221,yearFilter:r.yearFilter,showPresetButtons:!0})}},{key:"renderFilterList",value:function(e,t){return t.size>5?v.createElement(o.default,{label:p.default.findById(e).displayName,lessText:"Fewer"},function(r){return v.createElement(i.default,{maxLabelLength:30,collapsible:!1,filterType:e,displayDocCount:!0,filters:t.take(r?t.size:5),isFilterBar:!0})}):v.createElement(i.default,{maxLabelLength:30,displayDocCount:!0,collapsible:!1,filterType:e,filters:t,isFilterBar:!0})}},{key:"render",value:function(){var e=this.state,t=e.query,r=e.response,n=e.shouldDisplayYearFilter,o=e.isPdfFilterSelected,i=this.props.layoutOptions,u=r.stats,f=u.get("venues"),d=u.get("coAuthors");return v.createElement("div",{className:"filter-bar"},n&&v.createElement(a.default,{content:this.renderDates()},v.createElement("button",{className:{"filter-bar__button":!0,"filter-bar__button-selected":this.isFiltered("yearFilter")}},(0,c.getString)(function(e){return e.filterBar.filterLabels.date}),v.createElement(l.default,{icon:"disclosure",width:"12",height:"12",className:"dropdown-arrow-icon"}))),!d.isEmpty()&&v.createElement(a.default,{content:this.renderFilterList(p.default.COAUTHOR.id,d)},v.createElement("button",{className:{"filter-bar__button":!0,"filter-bar__button-selected":this.isFiltered("coAuthors")},"data-selenium-selector":"co-author-facet-filter"},this.getButtonLabel("coAuthors",(0,c.getString)(function(e){return e.filterBar.filterLabels.coAuthor}),20),v.createElement(l.default,{icon:"disclosure",width:"12",height:"12",className:"dropdown-arrow-icon"}))),!f.isEmpty()&&v.createElement(a.default,{content:this.renderFilterList(p.default.VENUE.id,f)},v.createElement("button",{className:{"filter-bar__button":!0,"filter-bar__button-selected":this.isFiltered("venues")}},this.getButtonLabel("venues",(0,c.getString)(function(e){return e.filterBar.filterLabels.venue}),25),v.createElement(l.default,{icon:"disclosure",width:"12",height:"12",className:"dropdown-arrow-icon"}))),v.createElement("button",{className:(0,_.default)({"filter-bar__button":!0,"filter-bar__has-pdf-button":!0,"filter-bar__button-selected":o}),onClick:this.toggleHasPdf},"Has PDF"),v.createElement("div",{className:"filter-bar__sort-selector-container standard-form"},v.createElement(s.default,{onChangeSort:this.onChangeSort,options:i.sorts,sort:t.sort})))}}]),t}();S.contextTypes={queryStore:b.default.instanceOf(m.default).isRequired,router:b.default.object.isRequired},t.default=S},682:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(405),o=f(r(45)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),u=r(237),l=f(r(1)),s=f(r(263)),c=f(r(456));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent),n(t,[{key:"render",value:function(){return i.createElement(a.FeatureGate,{feature:o.default.AuthorClaimAllowNewClaims},i.createElement(a.FeatureEnabled,null,i.createElement("div",{className:"author-claim-ad"},i.createElement("div",{className:"author-claim-ad__content-container"},i.createElement("div",{className:"author-claim-ad__beta__link"},i.createElement(c.default,{display:"link"})),i.createElement("div",{className:"author-claim-ad__title"},(0,u.getString)(function(e){return e.authorClaim.ad.headline})),i.createElement("div",{className:"author-claim-ad__description"},(0,u.getString)(function(e){return e.authorClaim.ad.description}))))))}}]),t}();d.contextTypes={iconStore:l.default.instanceOf(s.default).isRequired},t.default=d},683:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=k(r(682)),i=k(r(593)),u=k(r(481)),l=k(r(484)),s=k(r(681)),c=k(r(400)),f=k(r(588)),d=k(r(403)),p=k(r(480)),h=k(r(486)),m=k(r(433)),y=k(r(525)),g=k(r(477)),_=k(r(47)),b=k(r(244)),v=k(r(261)),E=(r(66),k(r(458)),k(r(268))),S=r(237),O=k(r(399)),P=k(r(2)),w=k(r(1)),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),N=k(r(250));function k(e){return e&&e.__esModule?e:{default:e}}var A=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.onClickShowPublications=function(){a.setState({showPublications:!0,showInfluenceGraph:!1})},a.onClickShowInfluenceGraph=function(){a.setState({showPublications:!1,showInfluenceGraph:!0})},a.loadPage=function(e){if(e!==a.state.query.page){var t=N.default.findDOMNode(a),r=null;t instanceof HTMLElement&&(r=_.default.offsetFromBody(t)),_.default.scrollTop(a.props.layoutOptions.scrollToTopOfPage?0:r),a.context.queryStore.routeToPage(e,a.context.router)}},a.state=n({showPublications:!0,showInfluenceGraph:!1},a.stateFromQueryStore()),r.queryStore.registerComponent(a,function(){a.setState(a.stateFromQueryStore())}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,C.PureComponent),a(t,[{key:"stateFromQueryStore",value:function(){var e=this.context.queryStore._state;return{queryStoreState:e,query:this.context.queryStore._query,response:this.context.queryStore._response,isFiltering:e===v.default.FILTERING}}},{key:"componentDidUpdate",value:function(e,t){if(!P.default.is(t.response,this.state.response)&&!this.state.response.results.isEmpty()){var r=_.default.scrollTop(),n=this.refs["search-result-"+(this.state.response.results.size-1)];if(n){var a=_.default.offsetFromBody(n);a<r&&_.default.scrollTop(a-20)}}}},{key:"renderResults",value:function(){var e=this.props.layoutOptions.searchResultLayout,t=this.state,r=t.query;return t.response.results.map(function(t,n){return C.createElement(y.default,{result:t,key:t.id,index:(r.page-1)*r.pageSize+n,ref:"search-result-"+n,layout:e})})}},{key:"renderNoResults",value:function(){var e=this.state.response.querySuggestions,t=!(e&&!e.isEmpty())?void 0:e.first().text;return C.createElement(l.default,{query:this.state.query.queryString,hasFacets:this.state.response.hasFacets(),suggestedQuery:t})}},{key:"renderAuthor",value:function(){var e=this.state,t=e.isFiltering,r=e.response,n=e.query,a=e.showPublications,l=e.showInfluenceGraph,d=this.props,y=d.layoutOptions,_=d.author,b=d.claimedAuthorId,v=r.results,E=r.matchedAuthors;return C.createElement(u.default,null,C.createElement("div",{className:"author-detail-card-sidebar"},C.createElement(g.default,{className:"filter",side:"left"},C.createElement(i.default,null))),C.createElement(p.default,{className:"results"},C.createElement("div",{className:"author-page-content-tabs"},C.createElement("ul",{className:"author-page-content-tabs__list"},C.createElement("li",{key:"publications",onClick:this.onClickShowPublications,className:(0,O.default)({"is-active":a})},C.createElement(c.default,{icon:"tab-papers",width:"9",height:"12"}),(0,S.getString)(function(e){return e.author.tabs.papers})),C.createElement("li",{key:"influence",onClick:this.onClickShowInfluenceGraph,className:(0,O.default)({"is-active":l})},C.createElement(c.default,{icon:"tab-influence",width:"21",height:"21"}),C.createElement("span",{className:"author-page-content-tab__influence-label"},(0,S.getString)(function(e){return e.author.tabs.influence}))))),E.isEmpty()?null:C.createElement(h.default,{queryString:n.queryString,authors:E}),a&&C.createElement(C.Fragment,null,C.createElement(s.default,{layoutOptions:y}),C.createElement("hr",{className:"author-page-divider"}),C.createElement("div",{className:"author-page-content__claim-ad"},!b&&!_.isClaimedByAuthor&&C.createElement(o.default,null)),C.createElement("div",{className:(0,O.default)("result-page",{"is-filtering":t})},v.isEmpty()?this.renderNoResults():this.renderResults()),C.createElement("div",{className:"flex-row"},r.totalPages>1&&C.createElement(m.default,{className:"flex-right",loadPage:this.loadPage,pageNumber:n.page,totalPages:r.totalPages}))),l&&C.createElement(f.default,{author:_})))}},{key:"render",value:function(){return this.state.queryStoreState===v.default.LOADING?C.createElement("section",{className:"content",role:"main",id:"main-content"},C.createElement("div",{className:"container loading-controls flex-row-vcenter"},C.createElement(d.default,{seleniumSelector:"icon-loading-serp"})," Loading results")):C.createElement("section",{className:"content"},this.renderAuthor())}}]),t}();A.contextTypes={queryStore:w.default.instanceOf(b.default).isRequired,router:w.default.object.isRequired,uiOptionsStore:w.default.instanceOf(E.default).isRequired},t.default=A},684:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=c(r(683)),o=c(r(238)),i=c(r(458)),u=c(r(24)),l=c(r(524)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.PureComponent),n(t,[{key:"render",value:function(){var e=this.props,t=e.author,r=e.claimedAuthorId,n=new i.default({showSortExplanation:!0,filtersExpandedByDefault:!0,showResultCount:!1,sortDisplayType:"tabs",scrollToTopOfPage:!1,searchResultLayout:{showSortStat:!0},sorts:u.default.authorPaperSearch()});return s.createElement("div",{className:"author-page-content-section"},s.createElement("div",{className:"author-publications-list"},s.createElement(a.default,{layoutOptions:n,author:t,claimedAuthorId:r})))}}]),t}();t.default=(0,l.default)(o.default.AuthorHomePage.Publications)(f)},685:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r(684)),o=l(r(400)),i=r(237),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.PureComponent),n(t,[{key:"render",value:function(){var e=this.props,t=e.author,r=e.claimedAuthorId;return u.createElement(u.Fragment,null,t.isClaimedBySignedInUser&&t.hasPendingCorrections&&u.createElement("div",{className:"author-page__corrections-pending"},u.createElement(o.default,{icon:"status-waiting"}),u.createElement("div",{className:"author-page__corrections-pending__label"},(0,i.getString)(function(e){return e.author.correctionPending.label}))),u.createElement("div",{className:"container author-page-content",role:"main"},u.createElement(a.default,{author:t,claimedAuthorId:r,ref:"author-search-results"})))}}]),t}();t.default=s},686:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=P(r(685)),i=P(r(411)),u=P(r(406)),l=P(r(589)),s=P(r(403)),c=r(248),f=r(20),d=P(r(240)),p=P(r(255)),h=P(r(239)),m=P(r(47)),y=P(r(6)),g=P(r(429)),_=P(r(244)),b=P(r(241)),v=P(r(1)),E=P(r(3)),S=P(r(250)),O=r(49);function P(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))));i.trackAuthorPageConversion=function(){i._userHasConverted||(i.context.weblabStore.trackEvent(g.default.AHP_CONVERSION),i._userHasConverted=!0)};var u=i.context,l=u.authStore,s=u.authorStore,c=u.queryStore;return i.state=n({},i.getStateFromAuthorStore(),i.getStateFromAuthStore()),s.registerComponent(i,function(){var e=i.state.author?i.state.author.id:null,t=s.loadingAuthorId;e&&t&&e!==t&&i.setConversionTimer(),i.setState(i.getStateFromAuthorStore)}),c.registerComponent(i,function(){i.setState({loading:s.isLoading()||c.isLoading()})}),l.registerComponent(i,function(){i.setState(i.getStateFromAuthStore())}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),a(t,null,[{key:"willRouteTo",value:function(e,t){e.authorStore.isNewOrCanonicalAuthor(t.params.authorId,t.params.slug)&&e.dispatcher.dispatch({actionType:y.default.actions.QUERY_UPDATED,query:{}});var r=[_.default.executeAHPQuery(e,t)];if(e.authStore.hasAuthenticatedUser()){var n=e.api,a=t.params.authorId;a&&r.push(n.findAlertByQueryTypeAndValue(c.QUERY_TYPE.AUTHOR_PAPER,a),n.findAlertByQueryTypeAndValue(c.QUERY_TYPE.AUTHOR_CITATION,a))}return Promise.all(r)}}]),a(t,[{key:"getStateFromAuthorStore",value:function(){var e=this.context,t=e.authorStore,r=e.queryStore;return{loading:t.isLoading()||r.isLoading(),author:t.author}}},{key:"getStateFromAuthStore",value:function(){return{claimedAuthorId:this.context.authStore.getClaimedAuthorId()}}},{key:"setConversionTimer",value:function(){clearTimeout(this._conversionTimer),this._conversionTimer=setTimeout(this.trackAuthorPageConversion,1e4),this._userHasConverted=!1}},{key:"renderLoading",value:function(){return E.default.createElement("div",{className:"flex-row-vcenter loading container",role:"main",id:"main-content"},E.default.createElement(s.default,{seleniumSelector:"icon-loading-ahp"}),"Loading author…")}},{key:"scrollToSearchResults",value:function(){var e=this.context.router,t=e.history,r=e.route,a=(0,f.searchStringToObj)(r.location.search);if(a.scrollToResults&&!this.state.loading){var o=S.default.findDOMNode(this.refs["author-search-results"]);o instanceof HTMLElement&&m.default.smoothScrollTo(o,function(){t.replace({pathname:r.location.pathname,search:(0,f.cleanAndStringifyQuery)(n({},a))})})}}},{key:"componentDidUpdate",value:function(){this.scrollToSearchResults()}},{key:"componentDidMount",value:function(){this.scrollToSearchResults(),this.setConversionTimer()}},{key:"componentWillUnmount",value:function(){clearTimeout(this._conversionTimer)}},{key:"render",value:function(){var e=this.state,t=e.author,r=e.claimedAuthorId;return E.default.createElement("div",{className:"author-page"},E.default.createElement(u.default,{showSearchBar:!0}),this.state.loading?this.renderLoading():E.default.createElement("div",{className:"author-page-layout"},E.default.createElement("div",{className:"content",onClick:this.trackAuthorPageConversion},E.default.createElement(o.default,{author:t,claimedAuthorId:r}))),(0,O.renderRoutes)(this.props.route.routes),this.state.loading?null:E.default.createElement(i.default,null))}}]),t}();w.contextTypes={api:v.default.instanceOf(h.default).isRequired,authStore:v.default.instanceOf(d.default).isRequired,authorStore:v.default.instanceOf(p.default).isRequired,queryStore:v.default.instanceOf(_.default).isRequired,router:v.default.object.isRequired,weblabStore:v.default.instanceOf(b.default).isRequired},t.default=w},687:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=v(r(482)),i=v(r(529)),u=v(r(527)),l=v(r(422)),s=r(237),c=r(451),f=r(483),d=r(410),p=v(r(7)),h=v(r(239)),m=v(r(240)),y=v(r(256)),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),_=v(r(1)),b=r(257);function v(e){return e&&e.__esModule?e:{default:e}}var E=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u.state=n({isSending:!1,errorMessage:null},u.getStateFromAuthStore(),u.getStateFromAuthorCorrectionsStore()),u.context.authStore.registerComponent(u,function(){u.setState(u.getStateFromAuthStore())}),u.context.authorCorrectionsStore.registerComponent(u,function(){u.setState(u.getStateFromAuthorCorrectionsStore())}),u.emitStepComplete=u.emitStepComplete.bind(u),u.onClickSubmit=u.onClickSubmit.bind(u),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,g.PureComponent),a(t,null,[{key:"getPageTitle",value:function(){return(0,s.getString)(function(e){return e.authorOnboarding.removePapersPage.pageTitle})}},{key:"getStepLabel",value:function(){return(0,s.getString)(function(e){return e.authorOnboarding.removePapersPage.stepLabel})}},{key:"requiresAuthentication",value:function(){return!0}}]),a(t,[{key:"getStateFromAuthStore",value:function(){return{authorId:this.context.authStore.getClaimedAuthorId()}}},{key:"getStateFromAuthorCorrectionsStore",value:function(){var e=this.context.authorCorrectionsStore;return{isFormDirty:e.hasPendingCorrections()||e.hasDraftPapers()}}},{key:"onClickSubmit",value:function(){var e=this;this.submitCorrections().then(function(){return e.emitStepComplete()}).catch(function(t){return e.onApiError(t)})}},{key:"onApiError",value:function(e){p.default.error("Error with API",e),this.setState({errorMessage:(0,s.getString)(function(e){return e.authorRemovePapers.error.apiSubmitFailed}),isSending:!1})}},{key:"emitStepComplete",value:function(){this.props.onStepComplete("AUTHOR_ONBOARDING_REMOVE_PAPERS")}},{key:"submitCorrections",value:async function(){var e=this.context,t=e.api,r=e.authorCorrectionsStore,n=this.state.authorId,a=r.getPendingCorrections();await(0,d.setState)(this,{isSending:!0}),await t.submitPaperAuthorCorrections({authorId:n,corrections:a}),await(0,d.setState)(this,{isSending:!1}),r.clearPendingCorrections()}},{key:"render",value:function(){var e=this.props,t=e.stepNum,r=e.numSteps,a=this.state,d=a.authorId,p=a.errorMessage,h=a.isFormDirty;return g.createElement("div",null,g.createElement("div",{className:"author-onboarding__page__content-block"},g.createElement("div",{className:"author-onboarding__step-num-label"},(0,s.getString)(function(e){return e.authorOnboarding.stepNumLabel},t,r)),g.createElement("h2",{className:"author-onboarding__step-label"},(0,s.getString)(function(e){return e.authorOnboarding.removePapersPage.stepLabel})),g.createElement("div",{className:"author-onboarding__step-description"},g.createElement(l.default,{content:(0,s.getString)(function(e){return e.authorOnboarding.removePapersPage.stepDescription})}))),g.createElement("hr",{className:"author-onboarding__divider"}),d&&g.createElement(i.default,{key:d,authorId:d}),g.createElement(o.default,{formError:p,leftContent:g.createElement(u.default,null)},g.createElement("button",n({className:"author-onboarding__banner__link-button"},(0,c.heapAuthorOnboardingSkipStep)(),{onClick:this.emitStepComplete}),(0,s.getString)(function(e){return e.authorOnboarding.removePapersPage.skipLabel})),g.createElement("span",{className:"author-onboarding__banner__button-spacer"}),g.createElement("button",n({className:"author-onboarding__banner__continue-button button button--primary"},(0,f.heapAuthorRemovePaperSubmit)(),{onClick:this.onClickSubmit}),(0,s.getString)(function(e){return e.authorOnboarding.banner.submitLabel}))),g.createElement(b.Prompt,{when:h,message:(0,s.getString)(function(e){return e.authorOnboarding.dirtyFormMessage})}))}}]),t}();E.contextTypes={router:_.default.object.isRequired,api:_.default.instanceOf(h.default).isRequired,authStore:_.default.instanceOf(m.default).isRequired,authorCorrectionsStore:_.default.instanceOf(y.default).isRequired},t.default=E},688:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.heapAuthorProfileSubmit=void 0;var n=r(449);t.heapAuthorProfileSubmit=function(){return(0,n.mkHeapAttributes)({id:"author_profile_submit"})}},689:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(237),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),o=function(e){return e&&e.__esModule?e:{default:e}}(r(399));t.default=function(e){var t=e.name,r=e.label,i=e.placeholder,u=e.error,l=e.value,s=e.onChange,c=e.isRequired;return a.createElement("label",{className:(0,o.default)("author-edit__field",{"author-edit__has-error":u})},a.createElement("div",{className:"author-edit__field__label"},a.createElement("span",{className:"author-edit__field__label-text"},r),!c&&a.createElement("span",{className:"author-edit__field__label-optional"},(0,n.getString)(function(e){return e.authorEdit.form.optional}))),a.createElement("div",{className:"author-edit__field__input"},a.createElement("input",{type:"text",name:t,className:"author-edit__field__input-text",value:l,onChange:s,placeholder:i}),a.createElement("div",{className:"author-edit__field__error"},u)))}},690:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=w(r(689)),i=w(r(482)),u=w(r(422)),l=r(237),s=r(451),c=r(688),f=r(410),d=w(r(239)),p=w(r(7)),h=w(r(52)),m=w(r(240)),y=w(r(255)),g=w(r(69)),_=r(510),b=r(509),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),E=r(245),S=w(r(1)),O=w(r(9)),P=r(257);function w(e){return e&&e.__esModule?e:{default:e}}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u.state=n({isSending:!1,isFormDirty:!1,formError:null,firstNameError:null,middleNamesError:null,lastNameError:null,affiliationError:null,orcidIdError:null,homepageUrlError:null},u.getStateFromAuthorOrAuthorProfileStore()),u.context.authorStore.registerComponent(u,function(){u.setState(u.getStateFromAuthorOrAuthorProfileStore())}),u.context.authorProfileStore.registerComponent(u,function(){u.state.isFormDirty||u.setState(u.getStateFromAuthorOrAuthorProfileStore())}),u.onChangeFirstName=u.onChangeText.bind(u,"firstName"),u.onChangeMiddleNames=u.onChangeText.bind(u,"middleNames"),u.onChangeLastName=u.onChangeText.bind(u,"lastName"),u.onChangeAffiliation=u.onChangeText.bind(u,"affiliation"),u.onChangeOrcidId=u.onChangeText.bind(u,"orcidId"),u.onChangeHomepageUrl=u.onChangeText.bind(u,"homepageUrl"),u.onClickSkip=u.onClickSkip.bind(u),u.onClickSubmit=u.onClickSubmit.bind(u),u.onSubmitForm=u.onSubmitForm.bind(u),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,v.PureComponent),a(t,null,[{key:"getPageTitle",value:function(){return(0,l.getString)(function(e){return e.authorOnboarding.profilePage.pageTitle})}},{key:"getStepLabel",value:function(){return(0,l.getString)(function(e){return e.authorOnboarding.profilePage.stepLabelWithoutName})}},{key:"requiresAuthentication",value:function(){return!0}},{key:"willRouteTo",value:async function(e){var t=e.authStore,r=e.api,n=t.getClaimedAuthorId();return(0,O.default)(n,"Claimed author missing"),Promise.all([r.fetchAuthorProfile({authorId:n}),r.fetchAuthorDetail(n,null,!1)])}}]),a(t,[{key:"getStateFromAuthorOrAuthorProfileStore",value:function(){var e=this.context.authorProfileStore.getAuthorProfile();if(e){var t=e.affiliations.isEmpty?"":e.affiliations.join("; "),r=e.middleNames.isEmpty?"":e.middleNames.join(" ");return{firstNameValue:e.firstName||"",middleNamesValue:r,lastNameValue:e.lastName||"",affiliationValue:t,orcidIdValue:e.orcidId||"",homepageUrlValue:e.homepageUrl||"",fullNameValue:e.fullName||""}}var n=this.context.authorStore.author;if(n){var a=n.affiliations.isEmpty?"":n.affiliations.join("; "),o=n.middleNames.isEmpty?"":n.middleNames.join(" ");return{firstNameValue:n.firstName||"",middleNamesValue:o,lastNameValue:n.lastName||"",affiliationValue:a,orcidIdValue:n.orcidId||"",homepageUrlValue:n.homepageUrl||"",fullNameValue:""}}return{firstNameValue:"",middleNamesValue:"",lastNameValue:"",affiliationValue:"",orcidIdValue:"",homepageUrlValue:"",fullNameValue:""}}},{key:"validateFormState",value:function(){var e=this.state,t=e.lastNameValue,r=e.orcidIdValue,n=e.homepageUrlValue,a=null,o=null,i=null;return t.trim()||(a=(0,l.getString)(function(e){return e.authorEdit.error.lastNameMissing})),r&&(b.orcidPattern.test(r)||(o=(0,l.getString)(function(e){return e.authorEdit.error.orcidIdInvalid}))),n&&(h.default.parse(n).host&&_.homepageUrlPattern.test(n)||(i=(0,l.getString)(function(e){return e.authorEdit.error.homepageUrlInvalid}))),{firstNameError:null,middleNamesError:null,lastNameError:a,affiliationError:null,orcidIdError:o,homepageUrlError:i}}},{key:"updateAuthorProfile",value:async function(){var e=this.validateFormState();if(this.setState(e),!!Object.values(e).find(function(e){return null!==e}))p.default.warn("Could not save do to errors",e);else{var t={authorId:this.context.authorStore.author.id,lastName:this.state.lastNameValue.trim(),middleNames:this.state.middleNamesValue.toString().split(" ").map(function(e){return e.trim()}),firstName:this.state.firstNameValue.trim(),affiliation:this.state.affiliationValue.toString().split(";").map(function(e){return e.trim()}),orcidId:this.state.orcidIdValue.trim(),homepageUrl:this.state.homepageUrlValue.trim()};p.default.info("Saving author profile",t),await(0,f.setState)(this,{isSending:!0,formError:null});var r=(0,f.delayFor)(0);try{await this.context.api.updateAuthorProfile(t)}catch(e){return void await(0,f.setState)(this,{isSending:!1,formError:(0,l.getString)(function(e){return e.authorEdit.error.apiFailed})})}await r,await(0,f.setState)(this,{isSending:!1}),this.emitStepComplete()}}},{key:"emitStepComplete",value:function(){this.props.onStepComplete("AUTHOR_ONBOARDING_PROFILE")}},{key:"onChangeCheckbox",value:function(e,t){this.setState(C({isFormDirty:!0},e+"Value",!!t.currentTarget.checked))}},{key:"onChangeText",value:function(e,t){var r;this.setState((C(r={isFormDirty:!0},e+"Error",null),C(r,e+"Value",t.currentTarget.value),r))}},{key:"onClickSkip",value:function(e){e.preventDefault(),this.emitStepComplete()}},{key:"onClickSubmit",value:function(e){e.preventDefault(),this.updateAuthorProfile()}},{key:"onSubmitForm",value:function(e){e.preventDefault(),this.updateAuthorProfile()}},{key:"getHeaderLabel",value:function(e){return e?(0,l.getString)(function(e){return e.authorOnboarding.profilePage.stepLabelWithName},e):(0,l.getString)(function(e){return e.authorOnboarding.profilePage.stepLabelWithoutName})}},{key:"render",value:function(){if(!this.context.authorStore.author)return null;var e=this.props,t=e.stepNum,r=e.numSteps,a=this.state,f=a.formError,d=a.firstNameError,p=a.firstNameValue,h=a.middleNamesError,m=a.middleNamesValue,y=a.lastNameError,g=a.lastNameValue,_=a.affiliationError,b=a.affiliationValue,E=a.orcidIdError,S=a.orcidIdValue,O=a.homepageUrlError,w=a.homepageUrlValue,C=a.fullNameValue,N=a.isFormDirty;return v.createElement("div",{className:"author-edit"},v.createElement("div",{className:"author-onboarding__page__content-block"},v.createElement("div",{className:"author-onboarding__step-num-label"},(0,l.getString)(function(e){return e.authorOnboarding.stepNumLabel},t,r)),v.createElement("h2",{className:"author-onboarding__step-label"},this.getHeaderLabel(C)),v.createElement("div",{className:"author-onboarding__step-description"},v.createElement(u.default,{content:(0,l.getString)(function(e){return e.authorOnboarding.profilePage.stepDescription})}))),v.createElement("hr",{className:"author-edit__divider"}),v.createElement("form",{className:"author-edit__form",onSubmit:this.onSubmitForm},v.createElement("div",{className:"author-onboarding__page__content-block"},v.createElement(o.default,{name:"firstName",label:(0,l.getString)(function(e){return e.authorEdit.form.firstNameLabel}),placeholder:(0,l.getString)(function(e){return e.authorEdit.form.firstNamePlaceholder}),value:p,error:d,onChange:this.onChangeFirstName,isRequired:!1}),v.createElement(o.default,{name:"middleNames",label:(0,l.getString)(function(e){return e.authorEdit.form.middleNamesLabel}),placeholder:(0,l.getString)(function(e){return e.authorEdit.form.middleNamesPlaceholder}),value:m,error:h,onChange:this.onChangeMiddleNames,isRequired:!1}),v.createElement(o.default,{name:"lastName",label:(0,l.getString)(function(e){return e.authorEdit.form.lastNameLabel}),placeholder:(0,l.getString)(function(e){return e.authorEdit.form.lastNamePlaceholder}),value:g,error:y,onChange:this.onChangeLastName,isRequired:!0}),v.createElement("div",{className:"author-onboarding__field__description"},v.createElement("span",{className:"author-onboarding__field__description-text"},(0,l.getString)(function(e){return e.authorEdit.form.applyToPapersDescription})))),v.createElement("hr",{className:"author-edit__divider"}),v.createElement("div",{className:"author-onboarding__page__content-block"},v.createElement(o.default,{name:"affiliation",label:(0,l.getString)(function(e){return e.authorEdit.form.affiliationLabel}),placeholder:(0,l.getString)(function(e){return e.authorEdit.form.affiliationPlaceholder}),value:b,error:_,onChange:this.onChangeAffiliation,isRequired:!1}),v.createElement(o.default,{name:"orcidId",label:(0,l.getString)(function(e){return e.authorEdit.form.orcidIdLabel}),placeholder:(0,l.getString)(function(e){return e.authorEdit.form.orcidIdPlaceholder}),value:S,error:E,onChange:this.onChangeOrcidId,isRequired:!1}),v.createElement(o.default,{name:"homepageUrl",label:(0,l.getString)(function(e){return e.authorEdit.form.homepageUrlLabel}),placeholder:(0,l.getString)(function(e){return e.authorEdit.form.homepageUrlPlaceholder}),value:w,error:O,onChange:this.onChangeHomepageUrl,isRequired:!1})),v.createElement(i.default,{formError:f},v.createElement("button",n({className:"author-onboarding__banner__link-button"},(0,s.heapAuthorOnboardingSkipStep)(),{onClick:this.onClickSkip}),(0,l.getString)(function(e){return e.authorOnboarding.profilePage.skipLabel})),v.createElement("span",{className:"author-onboarding__banner__button-spacer"}),v.createElement("button",n({className:"author-onboarding__banner__continue-button button button--primary"},(0,c.heapAuthorProfileSubmit)(),{onClick:this.onClickSubmit}),(0,l.getString)(function(e){return e.authorOnboarding.banner.submitLabel})))),v.createElement(P.Prompt,{when:N,message:(0,l.getString)(function(e){return e.authorOnboarding.dirtyFormMessage})}))}}]),t}();N.contextTypes={api:S.default.instanceOf(d.default).isRequired,authorStore:S.default.instanceOf(y.default).isRequired,authorProfileStore:S.default.instanceOf(g.default).isRequired,authStore:S.default.instanceOf(m.default).isRequired,dispatcher:S.default.instanceOf(E.Dispatcher).isRequired,router:S.default.object.isRequired},t.default=N},691:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=d(r(456)),i=d(r(400)),u=d(r(401)),l=r(237),s=r(451),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),f=d(r(399));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.PureComponent),a(t,[{key:"renderStep",value:function(e){var t=e.stepNum,r=e.isActive,a=e.hasCompleted,o=e.linkRouteName,l=e.label,d=c.createElement(c.Fragment,null,c.createElement("div",{className:"author-onboarding-nav__step-num"},a?c.createElement(i.default,{className:"author-onboarding-nav__step-num__check",icon:"check",height:"8",width:"8"}):c.createElement("div",{className:"author-onboarding-nav__step-num__number"},t)),c.createElement("div",{className:"author-onboarding-nav__step-label"},l));return c.createElement("li",{key:t,className:(0,f.default)({"author-onboarding-nav__step":!0,"author-onboarding-nav__is-active":r,"author-onboarding-nav__has-completed":a})},a?c.createElement(u.default,n({to:o},(0,s.heapAuthorOnboardingNav)({"route-name":o}),{className:"author-onboarding-nav__step-layout"}),d):c.createElement("div",{className:"author-onboarding-nav__step-layout"},d))}},{key:"render",value:function(){var e=this,t=this.props.steps;return c.createElement("div",{className:"author-onboarding-nav"},c.createElement("div",{className:"author-onboarding-nav__beta-tag"},c.createElement(o.default,{display:"link",openNewTab:!0})),c.createElement("h3",{className:"author-onboarding-nav__headline"},(0,l.getString)(function(e){return e.authorOnboarding.nav.headline})),c.createElement("nav",{className:"author-onboarding-nav__nav"},c.createElement("ol",{className:"author-onboarding-nav__step-list"},t.map(function(t){return e.renderStep(t)}))))}}]),t}();t.default=p},692:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.getStepNum=T;var o=k(r(406)),i=k(r(691)),u=r(237),l=r(451),s=r(16),c=r(410),f=r(243),d=k(r(239)),p=k(r(240)),h=k(r(45)),m=r(16),y=k(m),g=k(r(31)),_=k(r(48)),b=k(r(241)),v=k(r(7)),E=k(r(401)),S=r(46),O=N(r(2)),P=N(r(3)),w=k(r(1)),C=r(49);function N(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function k(e){return e&&e.__esModule?e:{default:e}}var A=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(n))));return o.onClickContact=function(e){e.preventDefault(),o.context.dispatcher.dispatch((0,f.showModal)({id:S.ModalId.FEEDBACK}))},o.state={completedSteps:O.Set()},o.onStepComplete=o.onStepComplete.bind(o),o.onClickCancel=o.onClickCancel.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,P.PureComponent),a(t,null,[{key:"getPageTitle",value:function(){return(0,u.getString)(function(e){return e.authorEdit.pageTitle.withoutName})}},{key:"requiresAuthentication",value:function(){return!0}},{key:"willRouteTo",value:async function(e,t){var r=e.api,n=e.authStore,a=e.weblabStore,o=n.getClaimedAuthorId();return o&&a.isFeatureEnabled(h.default.AuthorClaim)?t.path===y.default.AUTHOR_ONBOARDING?new _.default({routeName:"AUTHOR_ONBOARDING_PROFILE",replace:!0,status:302}):void await r.fetchAuthorProfile({authorId:o}):new _.default({routeName:"HOME",replace:!0,status:302})}}]),a(t,[{key:"getSteps",value:function(){var e,t=this,r=this.context.router,n=this.props.route,a=null!=(e=(0,C.matchRoutes)(n.routes,r.route.location.pathname))&&null!=(e=e[0])&&null!=(e=e.route)?e.path:e;return n.routes.map(function(e,r){var n,o=(0,m.getRouteNameForPath)(e.path)||"AUTHOR_ONBOARDING";return{isActive:e.path===a,hasCompleted:t.state.completedSteps.has(o),label:((null!=(n=e)&&null!=(n=n.component)?n.getStepLabel:n)||function(){})()||"Step "+(r+1),linkRouteName:o,stepNum:r+1}})}},{key:"completeStep",value:async function(e){var t=this.state.completedSteps;t.has(e)||await(0,c.setState)(this,{completedSteps:t.add(e)});var r=this.getSteps(),n=r.findIndex(function(e){return!e.hasCompleted}),a=n<0?null:r[n];a&&this.context.router.history.push((0,s.makePath)({routeName:a.linkRouteName}))}},{key:"onStepComplete",value:function(e){this.completeStep(e).catch(function(e){return v.default.error(e)})}},{key:"onClickCancel",value:function(){var e=this.props.onCancel;e&&e()}},{key:"render",value:function(){var e=this.getSteps(),t=this.context.authStore.getClaimedAuthorId();return P.createElement("div",{className:"author-onboarding",ref:"top"},P.createElement(o.default,{showSearchBar:!0}),P.createElement("div",{className:"author-onboarding__columns"},P.createElement("div",{className:"author-onboarding__column author-onboarding__column__nav"},P.createElement("div",{className:"author-onboarding__nav"},P.createElement(i.default,{steps:e}),P.createElement("div",{className:"author-onboarding__nav__links"},t?P.createElement(E.default,n({to:"AUTHOR_PROFILE_BY_ID",params:{authorId:t},className:"author-onboarding__nav__link"},(0,l.heapAuthorOnboardingSkipAll)(),{onClick:this.onClickCancel}),(0,u.getString)(function(e){return e.authorOnboarding.banner.cancelLabel})):P.createElement(E.default,n({to:"HOME",className:"author-onboarding__nav__link"},(0,l.heapAuthorOnboardingSkipAll)(),{onClick:this.onClickCancel}),(0,u.getString)(function(e){return e.authorOnboarding.banner.cancelLabel})),P.createElement("a",{className:"author-onboarding__nav__link",onClick:this.onClickContact},(0,u.getString)(function(e){return e.authorOnboarding.banner.contactLabel}))))),P.createElement("div",{className:"author-onboarding__column author-onboarding__page"},(0,C.renderRoutes)(this.props.route.routes,{onStepComplete:this.onStepComplete,stepNum:T(e),numSteps:e.length}))))}}]),t}();function T(e){var t=e.find(function(e){return e.isActive});return t?t.stepNum:1}A.contextTypes={api:w.default.instanceOf(d.default).isRequired,authStore:w.default.instanceOf(p.default).isRequired,dispatcher:w.default.instanceOf(g.default).isRequired,router:w.default.object.isRequired,weblabStore:w.default.instanceOf(b.default).isRequired},t.default=A},693:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r(400)),o=r(237),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),u=l(r(401));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent),n(t,[{key:"render",value:function(){var e=this.props.authorId;return i.createElement("div",{className:"corrections-summary"},i.createElement("div",{className:"corrections-summary__section"},i.createElement("div",{className:"correction-summary__blank-state"},i.createElement("div",{className:"correction-summary__blank-state__content"},i.createElement(a.default,{className:"correction-summary__blank-state__icon",icon:"user-with-checkmark",width:"70",height:"87.5"}),i.createElement("div",{className:"correction-summary__blank-state__description"},(0,o.getString)(function(e){return e.correctionSummary.noCorrections.label})),e&&i.createElement("div",{className:"correction-summary__blank-state__author-page-button"},i.createElement(u.default,{to:"AUTHOR_PROFILE_BY_ID",params:{authorId:e},className:"button button--secondary"},(0,o.getString)(function(e){return e.correctionSummary.noCorrections.authorPageButton})))))))}}]),t}();t.default=s},694:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=_(r(531)),i=r(405),u=_(r(401)),l=r(237),s=_(r(240)),c=_(r(265)),f=_(r(404)),d=_(r(45)),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),h=_(r(1)),m=(_(r(260)),_(r(693))),y=r(452),g=_(y);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.state=n({},a.getStateFromAuthStore(),a.getStateFromCorrectionsStore()),a.context.authStore.registerComponent(a,function(){a.setState(a.getStateFromAuthStore())}),a.context.correctionsStore.registerComponent(a,function(){a.setState(a.getStateFromCorrectionsStore())}),a.props.onStepComplete("AUTHOR_ONBOARDING_COMPLETE"),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.PureComponent),a(t,null,[{key:"getPageTitle",value:function(){return(0,l.getString)(function(e){return e.authorOnboarding.completePage.pageTitle})}},{key:"getStepLabel",value:function(){return(0,l.getString)(function(e){return e.authorOnboarding.completePage.stepLabel})}},{key:"requiresAuthentication",value:function(){return!0}},{key:"willRouteTo",value:async function(e){var t=e.api,r=e.authStore.getClaimedAuthorId();if(r)return Promise.all([t.fetchAuthorCorrectionsForAuthor({authorId:r}),t.fetchPaperAuthorCorrectionsForAuthor({authorId:r,includePaperModel:"PaperLite"})])}}]),a(t,[{key:"getStateFromAuthStore",value:function(){return{claimedAuthorId:this.context.authStore.getClaimedAuthorId()}}},{key:"getStateFromCorrectionsStore",value:function(){return{hasPendingCorrections:this.context.correctionsStore.hasCorrections()}}},{key:"render",value:function(){var e=this.props,t=e.stepNum,r=e.numSteps,n=this.state,a=n.hasPendingCorrections,s=n.claimedAuthorId;return p.createElement("div",{className:"author-onboarding__page__content-block"},p.createElement("div",{className:"author-onboarding__step-num-label"},(0,l.getString)(function(e){return e.authorOnboarding.stepNumLabel},t,r)),p.createElement("h2",{className:"author-onboarding__step-label"},(0,l.getString)(function(e){return e.authorOnboarding.completePage.stepLabel})),a?p.createElement(o.default,null):p.createElement(m.default,{authorId:s}),p.createElement(g.default,null,p.createElement(y.AccountBarRight,null,p.createElement(i.FeatureGate,{feature:d.default.AuthorOnboardingSurvey},p.createElement(i.FeatureEnabled,null,p.createElement(f.default,{className:"author-onboarding__page__survey-link-button button button--secondary",href:"https://forms.gle/t3pK2tLREz2URLMe7"},(0,l.getString)(function(e){return e.authorOnboarding.completePage.surveyLabel})))),p.createElement("span",{className:"author-onboarding__banner__button-spacer"}),p.createElement(u.default,{className:"author-onboarding__page__author-profile-link-button button button--primary",to:"AUTHOR_PROFILE_BY_ID",params:{authorId:s}},(0,l.getString)(function(e){return e.account.page.corrections.authorPageLink})))))}}]),t}();b.contextTypes={authStore:h.default.instanceOf(s.default).isRequired,correctionsStore:h.default.instanceOf(c.default).isRequired,router:h.default.object.isRequired},t.default=b},695:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=E(r(535)),i=E(r(533)),u=E(r(482)),l=E(r(422)),s=r(237),c=r(437),f=r(451),d=r(8),p=r(410),h=E(r(7)),m=E(r(239)),y=E(r(240)),g=E(r(256)),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),b=E(r(1)),v=r(257);function E(e){return e&&e.__esModule?e:{default:e}}var S=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u.state=n({isSending:!1,errorMessage:null,hasAttemptedSubmit:!1},u.getStateFromAuthStore(),u.getStateFromAuthorCorrectionsStore()),u.context.authStore.registerComponent(u,function(){u.setState(u.getStateFromAuthStore())}),u.context.authorCorrectionsStore.registerComponent(u,function(){u.setState(u.getStateFromAuthorCorrectionsStore())}),u.emitStepComplete=u.emitStepComplete.bind(u),u.onClickSubmit=u.onClickSubmit.bind(u),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_.PureComponent),a(t,null,[{key:"getPageTitle",value:function(){return(0,s.getString)(function(e){return e.authorOnboarding.addPapersPage.pageTitle})}},{key:"getStepLabel",value:function(){return(0,s.getString)(function(e){return e.authorOnboarding.addPapersPage.stepLabel})}},{key:"requiresAuthentication",value:function(){return!0}}]),a(t,[{key:"getStateFromAuthStore",value:function(){return{authorId:this.context.authStore.getClaimedAuthorId()}}},{key:"getStateFromAuthorCorrectionsStore",value:function(){var e=this.context.authorCorrectionsStore,t=e.hasDraftPapers();return{isFormDirty:e.hasPendingCorrections()||t,hasDraftPapers:t}}},{key:"onClickSubmit",value:function(){var e=this;this.state.hasDraftPapers?this.setState({hasAttemptedSubmit:!0,errorMessage:(0,s.getString)(function(e){return e.authorAddPapers.error.papersInDraft})},function(){(0,d.isBrowser)()&&e.scrollToPaper(e.context.authorCorrectionsStore.getDraftPaperIds().first())}):this.setState({hasAttemptedSubmit:!0},function(){e.submitCorrections().then(function(){return e.emitStepComplete()}).catch(function(t){return e.onApiError(t)})})}},{key:"scrollToPaper",value:function(e){if(!e)return!1;var t=document.querySelector('.author-add-papers__paper[data-paper-id="'+e+'"]');return!!t&&(t.scrollIntoView({behavior:"smooth"}),!0)}},{key:"onApiError",value:function(e){h.default.error("Error with API",e),this.setState({errorMessage:(0,s.getString)(function(e){return e.authorRemovePapers.error.apiSubmitFailed}),isSending:!1})}},{key:"emitStepComplete",value:function(){this.props.onStepComplete("AUTHOR_ONBOARDING_ADD_PAPERS")}},{key:"submitCorrections",value:async function(){var e=this.context,t=e.api,r=e.authorCorrectionsStore,n=this.state.authorId,a=r.getPendingCorrections();await(0,p.setState)(this,{isSending:!0}),await t.submitPaperAuthorCorrections({authorId:n,corrections:a}),await(0,p.setState)(this,{isSending:!1}),r.clearPendingCorrections()}},{key:"render",value:function(){var e=this.props,t=e.stepNum,r=e.numSteps,a=this.state,d=a.authorId,p=a.errorMessage,h=a.hasAttemptedSubmit,m=a.hasDraftPapers,y=a.isFormDirty;return _.createElement("div",null,_.createElement("div",{className:"author-onboarding__page__content-block"},_.createElement("div",{className:"author-onboarding__step-num-label"},(0,s.getString)(function(e){return e.authorOnboarding.stepNumLabel},t,r)),_.createElement("h2",{className:"author-onboarding__step-label"},(0,s.getString)(function(e){return e.authorOnboarding.addPapersPage.stepLabel})),_.createElement("div",{className:"author-onboarding__step-description"},_.createElement(l.default,{content:(0,s.getString)(function(e){return e.authorOnboarding.addPapersPage.stepDescription})}))),_.createElement("hr",{className:"author-onboarding__divider"}),d&&_.createElement(o.default,{authorId:d,showDraftAsError:h&&m}),d?_.createElement(i.default,{authorId:d}):null,_.createElement(u.default,{formError:p},_.createElement("button",n({className:"author-onboarding__banner__link-button"},(0,f.heapAuthorOnboardingSkipStep)(),{onClick:this.emitStepComplete}),(0,s.getString)(function(e){return e.authorOnboarding.addPapersPage.skipLabel})),_.createElement("span",{className:"author-onboarding__banner__button-spacer"}),_.createElement("button",n({className:"author-onboarding__banner__continue-button button button--primary"},(0,c.heapAuthorAddPaperSubmit)(),{onClick:this.onClickSubmit}),(0,s.getString)(function(e){return e.authorOnboarding.banner.submitLabel}))),_.createElement(v.Prompt,{when:y,message:(0,s.getString)(function(e){return e.authorOnboarding.dirtyFormMessage})}))}}]),t}();S.contextTypes={router:b.default.object.isRequired,api:b.default.instanceOf(m.default).isRequired,authStore:b.default.instanceOf(y.default).isRequired,authorCorrectionsStore:b.default.instanceOf(g.default).isRequired},t.default=S},696:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=m(r(239)),i=m(r(240)),u=r(237),l=m(r(413)),s=m(r(401)),c=m(r(51)),f=(m(r(53)),r(410)),d=m(r(0)),p=m(r(1)),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function m(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u.onChangeInput=u.onChangeInput.bind(u),u.onClickApprove=u.onClickApprove.bind(u),u.onClickDeny=u.onClickDeny.bind(u),u.state=n({},u.getStateFromAuthStore(),{approveDisabled:!1,denyDisabled:!1,newModerationStatus:null,moderatorNotes:null,errorMessage:null}),u.context.authStore.registerComponent(u,function(){u.setState(u.getStateFromAuthStore())}),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,h.PureComponent),a(t,[{key:"getStateFromAuthStore",value:function(){return{moderatorEmail:this.context.authStore.getEmail()}}},{key:"onClickApprove",value:function(){var e=this;this.setState({denyDisabled:!1,approveDisabled:!0,newModerationStatus:c.default.Approved},function(){return e.handleClickEvent()})}},{key:"onClickDeny",value:function(){var e=this;this.setState({denyDisabled:!0,approveDisabled:!1,newModerationStatus:c.default.Denied},function(){return e.handleClickEvent()})}},{key:"onChangeInput",value:function(e){this.setState({moderatorNotes:e.currentTarget.value})}},{key:"handleClickEvent",value:function(){this.handleModeration()}},{key:"_missingParamError",value:function(e){throw new Error("Operation failed, missing param: "+e)}},{key:"handleModeration",value:async function(){var e=this.state.moderatorNotes?this.state.moderatorNotes.trim():null,t=this.state.newModerationStatus?this.state.newModerationStatus.toString():this._missingParamError("moderationStatus"),r={paperAuthorCorrectionId:this.props.paperAuthorCorrection.id,moderationStatus:t,moderatorNotes:e,moderator:this.state.moderatorEmail.trim()};await(0,f.setState)(this,{errorMessage:null});try{await this.context.api.updateModerationStatusForPaperAuthorCorrection(r)}catch(e){await(0,f.setState)(this,{errorMessage:(0,u.getString)(function(e){return e.authorClaimModeration.error.apiFailed})})}}},{key:"renderTop",value:function(){var e=this.props.paperAuthorCorrection;return h.createElement("tr",{className:"authorship-moderation__table__details-row"},h.createElement("td",null,(0,d.default)(1e3*e.createdAtUnix).format("LLL")),h.createElement("td",null,e.correctionType),h.createElement("td",null,h.createElement(s.default,{to:"AUTHOR_PROFILE_BY_ID",params:{authorId:e.authorId}},h.createElement("em",null,e.authorId))),h.createElement("td",null,h.createElement(s.default,{to:"PAPER_DETAIL_BY_ID",params:{paperId:e.paperHash}},h.createElement("em",null,e.paperHash.slice(-6)))),h.createElement("td",{className:"authorship-moderation__button-row"},h.createElement(l.default,{onClick:this.onClickApprove,disabled:this.state.approveDisabled,className:"authorship-moderation__button__approve button button--primary",text:(0,u.getString)(function(e){return e.authorClaimModeration.buttons.approveLabel}),iconProps:{icon:"thumbs-up",width:"16",height:"16"},"data-selenium-selector":"save-moderation-status-button"}),h.createElement(l.default,{onClick:this.onClickDeny,disabled:this.state.denyDisabled,className:"authorship-moderation__button__deny button button--primary",text:(0,u.getString)(function(e){return e.authorClaimModeration.buttons.denyLabel}),iconProps:{icon:"thumbs-down",width:"16",height:"16"},"data-selenium-selector":"save-moderation-status-button"})),h.createElement("td",{rowSpan:"2"},h.createElement("textarea",{typs:"textarea",name:"moderatorNotes",className:"authorship-moderation__field__moderator-notes__input-text",onChange:this.onChangeInput})))}},{key:"renderBottom",value:function(){return h.createElement("tr",null,h.createElement("td",{colSpan:"100",className:"authorship-moderation__table__correction-td"},"[ THIS IS WHERE WE WILL RENDER THE CORRECTION TO BE APPLIED ]"))}},{key:"render",value:function(){return h.createElement(h.Fragment,null,this.renderTop(),this.renderBottom())}}]),t}();y.propTypes={paperAuthorCorrection:p.default.object.isRequired},y.contextTypes={api:p.default.instanceOf(o.default).isRequired,authStore:p.default.instanceOf(i.default).isRequired},t.default=y},697:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=d(r(239)),i=d(r(282)),u=d(r(696)),l=r(237),s=(d(r(53)),f(r(2)),f(r(3))),c=d(r(1));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u.state=n({},u.getStateFromAuthorshipModerationStore()),u.context.authorshipModerationStore.registerComponent(u,function(){u.setState(u.getStateFromAuthorshipModerationStore())}),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.PureComponent),a(t,null,[{key:"getPageTitle",value:function(){return(0,l.getString)(function(e){return e.authorshipModeration.pageTitle})}},{key:"requiresAuthentication",value:function(){return!0}}]),a(t,[{key:"getStateFromAuthorshipModerationStore",value:function(){return{pendingCorrections:this.context.authorshipModerationStore.getPendingPaperAuthorCorrections()}}},{key:"render",value:function(){var e=this.state.pendingCorrections;return s.createElement("div",{className:"authorship-moderation"},s.createElement("div",{className:"authorship-moderation__columns"},s.createElement("main",{className:"authorship-moderation__column authorship-moderation__main"},s.createElement("h1",{className:"authorship-moderation__headline"},"Authorship Correction Moderation"),e.size>0?s.createElement("table",{className:"authorship-moderation__table"},s.createElement("thead",{className:"authorship-moderation__table-header"},s.createElement("tr",null,s.createElement("th",null,"CREATED"),s.createElement("th",null,"TYPE"),s.createElement("th",null,"AUTHOR"),s.createElement("th",null,"PAPER"),s.createElement("th",null,"ACTION"),s.createElement("th",null,"NOTES"))),s.createElement("tbody",null,e.map(function(e){return s.createElement(u.default,{paperAuthorCorrection:e,key:e.id})}))):s.createElement("h2",null,"Cool, no pending authorship corrections!"))))}}]),t}();p.contextTypes={api:c.default.instanceOf(o.default).isRequired,router:c.default.object.isRequired,authorshipModerationStore:c.default.instanceOf(i.default).isRequired},t.default=p},698:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(r(239)),o=r(237),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),u=s(r(1)),l=s(r(265));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))));return i.state={},i.context.correctionsStore.registerComponent(i,function(){i.setState(i.getStateFromCorrectionsStore())}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent),n(t,null,[{key:"getPageTitle",value:function(){return(0,o.getString)(function(e){return e.authorCorrectionsTool.pageTitle})}},{key:"requiresAuthentication",value:function(){return!0}}]),n(t,[{key:"getStateFromCorrectionsStore",value:function(){return{}}},{key:"render",value:function(){return i.createElement("div",{className:"author-corrections-tool"})}}]),t}();c.contextTypes={api:u.default.instanceOf(a.default).isRequired,router:u.default.object.isRequired,correctionsStore:u.default.instanceOf(l.default).isRequired},t.default=c},703:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.column=t.DATE_FORMAT=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.sortAndFormatRows=_,t.sortRows=b,t.makeSortable=v,t.formatRow=E,t.formatCell=S;var i=p(r(2)),u=p(r(3)),l=d(r(399)),s=d(r(0)),c=r(620),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=t.DATE_FORMAT="MM/DD/YYYY",y=function(e){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),u=0;u<a;u++)o[u]=arguments[u];return r=n=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.state={selectedRowKeys:[],sortedRows:[],sortState:new i.OrderedMap,sortStateObj:{}},n.onColumnSort=function(e){var t=e.key,r=e.order,a=n.state.sortState,o=a.get(t);a=a.remove(t),o&&r!==c.SortOrder.DESC||(a=a.set(t,r)),n.setState({sortState:a,sortStateObj:a.toJS(),sortedRows:_(n.props.rows,a)},function(){var e=n.props.onChangeSort;e&&e(a)})},n.rowEventHandlers={onClick:function(e){var t=e.rowData;n.setState({selectedRowKeys:[t.id]},function(){var e=n.props.onSelectRow;e&&e(t)})}},n.getRowClassName=function(e){var t=e.rowData;return(0,l.default)({"moderation__author-claim__table__row__is-selected":n.state.selectedRowKeys.includes(t.id)})},h(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.PureComponent),o(t,[{key:"componentWillMount",value:function(){this.setState({sortedRows:_(this.props.rows,this.state.sortState)})}},{key:"componentWillReceiveProps",value:function(e){i.is(this.props.rows,e.rows)||this.setState({sortedRows:_(e.rows,this.state.sortState)})}},{key:"render",value:function(){var e=this,t=this.state,r=t.sortedRows,n=t.sortStateObj,a=t.selectedRowKeys;return u.createElement("div",{className:"moderation__author-claim__table"},u.createElement(c.AutoResizer,null,function(t){var o=t.width,i=t.height;return u.createElement(f.default,{width:o,height:i,fixed:!0,sortState:n,onColumnSort:e.onColumnSort,rowEventHandlers:e.rowEventHandlers,headerClassName:"moderation__author-claim__table__header",rowClassName:e.getRowClassName,selectedRowKeys:a,data:r},g({dataKey:"authorName",title:"Author",frozen:!0}),g({dataKey:"email",title:"Email"}),g({dataKey:"claimDate",title:"Claim Date"}),g({dataKey:"lastUpdated",title:"Last Updated"}),g({dataKey:"flag",title:"Flag"}))}))}}]),t}();t.default=y;var g=t.column=function(e){var t=e.dataKey,r=e.title,n=e.width,a=e.frozen;return u.createElement(c.Column,{key:t,dataKey:t,title:r,width:n||150,frozen:a?c.Column.FrozenDirection.LEFT:null,resizable:!0,sortable:!0})};function _(e,t){return b(e.toJS(),[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t.entries()))).map(E)}function b(e,t){return t.reduce(function(e,t){var r=a(t,2),n=r[0],o=r[1];return e.sort(function(e,t){var r=v(e[n]),a=v(t[n]);return r===a?0:o===c.SortOrder.DESC?r<a?1:-1:r>a?1:-1})},e)}function v(e){switch(void 0===e?"undefined":n(e)){case"string":return e.toLowerCase();case"number":return e;case"boolean":return e?1:-1;default:if(null===e||void 0===e)return"";if(e instanceof Date||s.default.isMoment(e))return+e}return""}function E(e){return Object.keys(e).reduce(function(t,r){return t[r]=S(e[r],r),t},{})}function S(e,t){return null===e||void 0===e?"-":e instanceof Date?(0,s.default)(e).format(m):s.default.isMoment(e)?e.format(m):e}},704:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoValue=t.Field=t.DATE_FORMAT=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=b(r(404)),i=b(r(400)),u=b(r(592)),l=b(r(239)),s=b(r(240)),c=b(r(273)),f=b(r(51)),d=r(305),p=b(d),h=(_(r(2)),_(r(3))),m=b(r(399)),y=b(r(9)),g=b(r(1));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}t.DATE_FORMAT="MM/DD/YYYY";var v=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));E.call(a);var o=a.props.authorProfile;return a.state=n({isConfirmVisible:!1,moderationTag:o.moderationTag,isReasonHighlighted:!1,internalNotes:o.internalNotes||"",selectedStatus:o.moderationStatus||null,selectedReason:o.moderationStatusReason||null},a.getStateFromClaimModerationStore()),a.context.claimModerationStore.registerComponent(a,function(){a.setState(a.getStateFromClaimModerationStore())}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,h.PureComponent),a(t,[{key:"getStateFromClaimModerationStore",value:function(){var e=this.context.claimModerationStore;return{claimedAuthor:e.getClaimedAuthor(),claimedPreviously:e.getClaimedPreviousAuthorProfiles(),claimingAppUser:e.getClaimingAppUser()}}},{key:"updateModerationStatus",value:async function(e){var t=this.props.authorProfile,r=this.state,n=r.internalNotes,a=r.selectedReason,o=this.context.api,i=this.context.authStore.getEmail();(0,y.default)(i,"User have an email to moderate.");var u=a?p.default[a]:null;await o.updateModerationStatus({authorProfileId:t.id,moderationStatus:e,moderator:i,moderatorNotes:"",moderationStatusReason:u,internalNotes:n}),this.props.onRefreshRows()}},{key:"renderAuthorName",value:function(){var e,t,r,n=this.props.authorProfile,a=this.state,o=a.claimedAuthor,i=a.claimingAppUser,u=(null!=(r=n)?r.fullName:r)||h.createElement(O,null),l=(null!=(t=o)?t.name:t)||h.createElement(O,null),s=(null!=(e=i)?e.fullName:e)||h.createElement(O,null);return h.createElement("div",{className:"moderation__author-claim__details__comparison"},h.createElement("div",null,h.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Claim Form"),h.createElement("span",{className:"moderation__author-claim__details__comparison__value"},u)),h.createElement("div",null,h.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Login Name"),h.createElement("span",{className:"moderation__author-claim__details__comparison__value"},s)),h.createElement("div",null,h.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Author Page"),h.createElement("span",{className:"moderation__author-claim__details__comparison__value"},l)))}},{key:"renderEmail",value:function(){var e,t,r,n=this.props.authorProfile,a=this.state.claimingAppUser,o=(null!=(r=n)?r.email:r)||h.createElement(O,null),i=(null!=(t=a)?t.email:t)||h.createElement(O,null),u=(null!=(e=a)?e.alertEmail:e)||h.createElement(O,null);return h.createElement("div",{className:"moderation__author-claim__details__comparison"},h.createElement("div",null,h.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Claim Form"),h.createElement("span",{className:"moderation__author-claim__details__comparison__value"},o)),h.createElement("div",null,h.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Login Email"),h.createElement("span",{className:"moderation__author-claim__details__comparison__value"},i)),h.createElement("div",null,h.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Alert Email"),h.createElement("span",{className:"moderation__author-claim__details__comparison__value"},u)))}},{key:"renderFieldOfStudy",value:function(){var e=this.state.claimingAppUser;return e?0===e.fieldsOfStudy.size?h.createElement(O,null):1===e.fieldsOfStudy.size?e.fieldsOfStudy.get(0):h.createElement("ul",null,e.fieldsOfStudy.map(function(e){return h.createElement("li",{key:e},e)})):h.createElement(O,null)}},{key:"renderPreviouslyClaimed",value:function(){var e=this.state.claimedPreviously;return 0===e.size?h.createElement(O,null):h.createElement("ul",null,e.map(function(e){return h.createElement("li",{key:e.id},h.createElement("div",{className:"moderation__author-claim__details__comparison"},h.createElement("div",null,h.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Name"),h.createElement("span",{className:"moderation__author-claim__details__comparison__value"},e.fullName)),h.createElement("div",null,h.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Author ID"),h.createElement("span",{className:"moderation__author-claim__details__comparison__value"},e.ai2AuthorId)),h.createElement("div",null,h.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Status"),h.createElement("span",{className:"moderation__author-claim__details__comparison__value"},e.moderationStatus)),h.createElement("div",null,h.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Reason"),h.createElement("span",{className:"moderation__author-claim__details__comparison__value"},e.moderationStatusReason))))}))}},{key:"render",value:function(){var e=this.props.authorProfile,t=this.state,r=t.moderationTag,n=t.isReasonHighlighted,a=t.internalNotes,l=t.selectedStatus,s=t.selectedReason,c=t.claimingAppUser;return h.createElement("div",{className:"moderation__author-claim__details"},h.createElement("div",{className:"moderation__author-claim__details__header"},h.createElement(o.default,{href:"/author/"+e.ai2AuthorId,className:"moderation__author-claim__details__name"},e.fullName),h.createElement("div",{className:(0,m.default)({"moderation__author-claim__details__flag":!0,"moderation__author-claim__is-flagged":r}),title:(r?"Unflag":"Flag as")+' "Awaiting Response"'},h.createElement(i.default,{icon:"moderation-flag",onClick:this.onClickFlag}))),h.createElement("div",{className:"moderation__author-claim__details__body"},h.createElement(S,{label:"Author Name"},this.renderAuthorName()),h.createElement(S,{label:"Affiliation(s)"},function(){switch(e.affiliations.length){case 0:return null;case 1:return e.affiliations.join("");default:return h.createElement("ul",{className:"moderation__author-claim__details__affiliations"},e.affiliations.map(function(e){return h.createElement("li",{key:e},e)}))}}()),h.createElement(S,{label:"Email(s)"},this.renderEmail()),h.createElement(S,{label:"Field of Study"},this.renderFieldOfStudy()),h.createElement(S,{label:"Current Role"},c&&c.currentRole),h.createElement(S,{label:"ORCiD"},e.orcidId?h.createElement(u.default,{orcidId:e.orcidId}):null),h.createElement(S,{label:"Homepage"},e.homepageUrl&&h.createElement(o.default,{href:e.homepageUrl},e.homepageUrl)),h.createElement(S,{label:"Previously Claimed"},this.renderPreviouslyClaimed()),h.createElement(S,{label:"User Comment"},e.userComment)),h.createElement("div",{className:"moderation__author-claim__details__footer"},h.createElement("div",{className:"moderation__author-claim__details__internal-notes"},h.createElement("textarea",{className:"moderation__author-claim__details__internal-notes__input",placeholder:"Internal Notes",value:a,onChange:this.onChangeInternalNotes}),h.createElement(i.default,{icon:"circle-plus",className:"moderation__author-claim__details__internal-notes__submit",title:"Save notes only",onClick:this.onClickInternalNotesSave})),h.createElement("select",{className:(0,m.default)({"moderation__author-claim__details__reason":!0,"moderation__author-claim__details__is-highlighted":n}),value:s||"",onChange:this.onChangeReason},h.createElement("option",{key:"",value:""}),Object.keys(p.default).map(function(e){return h.createElement("option",{key:e,value:e},p.default[e])})),h.createElement("div",{className:"moderation__author-claim__details__button-row","data-moderation-status":l||e.moderationStatus},h.createElement("button",{onClick:this.onClickApprove,className:"moderation__author-claim__details__button moderation__author-claim__details__button__approve"},h.createElement(i.default,{icon:"check-in-green-circle"}),h.createElement("span",{className:"moderation__author-claim__details__button__label"},"APPROVE")),h.createElement("button",{onClick:this.onClickDeny,className:"moderation__author-claim__details__button moderation__author-claim__details__button__deny"},h.createElement(i.default,{icon:"circle-x"}),h.createElement("span",{className:"moderation__author-claim__details__button__label"},"DENY")))))}}]),t}();v.contextTypes={api:g.default.instanceOf(l.default).isRequired,authStore:g.default.instanceOf(s.default).isRequired,claimModerationStore:g.default.instanceOf(c.default).isRequired};var E=function(){var e=this;this.onClickFlag=function(){var t=e.state.moderationTag?null:"Awaiting Response";e.setState({moderationTag:t});var r=e.props.authorProfile;e.context.api.setAuthorProfileModerationTag({authorProfileId:r.id,moderationTag:t})},this.onClickInternalNotesSave=function(){alert("Save notes is not yet implemented...but it is coming.")},this.onChangeInternalNotes=function(t){e.setState({internalNotes:t.currentTarget.value})},this.onChangeReason=function(t){var r=(0,d.optModerationStatusReasonByKey)(t.currentTarget.value);e.setState({isReasonHighlighted:!1,selectedReason:r})},this.onClickApprove=function(){e.state.selectedReason?e.setState({isReasonHighlighted:!0}):(e.setState({selectedStatus:f.default.Approved}),e.updateModerationStatus(f.default.Approved))},this.onClickDeny=function(){e.state.selectedReason?(e.setState({selectedStatus:f.default.Denied}),e.updateModerationStatus(f.default.Denied)):e.setState({isReasonHighlighted:!0})}};t.default=v;var S=t.Field=function(e){var t=e.label,r=e.children;return h.createElement("div",{className:"moderation__author-claim__details__field"},h.createElement("div",{className:"moderation__author-claim__details__field__label"},t),h.createElement("div",{className:"moderation__author-claim__details__field__value"},null===r||void 0===r?h.createElement(O,null):r))},O=t.NoValue=function(){return h.createElement("div",{className:"moderation__author-claim__details__field__value__missing"},"No Value")}},705:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusButton=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.getStatusFromPath=T,t.getFilterQueryFromSearch=R,t.convertAuthorProfileToRow=j;var o=P(r(704)),i=P(r(703)),u=P(r(400)),l=P(r(401)),s=P(r(239)),c=P(r(273)),f=(P(r(82)),r(51)),d=P(f),p=P(r(16)),h=r(427),m=r(237),y=(O(r(2)),O(r(3))),g=P(r(399)),_=P(r(0)),b=P(r(76)),v=P(r(35)),E=P(r(1)),S=P(r(52));function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function P(e){return e&&e.__esModule?e:{default:e}}var w=306,C=1e3,N=(0,b.default)(p.default.AUTHOR_CLAIM_MODERATION),k=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u._debounceFilterChange=null,u._lastDragResizeX=null,u.onChangeFilterQuery=function(e){var t=e.currentTarget.value;u.setState({filterQuery:t},u.onFilterChangeDebounced)},u.onDragResizeStart=function(e){e.preventDefault(),u.setState({isDraggingResize:!0}),u._lastDragResizeX=e.clientX,window.addEventListener("mousemove",u.onDragResize,!1)},u.onDragResizeEnd=function(e){e.preventDefault(),u.setState({isDraggingResize:!1}),u._lastDragResizeX=null,window.removeEventListener("mousemove",u.onDragResize,!1)},u.onDragResize=function(e){var t=u._lastDragResizeX;if(t){var r=e.clientX;u._lastDragResizeX=r;var n=t-r;u.setState(function(e){return{detailsPaneWidthPx:e.detailsPaneWidthPx+n}})}},u.onFilterChange=function(){var e=u.props,t=e.history,r=e.location,a=u.state,o=a.filterQuery,i=a.modStatus,l=u.context.api,s=v.default.parse(r.search,{ignoreQueryPrefix:!0});s.query=o;var c=n({},r,{search:v.default.stringify(s)});t.replace(c),l.getAuthorProfileListForClaimModeration({status:i,query:o})},u.onFilterChangeDebounced=(0,h.debounce)(u.onFilterChange,C,{leading:!1,trailing:!0}),u.onSelectRow=function(e){if(e){var t=parseInt(e.id,10),r=u.context.claimModerationStore.getAuthorProfiles().find(function(e){return e.id===t});if(u.setState({selectedAuthorProfile:r}),r)u.context.api.getAuthorProfileForClaimModeration({authorProfileId:r.id})}else u.setState({selectedAuthorProfile:null})},u.refreshRows=function(){var e=u.context.api;e.getAuthorProfileListForClaimModeration({status:u.state.modStatus,query:u.state.filterQuery}),e.fetchModerationStats()},u.state=n({detailsPaneWidthPx:w,filterQuery:R(u.props.location.search),isDraggingResize:!1,modStatus:T(u.props.location.pathname),selectedAuthorProfile:null},u.getStateFromAuthorClaimModerationStore()),u.context.claimModerationStore.registerComponent(u,function(){u.setState(u.getStateFromAuthorClaimModerationStore())}),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,y.PureComponent),a(t,null,[{key:"willRouteTo",value:async function(e,t){var r=e.api;if(e.claimModerationStore.isUninitialized()){var n=(0,f.convertUrlParamToModerationStatusValue)(t.params.status)||d.default.Unsupported,a=t.query.query;return r.getAuthorProfileListForClaimModeration({status:n,query:a})}}}]),a(t,[{key:"componentWillReceiveProps",value:function(e){var t={};if(this.props.location.pathname!==e.location.pathname){var r=T(e.location.pathname);r!==this.state.modStatus&&(t.modStatus=r)}if(this.props.location.search!==e.location.search){var n=R(e.location.search);n!==this.state.filterQuery&&(t.filterQuery=n)}Object.keys(t).length>0&&this.setState(t,this.onFilterChange)}},{key:"handleListItemClick",value:function(e){this.setState(e)}},{key:"getStateFromAuthorClaimModerationStore",value:function(){var e=this.context.claimModerationStore;return{isLoading:e.isLoading(),rows:e.getAuthorProfiles().map(j)}}},{key:"render",value:function(){var e=this.state,t=e.detailsPaneWidthPx,r=e.filterQuery,n=e.rows,a=e.modStatus,l=e.selectedAuthorProfile;return y.createElement("div",{className:"moderation__author-claim"},y.createElement("div",{className:"moderation__author-claim__row"},y.createElement("div",{className:"moderation__author-claim__filter-cell"},y.createElement("label",{className:"moderation__author-claim__field"},y.createElement("div",{className:"moderation__author-claim__label"},"Filter Claims"),y.createElement("input",{className:"moderation__author-claim__input",type:"text",placeholder:"Filter by author id, name, email, orcid id, etc.",onChange:this.onChangeFilterQuery,value:r}))),y.createElement("div",{className:"moderation__author-claim__status-cell"},y.createElement("div",{className:"moderation__author-claim__field"},y.createElement("div",{className:"moderation__author-claim__label"},"Claim Status"),y.createElement("div",{className:"moderation__author-claim__button-group"},[d.default.Pending,d.default.Approved,d.default.Denied].map(function(e){return y.createElement(A,{key:e,buttonModStatus:e,activeModStatus:a,filterQuery:r})}))))),y.createElement("div",{className:"moderation__author-claim__row moderation__author-claim__row__fill-screen"},y.createElement("div",{className:"moderation__author-claim__table-cell"},y.createElement(i.default,{rows:n,onSelectRow:this.onSelectRow})),y.createElement("div",{onMouseDown:this.onDragResizeStart,onMouseUp:this.onDragResizeEnd,className:"moderation__author-claim__resize-gutter"},y.createElement(u.default,{icon:"horizontal-resize-handle"})),y.createElement("div",{className:"moderation__author-claim__details-cell",style:{width:t+"px"}},l?y.createElement(o.default,{key:l.id,authorProfile:l,onRefreshRows:this.refreshRows}):y.createElement("div",{className:"moderation__author-claim__details-cell__instructions"},"Select a claim to moderate"))))}}]),t}();k.getPageTitle=function(){return(0,m.getString)(function(e){return e.authorClaimModeration.pageTitle})},k.requiresAuthentication=function(){return!0},k.contextTypes={api:E.default.instanceOf(s.default).isRequired,claimModerationStore:E.default.instanceOf(c.default).isRequired,router:E.default.object.isRequired},t.default=k;var A=t.StatusButton=function(e){var t=e.activeModStatus,r=e.buttonModStatus,n=e.filterQuery;return y.createElement(l.default,{to:"AUTHOR_CLAIM_MODERATION",params:{status:r.toLowerCase()},query:{query:n},className:(0,g.default)({"moderation__author-claim__button":!0,"moderation__author-claim__is-active":r===t})},r)};function T(e){if(!e)return d.default.Pending;var t=(N.exec(e)||[])[1];return(0,f.convertUrlParamToModerationStatusValue)(t)||d.default.Unsupported}function R(e){return e&&v.default.parse(S.default.parse(e).query||"").query||""}function j(e){return{id:e.id,authorName:e.fullName,email:e.email,claimDate:(0,_.default)(e.claimedAtUtc),lastUpdated:null,flag:e.moderationTag}}},706:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=p(r(411)),o=p(r(406)),i=p(r(409)),u=p(r(408)),l=p(r(401)),s=p(r(1)),c=r(3),f=p(c),d=r(49);function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.PureComponent),n(t,[{key:"render",value:function(){return f.default.createElement("div",{className:"alerts-page"},f.default.createElement(o.default,{showSearchBar:!0}),f.default.createElement("div",{className:"alerts-page__header bg-light-gray"},f.default.createElement("h1",{className:"centered-max-width-content"},"My alerts")),f.default.createElement(i.default,{className:"content centered-max-width-content",layoutMed:"column",role:"main",id:"main-content"},f.default.createElement(u.default,{className:"alerts-page__sidebar flex-static flex-item__left-column"},f.default.createElement(l.default,{to:"ALERTS"},"All alerts"),f.default.createElement(l.default,{to:"ALERTS_EMAIL"},"Email address")),f.default.createElement(u.default,{className:"alerts-page__content flex-item__right-column"},(0,d.renderRoutes)(this.props.route.routes))),f.default.createElement(a.default,null))}}],[{key:"willRouteTo",value:function(e){var t=e.alertsStore,r=e.api;return t.isUninitialized()?r.fetchAlerts():Promise.resolve()}},{key:"requiresAuthentication",value:function(){return!0}},{key:"getPageTitle",value:function(){return"My Alerts - Semantic Scholar"}}]),t}();h.propTypes={route:s.default.object.isRequired},t.default=h},707:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(83),o=m(r(239)),i=m(r(240)),u=m(r(402)),l=m(r(238)),s=r(237),c=m(r(65)),f=m(r(399)),d=r(3),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),h=m(r(1));function m(e){return e&&e.__esModule?e:{default:e}}var y=["daily","weekly"],g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(n))));return o.getStateFromAuthStore=o.getStateFromAuthStore.bind(o),o.state=o.getStateFromAuthStore(),o.context.authStore.registerComponent(o,function(){o.setState(o.getStateFromAuthStore)}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.PureComponent),n(t,[{key:"getStateFromAuthStore",value:function(){return{frequency:this.context.authStore.getAlertFrequency()}}},{key:"onFrequencySelected",value:function(e){var t=this.context.api,r=this.state.frequency,n=l.default.UserAlerts.SET_FREQUENCY;e!==r&&(t.updateAlertFrequency({alertFrequency:e}),(0,c.default)(u.default.create(n,{frequency:e})))}},{key:"renderFrequency",value:function(e){var t=this,r=a.AlertFrequencyByValue[e];return p.createElement("a",{key:e,className:(0,f.default)("frequency-button",{selected:this.state.frequency===r}),"data-selenium-selector":this.state.frequency===r?"frequency-button-selected":"frequency-button","data-selenium-frequency":e,onClick:function(){return t.onFrequencySelected(r)}},(0,s.getString)(function(t){return t.alerts.frequency.frequencies[e]}))}},{key:"render",value:function(){return p.createElement("div",{className:"alert-frequency"},p.createElement("h4",null,(0,s.getString)(function(e){return e.alerts.frequency.title})),p.createElement("div",{className:"alert-frequency__subtitle"},(0,s.getString)(function(e){return e.alerts.frequency.subtitle})),p.createElement("div",null,y.map(this.renderFrequency.bind(this))))}}]),t}();g.contextTypes={api:h.default.instanceOf(o.default).isRequired,authStore:h.default.instanceOf(i.default).isRequired},t.default=g},708:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=l(r(401)),o=r(248),i=l(r(1)),u=l(r(3));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.queryType,r=e.queryValue,i=e.displayValue,l=function(e,t){switch(e){case o.QUERY_TYPE.SEARCH_RESULTS:return{to:"SEARCH",query:{q:t,sort:"relevance"}};case o.QUERY_TYPE.AUTHOR_PAPER:case o.QUERY_TYPE.AUTHOR_CITATION:return{to:"AUTHOR_PROFILE_BY_ID",params:{authorId:t}};case o.QUERY_TYPE.PAPER_CITATION:return{to:"PAPER_DETAIL_BY_ID",params:{paperId:t}};case o.QUERY_TYPE.ENTITY_PAPER:return{to:"ENTITY_BY_ID",params:{entityId:t}};default:return null}}(t,r);return u.default.createElement(a.default,n({className:"truncate-line"},l),i)};s.propTypes={queryType:i.default.string.isRequired,queryValue:i.default.string.isRequired,displayValue:i.default.string.isRequired},t.default=s},709:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=b(r(708)),o=b(r(400)),i=b(r(530)),u=(b(r(289)),b(r(239))),l=b(r(238)),s=r(237),c=r(46),f=r(243),d=r(248),p=b(r(416)),h=b(r(65)),m=b(r(399)),y=r(245),g=b(r(1)),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function b(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.onToggle=n.onToggle.bind(n),n.onDelete=n.onDelete.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_.PureComponent),n(t,[{key:"onToggle",value:function(){var e=this.props.alert,t=e.id,r=e.isActive?d.STATUS.DISABLED:d.STATUS.ACTIVE,n=l.default.UserAlerts,a=n.TOGGLE_SUCCESS,o=n.TOGGLE_FAILURE;this.context.api.updateAlert({alertId:t,status:r}).then(function(){return(0,h.default)(p.default.create(a,{alertId:t,alertStatus:r}))}).catch(function(e){var n=e.status,a=e.error;(0,h.default)(p.default.create(o,{alertId:t,alertStatus:r,error:a,status:n}))})}},{key:"onDelete",value:function(){this.context.dispatcher.dispatch((0,f.showModal)({id:c.ModalId.DELETE_ALERT,data:this.props.alert}))}},{key:"render",value:function(){var e=this.props.alert,t=e.isActive,r=e.displayValue,n=e.queryType,u=e.queryValue,l=(0,m.default)("alert","flex-row-vcenter",{"is-disabled":!t}),c=(0,s.getString)(function(e){return e.alerts.queryType[n].description});return _.createElement("li",{className:l},_.createElement(i.default,{className:"alert__toggle",selected:t,onClick:this.onToggle}),_.createElement(a.default,{queryType:n,queryValue:u,displayValue:r}),_.createElement("span",{className:"alert__description flex-static"},c),_.createElement(o.default,{icon:"x",width:"15",height:"15",className:"alert__delete-button flex-static mod-clickable",onClick:this.onDelete}))}}]),t}();v.contextTypes={api:g.default.instanceOf(u.default).isRequired,dispatcher:g.default.instanceOf(y.Dispatcher).isRequired},t.default=v},710:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=d(r(709)),o=d(r(707)),i=d(r(403)),u=r(248),l=d(r(266)),s=r(237),c=(d(r(2)),d(r(1))),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(n))));return o.getStateFromAlertsStore=o.getStateFromAlertsStore.bind(o),o.renderAlertsList=o.renderAlertsList.bind(o),o.state=o.getStateFromAlertsStore(),o.context.alertsStore.registerComponent(o,function(){o.setState(o.getStateFromAlertsStore)}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.PureComponent),n(t,[{key:"getStateFromAlertsStore",value:function(){var e=this.context.alertsStore;return{alerts:e.getAlerts().toList().groupBy(function(e){return e.alertType}),isLoading:e.isLoading()}}},{key:"renderEmpty",value:function(){return f.createElement(f.Fragment,null,f.createElement("h4",{"data-selenium-selector":"alerts-results","data-count":0},(0,s.getString)(function(e){return e.alerts.empty.title})),f.createElement("p",null,(0,s.getString)(function(e){return e.alerts.empty.description})))}},{key:"renderAlert",value:function(e){return f.createElement(a.default,{alert:e,key:e.id})}},{key:"renderAlertsList",value:function(e){var t=this.state.alerts.get(e),r=(0,s.getString)(function(t){return t.alerts.type[e].title});return t?f.createElement("div",{className:"alerts-list",key:e,"data-selenium-selector":"alerts-results","data-count":t.size},f.createElement("h4",null,r),f.createElement("ul",null,t.map(this.renderAlert))):null}},{key:"render",value:function(){var e=this.state,t=e.isLoading,r=e.alerts;return t?f.createElement(i.default,null):r.isEmpty()?this.renderEmpty():f.createElement(f.Fragment,null,f.createElement(o.default,null),u.ALERT_TYPE.toList().map(this.renderAlertsList))}}]),t}();p.contextTypes={alertsStore:c.default.instanceOf(l.default).isRequired},t.default=p},711:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.FeatureFlag=y,t.getFeatureRatios=g;var o=d(r(526)),i=d(r(45)),u=r(237),l=f(r(2)),s=f(r(3)),c=d(r(1));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=Object.values(i.default),m=function(e){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.state={ratios:l.Map()},n.onChangeRatio=function(e,t){n.setState({ratios:n.state.ratios.set(t,e)})},p(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.PureComponent),a(t,[{key:"render",value:function(){var e=this,t=this.state.ratios;return s.createElement("div",{className:"admin__features"},s.createElement("ul",{className:"admin__features__feature-flag-list"},h.map(function(r){return s.createElement("li",{key:r.KEY,className:"admin__features__feature-flag"},s.createElement(y,n({feature:r,onChangeRatio:e.onChangeRatio},g(r,t))))})))}}]),t}();function y(e){var t=e.feature,r=e.localRatio,n=e.devRatio,a=e.prodRatio,i=e.onChangeRatio;return s.createElement("div",{className:"admin__feature-flag"},s.createElement("div",{className:"admin__feature-flag__details"},s.createElement("div",{className:"admin__feature-flag__details__row admin__feature-flag__key"},t.KEY),t.description?s.createElement("div",{className:"admin__feature-flag__details__row admin__feature-flag__desc"},t.description):s.createElement("div",{className:"admin__feature-flag__details__row admin__feature-flag__desc admin__feature-flag__desc--not-set"},(0,u.getString)(function(e){return e.admin.featureFlags.descNotSetLabel})),s.createElement("div",{className:"admin__feature-flag__details__row admin__feature-flag__fallback"},s.createElement("span",{className:"admin__feature-flag__details__label"},(0,u.getString)(function(e){return e.admin.featureFlags.fallbackLabel})),s.createElement("span",{className:"admin__feature-flag__details__value"},(0,u.getString)(function(e){return e.admin.featureFlags.fallbackState[t.fallbackState]})))),s.createElement("div",{className:"admin__feature-flag__inputs"},s.createElement("div",{className:"admin__feature-flag__slider"},s.createElement("div",{className:"admin__feature-flag__slider__label"},(0,u.getString)(function(e){return e.admin.featureFlags.localLabel})),s.createElement(o.default,{name:t.KEY+"__local",value:r,onChange:i,showPercentage:!0})),s.createElement("div",{className:"admin__feature-flag__slider"},s.createElement("div",{className:"admin__feature-flag__slider__label"},(0,u.getString)(function(e){return e.admin.featureFlags.devLabel})),s.createElement(o.default,{name:t.KEY+"__dev",value:n,onChange:i,showPercentage:!0})),s.createElement("div",{className:"admin__feature-flag__slider"},s.createElement("div",{className:"admin__feature-flag__slider__label"},(0,u.getString)(function(e){return e.admin.featureFlags.prodLabel})),s.createElement(o.default,{name:t.KEY+"__prod",value:a,onChange:i,showPercentage:!0}))))}function g(e,t){return{localRatio:t.get(e.KEY+"__local")||0,devRatio:t.get(e.KEY+"__dev")||0,prodRatio:t.get(e.KEY+"__prod")||0}}m.contextTypes={router:c.default.object.isRequired},t.default=m},712:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.ExperimentItem=b,t.getExperimentRatios=v;var o=g(r(526)),i=r(23),u=g(i),l=r(237),s=y(r(2)),c=y(r(3)),f=g(r(242)),d=(g(r(301)),g(r(1))),p=g(r(302)),h=g(r(78)),m=r(8);function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.onChangeRatio=function(e,t){a.setState({ratios:a.state.ratios.set(t,e)})},a.state=n({ratios:s.Map()},a.getStateFromExperimentsStore()),a.context.experimentsStore.registerComponent(a,function(){a.setState(a.getStateFromExperimentsStore())}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.PureComponent),a(t,[{key:"getStateFromExperimentsStore",value:function(){return{experiments:this.context.experimentsStore.getExperiments()}}},{key:"componentDidMount",value:function(){var e=this.context.experimentsStore;e.isUninitialized()&&e.initialize()}},{key:"render",value:function(){var e=this,t=this.state.experiments,r=this.context.envInfo.hostname;return c.createElement("div",{className:"admin__experiments"},c.createElement("ul",{className:"admin__experiments__experiment-list"},(0,i.getExperimentList)(u.default).map(function(a){return c.createElement("li",{key:a.KEY,className:"admin__experiments__experiment"},c.createElement(b,n({isLocal:(0,m.isLocalHostname)(r),experiment:a,onChangeRatio:e.onChangeRatio},v(t,a))))})))}}]),t}();function b(e){var t=e.experiment,r=e.isLocal,n=e.localRatio,a=e.devRatio,i=e.prodRatio,u=e.onChangeRatio;return c.createElement("div",{className:"admin__experiment"},c.createElement("div",{className:"admin__experiment__details"},c.createElement("div",{className:"admin__experiment__details__row admin__experiment__key"},t.KEY),t.description?c.createElement("div",{className:"admin__experiment__details__row admin__experiment__desc"},t.description):c.createElement("div",{className:"admin__experiment__details__row admin__experiment__desc admin__experiment__desc--not-set"},(0,l.getString)(function(e){return e.admin.experiments.descNotSetLabel})),c.createElement("div",{className:"admin__experiment__details__row admin__experiment__variations"},c.createElement("span",{className:"admin__experiment__details__label"},(0,l.getString)(function(e){return e.admin.experiments.variationsLabel})),c.createElement("span",{className:"admin__experiment__details__value"},t.variations.map(function(e){return e.KEY===t.defaultVariation?e.KEY+"*":e.KEY}).join(", "))),t.path&&c.createElement("div",{className:"admin__experiment__details__row admin__experiment__path"},c.createElement("span",{className:"admin__experiment__details__label"},(0,l.getString)(function(e){return e.admin.experiments.pathLabel})),c.createElement("span",{className:"admin__experiment__details__value"},t.path)),t.manualExposure&&c.createElement("div",{className:"admin__experiment__details__row admin__experiment__manual-exposure"},c.createElement("span",{className:"admin__experiment__details__label"},(0,l.getString)(function(e){return e.admin.experiments.manuallyExposedLabel})),c.createElement("span",{className:"admin__experiment__details__value"},t.manualExposure.toString()))),c.createElement("div",{className:"admin__experiment__inputs"},r&&c.createElement("div",{className:"admin__experiment__slider"},c.createElement("div",{className:"admin__experiment__slider__label"},(0,l.getString)(function(e){return e.admin.experiments.localLabel})),c.createElement(o.default,{name:t.KEY+"__local",value:n,onChange:u,showPercentage:!0})),c.createElement("div",{className:"admin__experiment__slider"},c.createElement("div",{className:"admin__experiment__slider__label"},(0,l.getString)(function(e){return e.admin.experiments.devLabel})),c.createElement(o.default,{name:t.KEY+"__dev",value:a,onChange:u,showPercentage:!0})),c.createElement("div",{className:"admin__experiment__slider"},c.createElement("div",{className:"admin__experiment__slider__label"},(0,l.getString)(function(e){return e.admin.experiments.prodLabel})),c.createElement(o.default,{name:t.KEY+"__prod",value:i,onChange:u,showPercentage:!0}))))}function v(e,t){var r=e.get(h.default.LOCAL),n=r&&r.get(t.KEY)||{},a=e.get(h.default.DEV),o=a&&a.get(t.KEY)||{},i=e.get(h.default.PROD),u=i&&i.get(t.KEY)||{};return{localRatio:n.size>0?n.variations[0].ratio:0,devRatio:o.size>0?o.variations[0].ratio:0,prodRatio:u.size>0?u.variations[0].ratio:0}}_.contextTypes={experimentsStore:d.default.instanceOf(p.default).isRequired,envInfo:d.default.instanceOf(f.default).isRequired},t.default=_},713:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r(401)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),i=u(r(399));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent),n(t,[{key:"render",value:function(){var e=this.props,t=e.navItems,r=e.activeRouteName;return o.createElement("nav",{className:"admin-nav"},o.createElement("ul",{className:"admin-nav__list"},t.map(function(e,t){var n=e.routeName,u=e.label,l=n===r;return o.createElement("li",{key:t,className:(0,i.default)({"admin-nav__item":!0,"admin-nav__is-active":l})},o.createElement(a.default,{to:n},u))})))}}]),t}();t.default=l},714:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=h(r(713)),i=h(r(406)),u=r(237),l=r(16),s=r(258),c=h(r(48)),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),d=h(r(1)),p=r(49);function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.PureComponent),a(t,[{key:"componentDidMount",value:function(){var e=this.props.history;if("ADMIN"===(0,l.getRouteNameForPath)(e.location.pathname)){var t=new c.default(n({},this.pickRedirectRoute(),{replace:!0,status:302}));(0,s.handleRedirect)({redirect:t,history:e})}}},{key:"pickRedirectRoute",value:function(){return{routeName:"ADMIN_EXPERIMENTS"}}},{key:"getActiveRouteName",value:function(){var e,t=this.context.router,r=this.props.route,n=null!=(e=(0,p.matchRoutes)(r.routes,t.route.location.pathname))&&null!=(e=e[0])&&null!=(e=e.route)?e.path:e;return(0,l.getRouteNameForPath)(n)||"ADMIN_EXPERIMENTS"}},{key:"getNavItems",value:function(){return[{routeName:"ADMIN_EXPERIMENTS",label:(0,u.getString)(function(e){return e.admin.nav.experimentsLabel})},{routeName:"ADMIN_FEATURE_FLAGS",label:(0,u.getString)(function(e){return e.admin.nav.featureFlagsLabel})}]}},{key:"render",value:function(){var e=this.props.route,t=this.getNavItems(),r=this.getActiveRouteName();return f.createElement("div",null,f.createElement(i.default,{showSearchBar:!0,isAdminPage:!0}),f.createElement("div",{className:"admin",role:"main"},f.createElement("h2",{className:"admin__header"},(0,u.getString)(function(e){return e.admin.headerLabel})),f.createElement(o.default,{navItems:t,activeRouteName:r}),f.createElement("div",{className:"admin__sub-page"},(0,p.renderRoutes)(e.routes))))}}],[{key:"getPageTitle",value:function(){return(0,u.getString)(function(e){return e.moderation.pageTitle})}},{key:"requiresAuthentication",value:function(){return!0}}]),t}();m.contextTypes={router:d.default.object.isRequired},t.default=m},715:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.numPapers,r=e.onRemoveAll;return a.createElement("div",{className:"author-remove-papers__results-header"},a.createElement("div",{className:"author-remove-papers__results-header__left"},(0,n.getPluralizedString)(function(e){return e.authorRemovePapers.numResults},t)),a.createElement("div",{className:"author-remove-papers__results-header__right"},a.createElement("button",{className:"author-remove-papers__results-header__link-button",onClick:r,disabled:0===t,type:"button"},(0,n.getString)(function(e){return e.authorRemovePapers.removeAllLabel}))))};var n=r(237),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3))},716:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.isAuthorOfPaper=m,t.getAuthorPosition=y,t.formatPublisher=g;var o=p(r(400)),i=r(237),u=r(483),l=p(r(256)),s=p(r(68)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),f=p(r(399)),d=p(r(1));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u.state=n({},u.getStateFromAuthorCorrectionsStore()),u.context.authorCorrectionsStore.registerComponent(u,function(){u.setState(u.getStateFromAuthorCorrectionsStore())}),u.onClickRemove=u.onClickRemove.bind(u),u.onClickUndo=u.onClickUndo.bind(u),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.PureComponent),a(t,[{key:"getStateFromAuthorCorrectionsStore",value:function(){var e=this.context.authorCorrectionsStore,t=this.props.paperLite;return{hasPendingRemove:e.getPendingCorrectionTypeForPaperId(t.id)===s.default.RemoveAuthorship}}},{key:"onClickRemove",value:function(e){e.preventDefault();var t=this.context.authorCorrectionsStore,r=this.props,n=r.paperLite,a=r.viewerAuthorId;t.enqueueRemovePaperCorrection({paperId:n.id,position:y(a,n)})}},{key:"onClickUndo",value:function(e){e.preventDefault();var t=this.context.authorCorrectionsStore,r=this.props.paperLite;t.cancelPendingCorrectionByPaperId(r.id)}},{key:"render",value:function(){var e=this.props,t=e.paperLite,r=e.viewerAuthorId,a=this.state.hasPendingRemove,l=g({year:t.year,venue:t.venue}),s=m(r,t);return c.createElement("div",{className:(0,f.default)({"author-remove-papers__paper":!0,"author-remove-papers__paper__has-pending-remove":a,"author-remove-papers__paper__locked":!s})},!s&&c.createElement("div",{className:"author-remove-papers__paper__status-message"},(0,i.getString)(function(e){return e.authorRemovePapers.error.correctionPending})),c.createElement("div",{className:"author-remove-papers__paper__controls-left"},c.createElement("div",n({role:"button",className:"author-remove-papers__paper__remove-button"},(0,u.heapAuthorRemovePaperRemove)(),{onClick:s?this.onClickRemove:null}),c.createElement(o.default,{icon:"circle-plus"}))),c.createElement("div",{className:"author-remove-papers__paper__details"},c.createElement("div",{className:"author-remove-papers__paper__title"},t.title),c.createElement("div",{className:"author-remove-papers__paper__authors"},t.authors.map(function(e){return e.alias.name}).join(", ")),l&&c.createElement("div",{className:"author-remove-papers__paper__publisher"},l)),c.createElement("div",{className:"author-remove-papers__paper__controls-right"},c.createElement("div",n({role:"button",className:"author-remove-papers__paper__undo-button"},(0,u.heapAuthorRemovePaperUndo)(),{onClick:this.onClickUndo}),(0,i.getString)(function(e){return e.authorRemovePapers.undoLabel}))))}}]),t}();function m(e,t){return"number"==typeof y(e,t)}function y(e,t){var r=e.toString(),n=t.authors.findIndex(function(e){return e.alias.ids.includes(r)});return n>=0?n:null}function g(e){var t=e.venue,r=e.year;return t&&r?(0,i.getString)(function(e){return e.authorRemovePapers.publisher.bothYearAndVenue},r,t):r?(0,i.getString)(function(e){return e.authorRemovePapers.publisher.onlyYear},r):t?(0,i.getString)(function(e){return e.authorRemovePapers.publisher.onlyVenue},t):null}h.contextTypes={authorCorrectionsStore:d.default.instanceOf(l.default).isRequired},t.default=h},717:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(400)),o=r(237),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),u=r(528);var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent),n(t,[{key:"getClearFilterButton",value:function(){return i.createElement("div",{className:"author-remove-papers__blank-state__clear-filter"},i.createElement("button",{className:"author-remove-papers__blank-state__clear-filter-button button button--secondary",onClick:u.clearAndFocusFilterInput},(0,o.getString)(function(e){return e.authorRemovePapers.clearFilter})))}},{key:"render",value:function(){var e=this.props,t=e.hasAuthorPapers,r=e.filterText,n=t?(0,o.getString)(function(e){return e.authorRemovePapers.blankFilterLabel},r):(0,o.getString)(function(e){return e.authorRemovePapers.blankPaperLabel});return i.createElement("div",{className:"author-remove-papers__blank-state"},i.createElement("div",{className:"author-remove-papers__blank-state__content"},i.createElement(a.default,{className:"author-remove-papers__blank-state__icon",icon:"paper-question-mark",width:"60",height:"77.5"}),i.createElement("div",{className:"author-remove-papers__blank-state__description"},n),t&&this.getClearFilterButton()))}}]),t}();t.default=l},718:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(452),i=S(o),u=S(r(529)),l=S(r(527)),s=S(r(400)),c=r(237),f=r(16),d=r(410),p=S(r(7)),h=S(r(239)),m=S(r(240)),y=S(r(256)),g=S(r(68)),_=E(r(3)),b=(E(r(2)),S(r(1))),v=r(257);function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}var O=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u.state=n({isSending:!1,errorMessage:null,successMessage:null},u.getStateFromAuthStore(),u.getStateFromAuthorCorrectionsStore()),u.context.authStore.registerComponent(u,function(){u.setState(u.getStateFromAuthStore())}),u.context.authorCorrectionsStore.registerComponent(u,function(){u.setState(u.getStateFromAuthorCorrectionsStore())}),u.onSubmitForm=u.onSubmitForm.bind(u),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_.PureComponent),a(t,null,[{key:"getPageTitle",value:function(){return(0,c.getString)(function(e){return e.account.page.removePapers.pageTitle})}}]),a(t,[{key:"getStateFromAuthStore",value:function(){return{authorId:this.context.authStore.getClaimedAuthorId()}}},{key:"getStateFromAuthorCorrectionsStore",value:function(){var e=this.context.authorCorrectionsStore;return{isFormDirty:e.hasPendingCorrections()||e.hasDraftPapers(),pendingCorrections:e.getPendingCorrections().filter(function(e){return e.correctionType===g.default.RemoveAuthorship})}}},{key:"onSubmitForm",value:function(e){e.preventDefault(),this.attemptSubmit()}},{key:"attemptSubmit",value:async function(){var e=this.state,t=e.authorId,r=e.pendingCorrections,n=this.context,a=n.api,o=n.authorCorrectionsStore;await(0,d.setState)(this,{isSending:!0,errorMessage:null,successMessage:null});try{await a.submitPaperAuthorCorrections({authorId:t,corrections:r.toJS()}),await o.clearPendingCorrections(),this.context.router.history.push((0,f.makePath)({routeName:"ACCOUNT_CORRECTIONS"}))}catch(e){p.default.error("Failed to submit paper changes",e),this.setState({isSending:!1,errorMessage:(0,c.getString)(function(e){return e.authorRemovePapers.error.apiSubmitFailed}),successMessage:null})}}},{key:"renderMessage",value:function(){var e=this.state,t=e.errorMessage,r=e.successMessage;return t?_.createElement("div",{className:"account__error-msg"},t):r?_.createElement("div",{className:"account__success-msg"},r):null}},{key:"render",value:function(){var e=this.state,t=e.authorId,r=e.isSending,n=e.isFormDirty;return _.createElement("div",{className:"account-remove-papers"},_.createElement("div",{className:"account-remove-papers__headline"},(0,c.getString)(function(e){return e.account.page.removePapers.pageHeading})),_.createElement("div",{className:"account-remove-papers__description"},(0,c.getString)(function(e){return e.account.page.removePapers.pageDescription})),_.createElement("hr",{className:"account__divider"}),t&&_.createElement(u.default,{key:t,authorId:t}),_.createElement(i.default,null,_.createElement(o.AccountBarLeft,null,_.createElement(l.default,null)),_.createElement(o.AccountBarMessage,null,this.renderMessage()),_.createElement(o.AccountBarRight,null,r&&_.createElement(s.default,{className:"account__loading",icon:"gear"}),_.createElement("button",{className:"account-remove-papers__submit-button button button--primary",onClick:this.onSubmitForm},(0,c.getString)(function(e){return e.account.button.submit})))),_.createElement(v.Prompt,{when:n,message:(0,c.getString)(function(e){return e.authorRemovePapers.error.dirtyForm})}))}}]),t}();O.contextTypes={api:b.default.instanceOf(h.default).isRequired,authStore:b.default.instanceOf(m.default).isRequired,authorCorrectionsStore:b.default.instanceOf(y.default).isRequired,router:b.default.object.isRequired},t.default=O},719:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r(401)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),i=u(r(399));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent),n(t,[{key:"render",value:function(){var e=this.props,t=e.activeRouteName,r=e.navSections;return o.createElement("nav",{className:"account-nav"},r.map(function(e){return o.createElement("section",{key:e.label,className:"account-nav__section"},o.createElement("div",{className:"account-nav__section__label"},e.label),o.createElement("ul",{className:"account-nav__section__links"},e.links.map(function(e){return o.createElement("li",{key:e.label,className:(0,i.default)({"account-nav__link":!0,"account-nav__is-active":e.routeName===t})},o.createElement(a.default,{to:e.routeName},o.createElement("div",{className:"account-nav__link__label"},e.label)))})))}))}}]),t}();t.default=l},720:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=O(r(406)),i=O(r(415)),u=O(r(441)),l=O(r(440)),s=O(r(719)),c=r(237),f=O(r(239)),d=O(r(240)),p=O(r(45)),h=O(r(51)),m=r(16),y=O(m),g=O(r(48)),_=O(r(241)),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),v=r(49),E=O(r(1)),S=O(r(265));function O(e){return e&&e.__esModule?e:{default:e}}var P=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.state=n({},a.getStateFromCorrectionsStore(),a.getStateFromWeblabStore(),a.getStateFromAuthStore()),a.context.correctionsStore.registerComponent(a,function(){a.setState(a.getStateFromCorrectionsStore())}),a.context.weblabStore.registerComponent(a,function(){a.setState(a.getStateFromWeblabStore())}),a.context.authStore.registerComponent(a,function(){a.setState(a.getStateFromAuthStore())}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,b.PureComponent),a(t,null,[{key:"requiresAuthentication",value:function(){return!0}},{key:"getPageTitle",value:function(){return(0,c.getString)(function(e){return e.account.fallbackPageTitle})}},{key:"pickRedirectRouteName",value:function(e,t){var r=t.isFeatureEnabled(p.default.AccountContactSection),n=e.getAuthorClaimModerationStatus();if(r)return"ACCOUNT_MANAGE";switch(n){case h.default.Pending:return"ACCOUNT_AUTHOR_CLAIM_PENDING";case h.default.Approved:return"ACCOUNT_AUTHOR_CONTACT"}return"HOME"}},{key:"willRouteTo",value:async function(e,r){var n=e.api,a=e.authStore,o=e.weblabStore;if(r.path===y.default.ACCOUNT){var i=t.pickRedirectRouteName(a,o);return new g.default({routeName:i,replace:!0,status:302})}var u=[],l=a.getClaimedAuthorId();return l&&u.push(n.fetchAuthorProfile({authorId:l}),n.fetchAuthorCorrectionsForAuthor({authorId:l}),n.fetchPaperAuthorCorrectionsForAuthor({authorId:l,includePaperModel:"PaperLite"})),Promise.all(u)}}]),a(t,[{key:"getStateFromCorrectionsStore",value:function(){return{hasPendingCorrections:this.context.correctionsStore.hasCorrections()}}},{key:"getStateFromWeblabStore",value:function(){return{isAccountContactSectionEnabled:this.context.weblabStore.isFeatureEnabled(p.default.AccountContactSection)}}},{key:"getStateFromAuthStore",value:function(){var e=this.context.authStore;return{claimedAuthorId:e.getClaimedAuthorId(),claimStatus:e.getAuthorClaimModerationStatus()}}},{key:"getNavSections",value:function(){var e=this.state,t=e.claimStatus,r=e.claimedAuthorId,n=e.hasPendingCorrections,a=e.isAccountContactSectionEnabled,o=[],i={routeName:"ACCOUNT_CORRECTIONS",label:(0,c.getString)(function(e){return e.account.page.corrections.navLabel})};if(a&&o.push({label:(0,c.getString)(function(e){return e.account.section.general.navLabel}),links:[{routeName:"ACCOUNT_MANAGE",label:(0,c.getString)(function(e){return e.account.page.manageAccount.navLabel})},{routeName:"ACCOUNT_CONTACT",label:(0,c.getString)(function(e){return e.account.page.contact.navLabel})}]}),r)switch(t){case h.default.Approved:var u={label:(0,c.getString)(function(e){return e.account.section.authorPage.navLabel}),links:[{routeName:"ACCOUNT_AUTHOR_CONTACT",label:(0,c.getString)(function(e){return e.account.page.authorContact.navLabel})},{routeName:"ACCOUNT_REMOVE_PAPERS",label:(0,c.getString)(function(e){return e.account.page.removePapers.navLabel})},{routeName:"ACCOUNT_ADD_PAPERS",label:(0,c.getString)(function(e){return e.account.page.addPapers.navLabel})}]};n&&u.links.push(i),o.push(u);break;case h.default.Pending:o.push({label:(0,c.getString)(function(e){return e.account.section.authorPage.navLabel}),links:[{routeName:"ACCOUNT_AUTHOR_CLAIM_PENDING",label:(0,c.getString)(function(e){return e.account.page.authorClaimPending.navLabel})}]})}return o}},{key:"getActiveRouteName",value:function(){var e,t=this.context.router,r=this.props.route,n=null!=(e=(0,v.matchRoutes)(r.routes,t.route.location.pathname))&&null!=(e=e[0])&&null!=(e=e.route)?e.path:e;return(0,m.getRouteNameForPath)(n)||"ACCOUNT"}},{key:"render",value:function(){var e=this.getActiveRouteName(),t=this.getNavSections();return b.createElement("div",{className:"account"},b.createElement(u.default,null,b.createElement(o.default,{showSearchBar:!0})),b.createElement(l.default,null,b.createElement(i.default,null)),b.createElement("div",{className:"account__columns"},b.createElement("div",{className:"account__column account__nav"},b.createElement(s.default,{activeRouteName:e,navSections:t})),b.createElement("div",{className:"account__column account__page"},(0,v.renderRoutes)(this.props.route.routes))))}}]),t}();P.contextTypes={api:E.default.instanceOf(f.default).isRequired,authStore:E.default.instanceOf(d.default).isRequired,router:E.default.object.isRequired,weblabStore:E.default.instanceOf(_.default).isRequired,correctionsStore:E.default.instanceOf(S.default).isRequired},t.default=P},721:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=E(r(430)),i=E(r(521)),u=E(r(520)),l=r(237),s=r(410),c=E(r(239)),f=E(r(238)),d=E(r(67)),p=E(r(7)),h=E(r(416)),m=E(r(65)),y=E(r(274)),g=v(r(2)),_=v(r(3)),b=E(r(1));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var P=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(O(a))));return u.onChangeFieldsOfStudy=function(e){u.setState({fieldsOfStudy:e})},u.generateErrorList=function(e){return g.List(e.filter(function(e){return!!e}))},u.validateFormState=function(){var e=u.state,t=e.firstName,r=e.lastName,n=null,a=null;return t&&""!==t.trim()||(n=(0,l.getString)(function(e){return e.demographicForm.error.missingFirstName})),r&&""!=r.trim()||(a=(0,l.getString)(function(e){return e.demographicForm.error.missingLastName})),{firstNameError:n,lastNameError:a}},u.onSubmitForm=async function(){if(u._onSubmitFormPromise)throw new Error("Already sending form");var e=u.onSubmitFormImpl();u._onSubmitFormPromise=e;try{await e}catch(e){p.default.error(e)}finally{u._onSubmitFormPromise=null}},u.renderInput=function(e){var t=e.label,r=e.isRequired,n=e.value,a=e.onChange,i=e.errors,l=e.placeholder;return _.createElement(o.default,{label:t,className:"standard-form",isRequired:r,value:n||"",onChange:a,errors:u.generateErrorList([].concat(O(i))),placeholder:l})},u.state=n({},u.getStateFromUserContactStore()),u.context.userContactStore.registerComponent(u,function(){u.setState(u.getStateFromUserContactStore())}),u.onChangefirstName=u.onChangeInput.bind(u,"firstName"),u.onChangelastName=u.onChangeInput.bind(u,"lastName"),u.onChangeCurrentRole=u.onChangeInput.bind(u,"currentOccupation"),u.onChangeWebsiteUrl=u.onChangeInput.bind(u,"websiteUrl"),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_.PureComponent),a(t,null,[{key:"willRouteTo",value:async function(e){var t=e.userContactStore,r=e.api;return t.isUninitialized()?r.getUserContact().catch(function(e){var t;if("contactMissing"!==(null!=(t=e)?t.errorCode:t))throw e;p.default.info("No contact associated yet")}):Promise.resolve()}}]),a(t,[{key:"getStateFromUserContactStore",value:function(){var e,t,r,n,a,o,i=this.context.userContactStore.getUserContact();return{userId:null!=(o=i)?o.id:o,firstName:null!=(a=i)?a.firstName:a,lastName:null!=(n=i)?n.lastName:n,websiteUrl:null!=(r=i)?r.websiteUrl:r,currentOccupation:null!=(t=i)?t.currentOccupation:t,fieldsOfStudy:((null!=(e=i)?e.fieldsOfStudy:e)||[]).map(function(e){return e.name}),firstNameError:null,lastNameError:null}}},{key:"onChangeInput",value:function(e,t){var r,n=t.currentTarget?t.currentTarget.value:t;this.setState((S(r={},e+"Error",null),S(r,""+e,n),r))}},{key:"onSubmitFormImpl",value:async function(){var e=this.state,t=e.userId,r=e.firstName,n=e.lastName,a=e.websiteUrl,o=e.currentOccupation,i=e.fieldsOfStudy,u=this.validateFormState();if(await(0,s.setState)(this,u),!!Object.values(u).find(function(e){return null!==e}))p.default.warn("Could not save due to errors",u);else try{var l={firstName:r,lastName:n,websiteUrl:a,currentOccupation:o,fieldsOfStudy:i};await this.context.api.submitUserContactInfo(l),(0,m.default)(h.default.create(f.default.ManageAccount.MANAGE_ACCOUNT_SUBMIT,t))}catch(e){p.default.error(e)}}},{key:"render",value:function(){var e=this.state,t=e.lastName,r=e.lastNameError,n=e.firstName,a=e.firstNameError,o=e.websiteUrl,s=e.fieldsOfStudy,c=e.currentOccupation,f=(0,l.getString)(function(e){return e.demographicForm.firstNameLabel}),p=(0,l.getString)(function(e){return e.demographicForm.lastNameLabel}),h=(0,l.getString)(function(e){return e.demographicForm.websiteUrlLabel}),m=(0,l.getString)(function(e){return e.demographicForm.fieldsOfStudyLabel});return _.createElement("div",{className:"account-manage"},_.createElement("div",null,_.createElement("p",{className:"account-manage__sub-text"},(0,l.getString)(function(e){return e.account.section.general.navLabel})),_.createElement("h2",{className:"account-manage__headline"},(0,l.getString)(function(e){return e.account.page.manageAccount.pageHeading}))),_.createElement("hr",{className:"account-manage__rule"}),_.createElement("form",{onSubmit:this.onSubmitForm},_.createElement("div",{className:"flex-row"},_.createElement("div",{className:"account-manage__name-input account-manage__first-name"},this.renderInput({label:f,isRequired:!0,value:n,onChange:this.onChangefirstName,errors:[a],placeholder:"First Name"})),_.createElement("div",{className:"account-manage__name-input account-manage__last-name"},this.renderInput({label:p,isRequired:!0,value:t,onChange:this.onChangelastName,errors:[r],placeholder:"Last Name"}))),_.createElement("hr",{className:"account-manage__rule"}),this.renderInput({label:h,value:o,onChange:this.onChangeWebsiteUrl,errors:[]}),_.createElement(u.default,{currentOccupation:c,onChangeCurrentRole:this.onChangeCurrentRole}),_.createElement(i.default,{isRequired:!1,options:d.default.selectors().map(function(e){return e.name}),selected:s,label:m,onChange:this.onChangeFieldsOfStudy})),_.createElement("button",{className:"button button--primary account-manage__submit-button",onClick:this.onSubmitForm},(0,l.getString)(function(e){return e.account.page.manageAccount.submitButtonLabel})))}}]),t}();P.contextTypes={api:b.default.instanceOf(c.default).isRequired,userContactStore:b.default.instanceOf(y.default).isRequired},t.default=P},722:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SUBSCRIPTION_TYPES=["productFeaturesSpotlightSubscription","semanticScholarNewsletterSubscription","betaTestGroupSubscription","allenInstituteNewsletterSubscription"]},723:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=O(r(422)),i=O(r(430)),u=O(r(530)),l=O(r(239)),s=O(r(240)),c=O(r(238)),f=r(237),d=O(r(7)),p=O(r(246)),h=O(r(416)),m=r(722),y=O(r(65)),g=O(r(274)),_=S(r(2)),b=O(r(399)),v=O(r(1)),E=S(r(3));function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function O(e){return e&&e.__esModule?e:{default:e}}var P=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a._updateEmailInput=null,a.generateErrorList=function(e){return _.List(e.filter(function(e){return!!e}))},a.onToggle=function(e){var t=a.state,r=t.userId;if(!t.contactEmail)return(0,y.default)(p.default.create(c.default.AccountSettings.NO_EMAIL_ERROR,r)),void a.setState({emailError:(0,f.getString)(function(e){return e.account.page.contact.email.noEmailError})});var n=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},e,!a.state[e]);a.context.api.submitUserContactInfo(n),(0,y.default)(h.default.create(c.default.AccountSettings.CHANGE_SUBSCRIPTION,r)),a.setState(n)},a.onUnsubscribeAll=function(){var e=a.state,t=e.userId;if(!e.contactEmail)return(0,y.default)(p.default.create(c.default.AccountSettings.NO_EMAIL_ERROR,t)),void a.setState({emailError:(0,f.getString)(function(e){return e.account.page.contact.email.noEmailError})});var r={};m.SUBSCRIPTION_TYPES.map(function(e){return r[e]=!1}),a.context.api.submitUserContactInfo(r),(0,y.default)(h.default.create(c.default.AccountSettings.UNSUBSCRIBE_ALL,t)),a.setState(r)},a.onClickUpdateEmail=async function(){var e=a.state,t=e.contactEmail,r=e.userId;if(!t)return a.setState({showEmailInput:!1,emailError:(0,f.getString)(function(e){return e.account.page.contact.email.noEmailError}),isEmailUpdating:!1}),void(a._updateEmailInput=null);if(!a._updateEmailInput&&t)return a.setState({showEmailInput:!1}),void(a._updateEmailInput=null);if(a._updateEmailInput===t)return a.setState({showEmailInput:!1,emailError:null}),void(a._updateEmailInput=null);var n={s2AccountEmail:a._updateEmailInput};try{a.setState({isEmailUpdating:!0}),await a.context.api.submitUserContactInfo(n),(0,y.default)(h.default.create(c.default.AccountSettings.CHANGE_CONTACT_EMAIL,r))}catch(e){var o,i;return void("ContactEmailTaken"===(null!=(i=e)?i.errorCode:i)?((0,y.default)(p.default.create(c.default.AccountSettings.CONTACT_EMAIL_CONFLICT,r)),a.setState({isEmailUpdating:!1,emailError:(0,f.getString)(function(e){return e.account.page.contact.email.emailInUseError})})):"ContactInvalidEmail"===(null!=(o=e)?o.errorCode:o)?a.setState({isEmailUpdating:!1,emailError:(0,f.getString)(function(e){return e.account.page.contact.email.invalidEmailError})}):(d.default.error(e),a.setState({isEmailUpdating:!1,emailError:(0,f.getString)(function(e){return e.account.page.contact.email.invalidEmailError})})))}a.setState({showEmailInput:!1,contactEmail:a._updateEmailInput,emailError:null,isEmailUpdating:!1}),a._updateEmailInput=null},a.onCancelEmail=function(){a.setState({showEmailInput:!1,updatedEmail:null,emailError:null}),a._updateEmailInput=null},a.onUpdateEmail=function(e){a._updateEmailInput=e},a.displayEmailInput=function(){a.setState({showEmailInput:!0})},a.state=n({updatedEmail:null,showEmailInput:!1,emailError:null,isEmailUpdating:!1},a.getStateFromUserContactStore(),a.getStateFromAuthStore()),a.context.authStore.registerComponent(a,function(){a.setState(a.getStateFromAuthStore)}),a.context.userContactStore.registerComponent(a,function(){a.setState(a.getStateFromUserContactStore())}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,E.PureComponent),a(t,null,[{key:"getPageTitle",value:function(){return(0,f.getString)(function(e){return e.account.page.contact.pageTitle})}},{key:"willRouteTo",value:async function(e){var t=e.userContactStore,r=e.api;return t.isUninitialized()?r.getUserContact().catch(function(e){var t;if("contactMissing"!==(null!=(t=e)?t.errorCode:t))throw e;d.default.info("No contact associated yet")}):Promise.resolve()}}]),a(t,[{key:"getStateFromAuthStore",value:function(){var e=this.context.authStore.getUser();return{userId:e?e.id:null}}},{key:"getStateFromUserContactStore",value:function(){var e,t,r,n,a,o=this.context.userContactStore.getUserContact();return{contactEmail:(null!=(a=o)?a.s2AccountEmail:a)||"",betaTestGroupSubscription:null!=(n=o)?n.betaTestGroupSubscription:n,productFeaturesSpotlightSubscription:null!=(r=o)?r.productFeaturesSpotlightSubscription:r,semanticScholarNewsletterSubscription:null!=(t=o)?t.semanticScholarNewsletterSubscription:t,allenInstituteNewsletterSubscription:null!=(e=o)?e.allenInstituteNewsletterSubscription:e}}},{key:"renderSubscriptionToggle",value:function(e){var t,r=this,n=!!(null!=(t=this.state)?t[e]:t),a=(0,b.default)("email-subscription",{"is-disabled":!n});return E.createElement("ul",null,E.createElement("li",{className:a},E.createElement("div",{className:"account-contact__subscriptions__toggle"},E.createElement(u.default,{className:"subscription__toggle",selected:n,onClick:function(){return r.onToggle(e)}}),E.createElement("div",{className:"account-contact__subscription__label flex-static"},(0,f.getString)(function(t){return t.account.page.contact.subscriptionType[e].label}))),E.createElement("div",{className:"account-contact__subscription__description"},(0,f.getString)(function(t){return t.account.page.contact.subscriptionType[e].description}))))}},{key:"renderEmailChange",value:function(){var e=this.state,t=e.contactEmail,r=e.emailError,n=e.isEmailUpdating;return E.createElement("div",{className:"account-contact__update-email__change"},E.createElement("div",{className:"account-contact__update-email__headline__buttons"},E.createElement("h2",{className:"account-contact__subscriptions__headline"},(0,f.getString)(function(e){return e.account.page.contact.email.label})),E.createElement("div",{className:"account-contact__update-email__change-buttons"},E.createElement("button",{className:"button button--secondary account-contact__update-email__update-button",onClick:this.onClickUpdateEmail,disabled:n},E.createElement("div",{className:"flex-row-centered"},E.createElement("span",{className:"icon-button-text"},(0,f.getString)(function(e){return e.account.page.contact.email.updateLabel})))),E.createElement("button",{className:"button button--secondary account-contact__update-email__cancel-button",onClick:this.onCancelEmail},E.createElement("div",{className:"flex-row-centered"},E.createElement("span",{className:"icon-button-text"},(0,f.getString)(function(e){return e.account.page.contact.email.cancelLabel})))))),E.createElement("div",{className:"account-contact__update-email__input"},E.createElement(i.default,{className:"standard-form account-contact__update-email__input-box",value:this._updateEmailInput,onChange:this.onUpdateEmail,errors:this.generateErrorList([r]),isRequired:!0,placeholder:t})))}},{key:"renderEmailNoChange",value:function(){var e=this.state,t=e.contactEmail,r=e.emailError;return E.createElement("div",{className:"account-contact__update-email__no-change"},E.createElement("div",{className:"account-contact__update-email__headline__buttons"},E.createElement("h2",{className:"account-contact__subscriptions__headline"},(0,f.getString)(function(e){return e.account.page.contact.email.label})),E.createElement("button",{className:"button button--secondary account-contact__update-email__button",onClick:this.displayEmailInput},E.createElement("div",{className:"flex-row-centered"},E.createElement("span",{className:"icon-button-text"},(0,f.getString)(function(e){return e.account.page.contact.email.buttonLabel}))))),E.createElement("span",{className:"account-contact__update-email__email"},t||""),E.createElement("span",{className:"account-contact__update-email__no-email-error"},r&&r))}},{key:"render",value:function(){var e=this,t=this.state.showEmailInput;return E.createElement("div",{className:"account-contact"},E.createElement("div",{className:"account__general-settings__label"},(0,f.getString)(function(e){return e.account.section.general.navLabel})),E.createElement("h2",{className:"account-contact__headline"},(0,f.getString)(function(e){return e.account.page.contact.pageHeading})),E.createElement("hr",{className:"account__divider"}),E.createElement("div",{className:"account-contact__email-section"},t?this.renderEmailChange():this.renderEmailNoChange()),E.createElement("hr",{className:"account__divider"}),E.createElement("div",{className:"account-contact__subscriptions"},E.createElement("h2",{className:"account-contact__subscriptions__headline"},(0,f.getString)(function(e){return e.account.page.contact.subscriptionLabel})),E.createElement("div",{className:"account-contact__subscriptions__list"},m.SUBSCRIPTION_TYPES.map(function(t){return E.createElement("div",{className:"account-contact__subscription",key:t},e.renderSubscriptionToggle(t))}))),E.createElement("hr",{className:"account__divider"}),E.createElement("div",{className:"account-contact__subscriptions__unsubscribe"},E.createElement("h2",{className:"account-contact__subscriptions__headline"},(0,f.getString)(function(e){return e.account.page.contact.unsubscribe.label})),E.createElement("button",{className:"button button--secondary account-contact__unsubscribe-button",onClick:this.onUnsubscribeAll},E.createElement("div",{className:"flex-row-centered"},E.createElement("span",{className:"icon-button-text"},(0,f.getString)(function(e){return e.account.page.contact.unsubscribe.buttonLabel}))))),E.createElement("div",{className:"account-contact__subscriptions__description"},E.createElement(o.default,{content:(0,f.getString)(function(e){return e.account.page.contact.unsubscribe.description})})))}}]),t}();P.contextTypes={api:v.default.instanceOf(l.default).isRequired,authStore:v.default.instanceOf(s.default).isRequired,userContactStore:v.default.instanceOf(g.default).isRequired},t.default=P},724:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ChangeNameField:"authorName",ChangeOrcidField:"orcidId",ChangeHomepageField:"homepage",ChangeAffiliationField:"affiliations"},a=Object.keys(n).reduce(function(e,t){return e[n[t]]=t,e},{});t.default=Object.freeze(n);t.CorrectionTypeByValue=Object.freeze(a)},725:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=y(r(401)),i=r(34),u=r(237),l=y(r(240)),s=y(r(69)),c=y(r(265)),f=y(r(68)),d=(m(r(2)),m(r(3))),p=y(r(399)),h=y(r(1));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var _=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(g(a))));return i.state=n({},i.getStateFromAuthStore(),i.getStateFromCorrectionsStore()),i.context.authStore.registerComponent(i,function(){i.setState(i.getStateFromAuthStore())}),i.context.correctionsStore.registerComponent(i,function(){i.setState(i.getStateFromCorrectionsStore())}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.PureComponent),a(t,[{key:"getStateFromAuthStore",value:function(){return{viewerClaimedAuthorId:this.context.authStore.getClaimedAuthorId()}}},{key:"getStateFromCorrectionsStore",value:function(){var e=this.context.correctionsStore,t=this.props.correction;return{paper:e.getCorrectedPaperById(t.paperHash)}}},{key:"buildViewerAuthor",value:function(){var e=this.props.correction.authorId,t=this.context.correctionsStore.getAuthorCorrections().findLast(function(e){return e.fieldNames.includes("authorName")});if(t){var r=t.fieldCorrections.find(function(e){return"authorName"===e.field}).changeValue,n=r.first,a=r.middle,o=r.last;return i.AuthorAlias.fromJs({ids:[e],name:[n].concat(g(a),[o]).join(" ")})}var u=this.context.authorProfileStore.getAuthorProfile();return u?i.AuthorAlias.fromJs({ids:[e],name:u.fullName}):(0,i.AuthorAlias)({ids:[e],name:"You"})}},{key:"renderAuthor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.props.correction,n=e.canonicalId()===this.state.viewerClaimedAuthorId;return d.createElement("li",{key:[r.paperHash,e.canonicalId()].join("|"),className:(0,p.default)({"corrections-summary__paper-correction__author":!0,"corrections-summary__paper-correction__author__added":t.isAdd,"corrections-summary__paper-correction__author__removed":t.isRemove})},d.createElement("span",{className:"corrections-summary__paper-correction__author__name"},e.name),n&&d.createElement("span",{className:"corrections-summary__paper-correction__author__viewer-claimed-tag"},(0,u.getString)(function(e){return e.correctionSummary.viewerClaimedLabel})))}},{key:"renderAddAuthorship",value:function(e){var t=this,r=this.props.correction.position,n=e.slice(0,r),a=e.slice(r);return d.createElement("ul",{className:"corrections-summary__paper-correction__author-list corrections-summary__paper-correction__add-authorship"},n.map(function(e){return t.renderAuthor(e)}),this.renderAuthor(this.buildViewerAuthor(),{isAdd:!0}),a.map(function(e){return t.renderAuthor(e)}))}},{key:"renderRemoveAuthorship",value:function(e){var t=this,r=this.props.correction.position,n=e.slice(0,r),a=e.slice(r+1),o=e.get(r);return d.createElement("ul",{className:"corrections-summary__paper-correction__author-list corrections-summary__paper-correction__remove-authorship"},n.map(function(e){return t.renderAuthor(e)}),this.renderAuthor(o,{isRemove:!0}),a.map(function(e){return t.renderAuthor(e)}))}},{key:"renderSwapAuthorship",value:function(e){var t=this,r=this.props.correction.position,n=e.slice(0,r),a=e.slice(r+1),o=e.get(r);return d.createElement("ul",{className:"corrections-summary__paper-correction__author-list corrections-summary__paper-correction__swap-authorship"},n.map(function(e){return t.renderAuthor(e)}),this.renderAuthor(o,{isRemove:!0}),this.renderAuthor(this.buildViewerAuthor(),{isAdd:!0}),a.map(function(e){return t.renderAuthor(e)}))}},{key:"render",value:function(){var e=this,t=this.props.correction,r=this.state.paper;if(!r)return null;var n=r.authors.map(function(e){return e.alias});return d.createElement("div",{className:"corrections-summary__paper-correction"},d.createElement("div",{className:"corrections-summary__paper-correction__title"},d.createElement(o.default,{to:"PAPER_DETAIL",params:{paperId:r.id,slug:r.slug}},r.title)),function(){switch(t.correctionType){case f.default.AddAuthorship:return e.renderAddAuthorship(n);case f.default.SwapAuthorship:return e.renderSwapAuthorship(n)}}())}}]),t}();_.contextTypes={authStore:h.default.instanceOf(l.default).isRequired,authorProfileStore:h.default.instanceOf(s.default).isRequired,correctionsStore:h.default.instanceOf(c.default).isRequired},t.default=_},726:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(452),i=p(o),u=p(r(531)),l=p(r(401)),s=r(237),c=p(r(240)),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),d=p(r(1));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.state=n({},a.getStateFromAuthStore()),a.context.authStore.registerComponent(a,function(){a.setState(a.getStateFromAuthStore())}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.PureComponent),a(t,[{key:"getStateFromAuthStore",value:function(){return{claimedAuthorId:this.context.authStore.getClaimedAuthorId()}}},{key:"render",value:function(){var e=this.state.claimedAuthorId;return f.createElement("div",{className:"account-correction-summary"},f.createElement("h2",{className:"account-correction-summary__headline"},(0,s.getString)(function(e){return e.account.page.corrections.pageHeading})),f.createElement(u.default,null),f.createElement(i.default,null,f.createElement(o.AccountBarRight,null,e&&f.createElement(l.default,{className:"account-correction-summary__link-button button button--primary",to:"AUTHOR_PROFILE_BY_ID",params:{authorId:e}},(0,s.getString)(function(e){return e.account.page.corrections.authorPageLink})))))}}]),t}();h.getPageTitle=function(){return(0,s.getString)(function(e){return e.account.page.corrections.pageTitle})},h.contextTypes={authStore:d.default.instanceOf(c.default).isRequired},t.default=h},727:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.default=function(e){var t=function(t){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t)),a=new i.default(n.context.api);return n.state={formStore:a},e.getFormStore&&e.getFormStore(a),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),a(r,[{key:"getChildContext",value:function(){var e=this.state.formStore;return{formStore:e}}},{key:"render",value:function(){return u.createElement(e,n({},this.props,{formStore:this.state.formStore}))}}]),r}(u.Component);return t.contextTypes={api:l.default.instanceOf(o.default).isRequired},t.childContextTypes={formStore:l.default.instanceOf(i.default)},new Proxy(t,{get:function(t,r){return r in t?t[r]:r in e?e[r]:void 0}})};var o=s(r(239)),i=s(r(461)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),l=s(r(1));function s(e){return e&&e.__esModule?e:{default:e}}},728:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.validateOrcidId=m,t.validateHomePage=y;var o=p(r(532)),i=r(237),u=r(510),l=r(509),s=p(r(69)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),f=p(r(9)),d=p(r(1));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u.state=n({},u.getStateFromAuthorProfileStore()),u.context.authorProfileStore.registerComponent(u,function(){u.setState(u.getStateFromAuthorProfileStore())}),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.PureComponent),a(t,[{key:"getStateFromAuthorProfileStore",value:function(){var e=this.context.authorProfileStore.getAuthorProfile();if(!e)return{initialAffiliation:"",initialOrcidId:"",initialHomepageUrl:""};var t=e.affiliations,r=void 0===t?[]:t,n=e.orcidId,a=void 0===n?"":n,o=e.homepageUrl,i=void 0===o?"":o;return{initialAffiliation:r.join("; "),initialOrcidId:a,initialHomepageUrl:i}}},{key:"render",value:function(){var e=this.state,t=e.initialAffiliation,r=e.initialOrcidId,n=e.initialHomepageUrl;return c.createElement(c.Fragment,null,c.createElement(o.default,{fieldName:"affiliation",initialValue:t,label:(0,i.getString)(function(e){return e.authorEdit.form.affiliationLabel}),placeholder:(0,i.getString)(function(e){return e.authorEdit.form.affiliationPlaceholder}),isRequired:!1}),c.createElement(o.default,{fieldName:"orcidId",initialValue:r,label:(0,i.getString)(function(e){return e.authorEdit.form.orcidIdLabel}),placeholder:(0,i.getString)(function(e){return e.authorEdit.form.orcidIdPlaceholder}),onValidate:m,isRequired:!1}),c.createElement(o.default,{fieldName:"homepageUrl",initialValue:n,label:(0,i.getString)(function(e){return e.authorEdit.form.homepageUrlLabel}),placeholder:(0,i.getString)(function(e){return e.authorEdit.form.homepageUrlPlaceholder}),onValidate:y,isRequired:!1}))}}]),t}();async function m(e){var t=e.getFieldValue("orcidId");return t?((0,f.default)("string"==typeof t,"value of orcid id was not a string"),t&&!l.orcidPattern.test(t)?(0,i.getString)(function(e){return e.authorEdit.error.orcidIdInvalid}):null):null}async function y(e){var t=e.getFieldValue("homepageUrl");return t?((0,f.default)("string"==typeof t,"value of homepage was not a string"),t&&!u.homepageUrlPattern.test(t)?(0,i.getString)(function(e){return e.authorEdit.error.homepageUrlInvalid}):null):null}h.contextTypes={authorProfileStore:d.default.instanceOf(s.default).isRequired},t.default=h},729:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.validateLastName=d;var o=c(r(532)),i=r(237),u=c(r(69)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),s=c(r(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u.state=n({},u.getStateFromAuthorProfileStore()),u.context.authorProfileStore.registerComponent(u,function(){u.setState(u.getStateFromAuthorProfileStore())}),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.PureComponent),a(t,[{key:"getStateFromAuthorProfileStore",value:function(){var e=this.context.authorProfileStore.getAuthorProfile();return e?{initialFirstName:e.firstName,initialMiddleNames:e.middleNames.join(" "),initialLastName:e.lastName}:{initialFirstName:"",initialMiddleNames:"",initialLastName:""}}},{key:"render",value:function(){var e=this.state,t=e.initialFirstName,r=e.initialMiddleNames,n=e.initialLastName;return l.createElement(l.Fragment,null,l.createElement(o.default,{fieldName:"firstName",initialValue:t,label:(0,i.getString)(function(e){return e.authorEdit.form.firstNameLabel}),placeholder:(0,i.getString)(function(e){return e.authorEdit.form.firstNamePlaceholder}),isRequired:!1}),l.createElement(o.default,{fieldName:"middleNames",initialValue:r,label:(0,i.getString)(function(e){return e.authorEdit.form.middleNamesLabel}),placeholder:(0,i.getString)(function(e){return e.authorEdit.form.middleNamesPlaceholder}),isRequired:!1}),l.createElement(o.default,{fieldName:"lastName",initialValue:n,label:(0,i.getString)(function(e){return e.authorEdit.form.lastNameLabel}),placeholder:(0,i.getString)(function(e){return e.authorEdit.form.lastNamePlaceholder}),onValidate:d,isRequired:!0}))}}]),t}();async function d(e){var t=e.getFieldValue("lastName");return"string"!=typeof t||0===t.trim().length?(0,i.getString)(function(e){return e.authorEdit.error.lastNameMissing}):null}f.contextTypes={authorProfileStore:s.default.instanceOf(u.default).isRequired},t.default=f},730:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=c(r(729)),i=c(r(728)),u=c(r(461)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),s=c(r(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u.state=n({},u.getStateFromFormStore()),u.context.formStore.registerComponent(u,function(){u.setState(u.getStateFromFormStore())}),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.PureComponent),a(t,[{key:"getStateFromFormStore",value:function(){return{isSending:this.context.formStore.isSending()}}},{key:"render",value:function(){return l.createElement("div",{className:"author-edit"},l.createElement("div",{className:"author-edit__fields"},l.createElement(o.default,null),l.createElement("hr",{className:"author-edit__divider"}),l.createElement(i.default,null)))}}]),t}();f.contextTypes={formStore:s.default.instanceOf(u.default).isRequired},t.default=f},731:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(452),i=O(o),u=O(r(730)),l=O(r(422)),s=O(r(400)),c=r(410),f=r(237),d=r(16),p=r(461),h=O(r(239)),m=O(r(69)),y=O(r(240)),g=r(258),_=O(r(48)),b=O(r(727)),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),E=O(r(1)),S=r(257);function O(e){return e&&e.__esModule?e:{default:e}}var P=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u.state=n({successMessage:null},u.getStateFromFormStore()),u.props.formStore.registerComponent(u,function(){u.setState(u.getStateFromFormStore())}),u.props.formStore.subscribe(p.SUBMIT,function(){u.attemptSubmit()}),u.onClickUnclaim=u.onClickUnclaim.bind(u),u.onSubmitForm=u.onSubmitForm.bind(u),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,v.PureComponent),a(t,null,[{key:"getPageTitle",value:function(){return(0,f.getString)(function(e){return e.account.page.authorContact.pageTitle})}},{key:"willRouteTo",value:async function(e){var t=e.api,r=e.authStore,n=e.authorProfileStore,a=r.getClaimedAuthorId(),o=n.getAuthorProfile();return a?o?void 0:t.fetchAuthorProfile({authorId:a}):new _.default({routeName:"ACCOUNT_CONTACT",replace:!0,status:302})}}]),a(t,[{key:"getStateFromFormStore",value:function(){var e=this.props.formStore;return{errorMessage:e.getFormErrorMessage(),isFormDirty:e.isFormDirty(),isSending:e.isSending()}}},{key:"onSubmitForm",value:function(e){e.preventDefault(),this.attemptSubmit()}},{key:"onClickUnclaim",value:function(e){e.preventDefault(),window.confirm((0,f.getString)(function(e){return e.authorEdit.unclaimDialogue}))&&this.attemptUnclaim()}},{key:"navigateToAuthorPage",value:function(e){this.context.router.history.push((0,d.makePath)({routeName:"AUTHOR_PROFILE_BY_ID",params:{authorId:e}}))}},{key:"attemptSubmit",value:async function(){var e=this.props,t=e.formStore,r=e.history;if(await t.validate()){var n=this.context.authStore.getClaimedAuthorId();if(n){await t.submitToApi(async function(e,t){try{await Promise.all([e.updateAuthorProfile({authorId:n,lastName:(t.lastName||"").trim(),middleNames:(t.middleNames||"").split(/\s+/).map(function(e){return e.trim()}),firstName:(t.firstName||"").trim(),affiliation:(t.affiliation||"").split("; ").map(function(e){return e.trim()}),homepageUrl:(t.homepageUrl||"").trim(),orcidId:(t.orcidId||"").trim()}),(0,c.delayFor)(2e3)])}catch(e){throw new Error((0,f.getString)(function(e){return e.authorEdit.error.apiFailed}))}});var a=new _.default({routeName:"ACCOUNT_CORRECTIONS",replace:!0,status:302});(0,g.handleRedirect)({redirect:a,history:r})}else t.setFormErrorMessage((0,f.getString)(function(e){return e.authorEdit.error.noAuthorClaimed}))}}},{key:"attemptUnclaim",value:async function(){var e=this.props.formStore,t=this.context.authStore.getClaimedAuthorId();if(t){var r=this.context.api;await r.unclaimAuthorProfile({authorId:t}),await r.fetchUserInfo(),this.navigateToAuthorPage(t)}else e.setFormErrorMessage((0,f.getString)(function(e){return e.authorEdit.error.noAuthorClaimed}))}},{key:"renderMessage",value:function(){var e=this.state,t=e.errorMessage,r=e.successMessage;return t?v.createElement("div",{className:"account__error-msg"},t):r?v.createElement("div",{className:"account__success-msg"},r):null}},{key:"render",value:function(){var e=this.state,t=e.isSending,r=e.isFormDirty;return v.createElement("div",{className:"account-author-contact"},v.createElement("div",{className:"account-author-contact__headline"},(0,f.getString)(function(e){return e.account.page.authorContact.pageHeading})),v.createElement("div",{className:"account-author-contact__description"},v.createElement(l.default,{content:(0,f.getString)(function(e){return e.account.page.authorContact.pageDescription})})),v.createElement("hr",{className:"account__divider"}),v.createElement("form",{onSubmit:this.onSubmitForm},v.createElement(u.default,null),v.createElement(i.default,null,v.createElement(o.AccountBarMessage,null,this.renderMessage()),v.createElement(o.AccountBarRight,null,t&&v.createElement(s.default,{className:"account__loading",icon:"gear"}),v.createElement("button",{className:"account-author-contact__submit-button button button--primary",onClick:this.onSubmitForm},(0,f.getString)(function(e){return e.account.button.submit}))),v.createElement(o.AccountBarLeft,null,v.createElement("button",{className:"button button--tertiary",onClick:this.onClickUnclaim},(0,f.getString)(function(e){return e.authorEdit.form.unlinkLabel}))))),v.createElement(S.Prompt,{when:r,message:(0,f.getString)(function(e){return e.authorEdit.error.dirtyForm})}))}}]),t}();P.contextTypes={api:E.default.instanceOf(h.default).isRequired,authorProfileStore:E.default.instanceOf(m.default).isRequired,authStore:E.default.instanceOf(y.default).isRequired,router:E.default.object.isRequired},t.default=(0,b.default)(P)},732:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=d(r(422)),i=d(r(400)),u=d(r(401)),l=r(237),s=d(r(240)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),f=d(r(1));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.state=n({},a.getStateFromAuthStore()),a.context.authStore.registerComponent(a,function(){a.setState(a.getStateFromAuthStore())}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.PureComponent),a(t,null,[{key:"getPageTitle",value:function(){return(0,l.getString)(function(e){return e.account.page.authorClaimPending.pageTitle})}}]),a(t,[{key:"getStateFromAuthStore",value:function(){return{claimedAuthorId:this.context.authStore.getClaimedAuthorId()}}},{key:"render",value:function(){var e=this.state.claimedAuthorId;return e?c.createElement("div",{className:"account-author-claim-pending"},c.createElement("h2",null,(0,l.getString)(function(e){return e.account.page.authorClaimPending.pageHeading})),c.createElement("div",{className:"account-author-claim-pending__description"},(0,l.getString)(function(e){return e.authorClaimPending.description})),c.createElement("div",{className:"account-author-claim-pending__banner"},c.createElement(i.default,{icon:"status-waiting"}),c.createElement("div",{className:"account-author-claim-pending__banner__label"},(0,l.getString)(function(e){return e.authorClaimPending.bannerLabel}))),c.createElement("hr",{className:"account-author-claim-pending__rule"}),c.createElement("div",{className:"account-author-claim-pending__status-instructions"},c.createElement(o.default,{content:(0,l.getString)(function(e){return e.authorClaimPending.statusInstruction})})),c.createElement("div",{className:"account-author-claim-pending__button-row"},c.createElement(u.default,{to:"AUTHOR_PROFILE_BY_ID",params:{authorId:e},className:"button button--secondary"},(0,l.getString)(function(e){return e.authorClaimPending.authorLinkLabel})))):null}}]),t}();p.contextTypes={authStore:f.default.instanceOf(s.default).isRequired},t.default=p},733:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ENTER:t.KEY_CODE_ENTER=13,ESC:t.KEY_CODE_ESC=27};t.default=Object.freeze(n);t.byValue=Object.freeze(Object.keys(n).reduce(function(e,t){return e[n[t]]=t,e},{}))},734:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(400)),o=r(237),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent),n(t,[{key:"render",value:function(){return i.createElement("div",{className:"author-add-papers__blank-state"},i.createElement("div",{className:"author-add-papers__blank-state__content"},i.createElement(a.default,{className:"author-add-papers__blank-state__icon",icon:"paper-magnifying-glass",width:"60",height:"77.5"}),i.createElement("div",{className:"author-add-papers__blank-state__description"},(0,o.getString)(function(e){return e.authorAddPapers.blankLabel}))))}}]),t}();t.default=u},735:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){var t=e.onAddPaper,r=e.papers;return u.createElement("div",{className:"author-add-papers__results"},r.isEmpty()?u.createElement("div",{className:"author-add-papers__results__empty"},(0,o.getString)(function(e){return e.authorAddPapers.noResultsLabel})):u.createElement("ul",{className:"author-add-papers__results__paper-list"},r.map(function(e){return u.createElement(s,{key:e.id,onAddPaper:t,paper:e})})))},t.AuthorAddPaperResult=s,t.formatPublisher=c;var a=function(e){return e&&e.__esModule?e:{default:e}}(r(419)),o=r(237),i=r(437),u=(l(r(2)),l(r(3)));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function s(e){var t=e.onAddPaper,r=e.paper,o=c({year:r.year,venue:r.venue});return u.createElement("li",n({className:"author-add-papers__results__paper"},(0,i.heapAuthorAddPaperResult)(),{onClick:function(){return t(r)}}),u.createElement("div",{className:"author-add-papers__results__paper__title"},u.createElement(a.default,{field:r.title})),u.createElement("div",{className:"author-add-papers__results__paper__author-list"},r.authors.map(function(e){return u.createElement(a.default,{key:r.id+"|"+e.alias.ids.join(",")+"|"+e.alias.slug,className:"author-add-papers__results__paper__author",field:e.highlightedField})})),o&&u.createElement("div",{className:"author-add-papers__results__paper__publisher"},o))}function c(e){var t=e.venue,r=e.year;return t&&r?(0,o.getString)(function(e){return e.authorRemovePapers.publisher.bothYearAndVenue},r.text,t.text):r?(0,o.getString)(function(e){return e.authorRemovePapers.publisher.onlyYear},r.text):t?(0,o.getString)(function(e){return e.authorRemovePapers.publisher.onlyVenue},t.text):null}},736:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=c(r(400)),i=r(237),u=r(437),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),s=c(r(399));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))));return i.state={searchText:""},i.onFocusSearch=i.onFocusSearch.bind(i),i.onInputSearch=i.onInputSearch.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.PureComponent),a(t,[{key:"onFocusSearch",value:function(){var e=this.props.onFocus;e&&e()}},{key:"onInputSearch",value:function(e){var t=this.props.onChange;if(t){var r=e.currentTarget.value;this.setState({searchText:r}),t(r)}}},{key:"render",value:function(){var e=this.props.isLoading,t=this.state.searchText;return l.createElement("div",{className:(0,s.default)({"author-add-papers__search":!0,"author-add-papers__search__is-loading":e})},l.createElement("input",n({className:"author-add-papers__search__input",type:"text",value:t,placeholder:(0,i.getString)(function(e){return e.authorAddPapers.searchLabel})},(0,u.heapAuthorAddPaperSearch)(),{onFocus:this.onFocusSearch,onInput:this.onInputSearch})),l.createElement(o.default,{icon:e?"gear":"search-small"}))}}]),t}();t.default=f},737:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(237),i=r(437),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),l=c(r(399)),s=c(r(7));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))));return i.state={},i.onClickPosition=i.onClickPosition.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.PureComponent),a(t,[{key:"onClickPosition",value:function(e){var t=this.props,r=t.onChangePosition,n=t.position;if(r)try{var a=JSON.parse(e.currentTarget.getAttribute("data-position")||"");a!==n&&r(a)}catch(e){s.default.error("failed to parse position",e)}}},{key:"render",value:function(){var e=this,t=this.props,r=t.paper,a=t.position,s=t.reason,c=t.viewerFullName,f=t.showReplacedName;return u.createElement("div",{className:"author-add-papers__position__replace"},r.authors.map(function(e){return e.alias.name}).map(function(t,d){var p=d===a,h=f||!p;return u.createElement("div",n({className:(0,l.default)({"author-add-papers__position__replace__name":!0,"author-add-papers__position__replace__is-selected":p}),key:r.id+"|"+t+"|"+d,"data-position":p?"null":d},p?(0,i.heapAuthorAddPaperPositionUnselect)({reason:s,position:d}):(0,i.heapAuthorAddPaperPositionSelect)({reason:s,position:d}),{onClick:e.onClickPosition}),h&&u.createElement("div",{className:"author-add-papers__position__replace__name__author-name"},t),u.createElement("div",{className:"author-add-papers__position__replace__name__viewer-name"},c),u.createElement("div",{className:"author-add-papers__position__you-tag"},(0,o.getString)(function(e){return e.authorAddPapers.youTagLabel})))}))}}]),t}();f.defaultProps={showReplacedName:!1},t.default=f},738:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Selected=t.Placement=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(237),i=r(437),u=function(e){return e&&e.__esModule?e:{default:e}}(r(7)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));var s=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))));return i.state={},i.onClickPosition=i.onClickPosition.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.PureComponent),a(t,[{key:"onClickPosition",value:function(e){var t=this.props,r=t.onChangePosition,n=t.position;if(r)try{var a=JSON.parse(e.currentTarget.getAttribute("data-position")||"");a!==n&&r(a)}catch(e){u.default.error("failed to parse position",e)}}},{key:"render",value:function(){var e=this,t=this.props,r=t.paper,n=t.position,a=t.reason,o=t.viewerFullName;return l.createElement("div",{className:"author-add-papers__position__between"},r.authors.map(function(e){return e.alias.name}).map(function(t,i){return l.createElement(l.Fragment,{key:r.id+"|"+t+"|"+i},n===i?l.createElement(f,{viewerFullName:o,reason:a,position:i,onClick:e.onClickPosition}):l.createElement(c,{reason:a,position:i,onClick:e.onClickPosition}),l.createElement("div",{className:"author-add-papers__position__between__name"},t))}),n===r.authors.size?l.createElement(f,{viewerFullName:o,reason:a,position:r.authors.size,onClick:this.onClickPosition}):l.createElement(c,{reason:a,position:r.authors.size,onClick:this.onClickPosition}))}}]),t}();t.default=s;var c=t.Placement=function(e){var t=e.reason,r=e.position,a=e.onClick;return l.createElement("div",n({className:"author-add-papers__position__between__placement","data-position":r},(0,i.heapAuthorAddPaperPositionSelect)({reason:t,position:r}),{onClick:a}))},f=t.Selected=function(e){var t=e.viewerFullName,r=e.reason,a=e.position,u=e.onClick;return l.createElement("div",n({className:"author-add-papers__position__between__selected","data-position":"null"},(0,i.heapAuthorAddPaperPositionUnselect)({reason:r,position:a}),{onClick:u}),l.createElement("div",{className:"author-add-papers__position__between__selected__author-name"},t),l.createElement("div",{className:"author-add-papers__position__you-tag"},(0,o.getString)(function(e){return e.authorAddPapers.youTagLabel})))}},739:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=m(r(738)),i=r(534),u=m(i),l=m(r(737)),s=r(237),c=r(437),f=m(r(69)),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),p=m(r(9)),h=m(r(1));function m(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u.state=n({},u.getStateFromAuthorProfileStore()),u.context.authorProfileStore.registerComponent(u,function(){u.setState(u.getStateFromAuthorProfileStore())}),u.onClickBack=u.onClickBack.bind(u),u.onSelectReason=u.onSelectReason.bind(u),u.onSelectPosition=u.onSelectPosition.bind(u),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.PureComponent),a(t,[{key:"getStateFromAuthorProfileStore",value:function(){var e=this.context.authorProfileStore.getAuthorProfile();return{viewerFullName:e?e.fullName:null}}},{key:"onClickBack",value:function(){var e=this.props.onChangeReason;e&&e(null)}},{key:"onSelectReason",value:function(e){var t=this.props.onChangeReason;t&&t(e)}},{key:"onSelectPosition",value:function(e){var t=this.props,r=t.reason,n=t.onChangePosition;n&&((0,p.default)(r,"reason was not selected before a position was"),n(r,e))}},{key:"getViewerFullName",value:function(){var e=this.context.authorProfileStore.getAuthorProfile();return e?e.fullName:"You"}},{key:"render",value:function(){var e=this,t=this.props,r=t.paper,a=t.reason,f=t.position,p=this.state.viewerFullName;return d.createElement("div",{className:"author-add-papers__position"},d.createElement("div",{className:"author-add-papers__position__instructions"},a?d.createElement(d.Fragment,null,d.createElement("span",{className:"author-add-papers__position__instructions__label"},(0,s.getString)(function(e){return e.authorAddPapers.reason.choices[a].instructions})),d.createElement("span",{className:"author-add-papers__position__instructions__back"},"(",d.createElement("a",n({onClick:this.onClickBack},(0,c.heapAuthorAddPaperReasonBack)({reason:a})),(0,s.getString)(function(e){return e.authorAddPapers.reason.backLabel})),")")):d.createElement("span",{className:"author-add-papers__position__instructions__label"},(0,s.getString)(function(e){return e.authorAddPapers.reason.instructions}))),d.createElement("div",{className:"author-add-papers__position__controls"},function(){switch(a){case i.REASON.NOT_LISTED:return d.createElement(o.default,{paper:r,position:f,reason:i.REASON.NOT_LISTED,viewerFullName:p,onChangePosition:e.onSelectPosition});case i.REASON.WRONG_AUTHOR:return d.createElement(l.default,{paper:r,position:f,reason:i.REASON.WRONG_AUTHOR,viewerFullName:p,onChangePosition:e.onSelectPosition,showReplacedName:!0});case i.REASON.WRONG_NAME:return d.createElement(l.default,{paper:r,position:f,reason:i.REASON.WRONG_NAME,viewerFullName:p,onChangePosition:e.onSelectPosition});default:return i.REASON_VALUES.map(function(t){return d.createElement(u.default,{key:t,onSelect:e.onSelectReason,reason:t,label:(0,s.getString)(function(e){return e.authorAddPapers.reason.choices[t].reasonLabel})})})}}()))}}]),t}();y.contextTypes={authorProfileStore:h.default.instanceOf(f.default).isRequired},t.default=y},740:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r(739)),o=l(r(400)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),u=l(r(399));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))));return i.state={},i.onClickRemove=i.onClickRemove.bind(i),i.onChangeReason=i.onChangeReason.bind(i),i.onChangePosition=i.onChangePosition.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent),n(t,[{key:"onClickRemove",value:function(){var e=this.props,t=e.paper,r=e.onRemovePaper;r&&r(t)}},{key:"onChangeReason",value:function(e){var t=this.props,r=t.paper,n=t.onChangeReason;n&&n(r,e)}},{key:"onChangePosition",value:function(e,t){var r=this.props,n=r.paper,a=r.onChangePosition;a&&a(n,e,t)}},{key:"render",value:function(){var e=this.props,t=e.paper,r=e.position,n=e.reason,l=!n||"number"!=typeof r;return i.createElement("div",{"data-paper-id":t.id,className:(0,u.default)({"author-add-papers__paper":!0,"author-add-papers__paper__is-draft":l})},i.createElement("div",{className:"author-add-papers__paper__remove-button",onClick:this.onClickRemove},i.createElement(o.default,{icon:"circle-plus"})),i.createElement("div",{className:"author-add-papers__paper__content"},i.createElement("div",{className:"author-add-papers__paper__section author-add-papers__paper__details"},i.createElement("div",{className:"author-add-papers__paper__title"},t.title.text),!n&&i.createElement("div",{className:"author-add-papers__paper__authors"},t.authors.map(function(e){return e.alias.name}).join(", "))),i.createElement("div",{className:"author-add-papers__paper__section author-add-papers__paper__position"},i.createElement(a.default,{paper:t,position:r,reason:n,onChangeReason:this.onChangeReason,onChangePosition:this.onChangePosition}))))}}]),t}();t.default=s},741:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(452),i=O(o),u=O(r(535)),l=O(r(533)),s=O(r(400)),c=r(237),f=r(16),d=r(410),p=O(r(7)),h=O(r(239)),m=O(r(240)),y=O(r(256)),g=O(r(68)),_=S(r(3)),b=(S(r(2)),O(r(1))),v=r(257),E=r(8);function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function O(e){return e&&e.__esModule?e:{default:e}}var P=[g.default.AddAuthorship,g.default.SwapAuthorship],w=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))));return u.state=n({isSending:!1,errorMessage:null,successMessage:null,hasAttemptedSubmit:!1},u.getStateFromAuthStore(),u.getStateFromAuthorCorrectionsStore()),u.context.authStore.registerComponent(u,function(){u.setState(u.getStateFromAuthStore())}),u.context.authorCorrectionsStore.registerComponent(u,function(){u.setState(u.getStateFromAuthorCorrectionsStore())}),u.onSubmitForm=u.onSubmitForm.bind(u),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_.PureComponent),a(t,null,[{key:"getPageTitle",value:function(){return(0,c.getString)(function(e){return e.account.page.addPapers.pageTitle})}}]),a(t,[{key:"getStateFromAuthStore",value:function(){return{authorId:this.context.authStore.getClaimedAuthorId()}}},{key:"getStateFromAuthorCorrectionsStore",value:function(){var e=this.context.authorCorrectionsStore,t=e.hasDraftPapers();return{isFormDirty:e.hasPendingCorrections()||t,pendingCorrections:e.getPendingCorrections().filter(function(e){return P.includes(e.correctionType)}),hasDraftPapers:t}}},{key:"scrollToPaper",value:function(e){if(!e)return!1;var t=document.querySelector('.author-add-papers__paper[data-paper-id="'+e+'"]');return!!t&&(t.scrollIntoView({behavior:"smooth"}),!0)}},{key:"onSubmitForm",value:function(e){var t=this;e.preventDefault(),this.state.hasDraftPapers?this.setState({hasAttemptedSubmit:!0,errorMessage:(0,c.getString)(function(e){return e.authorAddPapers.error.papersInDraft})},function(){(0,E.isBrowser)()&&t.scrollToPaper(t.context.authorCorrectionsStore.getDraftPaperIds().first())}):this.setState({hasAttemptedSubmit:!0},function(){t.attemptSubmit()})}},{key:"attemptSubmit",value:async function(){var e=this.state,t=e.authorId,r=e.pendingCorrections,n=this.context,a=n.api,o=n.authorCorrectionsStore;await(0,d.setState)(this,{isSending:!0,errorMessage:null,successMessage:null});try{await a.submitPaperAuthorCorrections({authorId:t,corrections:r.toJS()}),await o.clearPendingCorrections(),this.context.router.history.push((0,f.makePath)({routeName:"ACCOUNT_CORRECTIONS"}))}catch(e){p.default.error("Failed to submit paper changes",e),this.setState({isSending:!1,errorMessage:(0,c.getString)(function(e){return e.authorAddPapers.error.apiSubmitFailed}),successMessage:null})}}},{key:"renderMessage",value:function(){var e=this.state,t=e.errorMessage,r=e.successMessage;return t?_.createElement("div",{className:"account__error-msg"},t):r?_.createElement("div",{className:"account__success-msg"},r):null}},{key:"render",value:function(){var e=this.state,t=e.authorId,r=e.isSending,n=e.hasDraftPapers,a=e.hasAttemptedSubmit,f=e.isFormDirty;return _.createElement("div",{className:"account-add-papers"},_.createElement("h2",{className:"account-add-papers__headline"},(0,c.getString)(function(e){return e.account.page.addPapers.pageHeading})),_.createElement("div",{className:"account-add-papers__description"},(0,c.getString)(function(e){return e.account.page.addPapers.pageDescription})),_.createElement("hr",{className:"account__divider"}),t&&_.createElement(u.default,{key:t,showDraftAsError:a&&n,authorId:t}),_.createElement(i.default,null,_.createElement(o.AccountBarMessage,null,this.renderMessage()),_.createElement(o.AccountBarRight,null,r&&_.createElement(s.default,{className:"account__loading",icon:"gear"}),_.createElement("button",{className:"account-add-papers__submit-button button button--primary",onClick:this.onSubmitForm},(0,c.getString)(function(e){return e.account.button.submit})))),t&&_.createElement(l.default,{authorId:t}),_.createElement(v.Prompt,{when:f,message:(0,c.getString)(function(e){return e.authorAddPapers.error.dirtyForm})}))}}]),t}();w.contextTypes={api:b.default.instanceOf(h.default).isRequired,authStore:b.default.instanceOf(m.default).isRequired,authorCorrectionsStore:b.default.instanceOf(y.default).isRequired,router:b.default.object.isRequired},t.default=w}}]);
//# sourceMappingURL=bundle-3.js.map